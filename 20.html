<!DOCTYPE html>
<html lang="en" class="ðŸ‘—">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>InkRealm: 2741 Archive v4.17</title>
  
  <link rel="icon" type="image/svg+xml" href="https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/svg/inky.svg">
  <link rel="apple-touch-icon" type="image/png" href="https://github.com/ghostm68/pantheon/raw/main/inkrealm.info.2025.png" />
  <link href="https://fonts.googleapis.com/css2?family=Nova+Mono&family=Special+Elite&family=VT323&display=swap" rel="stylesheet">
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root { --red: #ff0000; --black: #050505; --dark-grey: #121212; --white: #d1d1d1; }
    * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }
    
    body { 
      background: var(--black); color: var(--white); font-family: 'Nova Mono', monospace; 
      margin: 0; overflow: hidden; height: 100vh; width: 100vw;
    }

    /* CRT Scanline Overlay */
    body::after {
      content: " "; display: block; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%);
      z-index: 999; background-size: 100% 3px; pointer-events: none; opacity: 0.2;
    }

    .app-grid { display: grid; grid-template-columns: 240px 1fr; grid-template-rows: 50px 1fr 350px 30px; height: 100vh; }

    header { grid-column: span 2; border-bottom: 1px solid var(--red); background: #000; z-index: 50; padding: 0 20px; display: flex; align-items: center; justify-content: space-between; }
    
    .sidebar { background: #080808; border-right: 1px solid #222; overflow-y: auto; padding: 20px; z-index: 10; }

    /* VIEWPORT: SIGIL & MANDALA */
    #viewport { 
      background: radial-gradient(circle at center, #111 0%, #000 100%); 
      position: relative; border-bottom: 1px solid var(--red); overflow: hidden; 
      display: flex; align-items: center; justify-content: center;
    }
    #canvas-bg { position: absolute; top: 0; left: 0; z-index: 1; opacity: 0.4; }
    #sigil-canvas { position: relative; z-index: 5; filter: drop-shadow(0 0 15px var(--red)); cursor: crosshair; }

    /* FLOATING SKILL CARDS */
    .skill-card {
      position: absolute; background: rgba(0, 0, 0, 0.8); border: 1px solid #333;
      border-radius: 5px; padding: 10px; width: 140px; font-size: 9px;
      z-index: 10; cursor: pointer; transition: transform 0.3s, border-color 0.3s;
      display: flex; flex-direction: column; align-items: center; text-align: center;
    }
    .skill-card:hover { border-color: var(--red); transform: scale(1.1); z-index: 100; }
    .skill-card img { width: 100%; height: 80px; object-fit: cover; border-radius: 3px; margin-bottom: 5px; pointer-events: none; }

    /* BOTTOM SHELF */
    .bottom-shelf { 
      grid-row: 3; grid-column: span 2; 
      display: grid; grid-template-columns: 1fr 300px 350px; 
      height: 350px; overflow: hidden; background: #000;
    }
    .dossier-panel { background: var(--dark-grey); border-top: 1px solid var(--red); padding: 25px; overflow-y: auto; font-family: 'Special Elite', serif; font-size: 14px; line-height: 1.7; }
    .log-panel { background: #050505; border-left: 1px solid #222; border-top: 1px solid var(--red); padding: 15px; font-family: 'VT323', monospace; color: #555; overflow-y: auto; font-size: 14px; }
    .chat-section { background: #000; border-left: 1px solid var(--red); border-top: 1px solid var(--red); display: flex; flex-direction: column; overflow: hidden; }
    #chat-container { flex-grow: 1; overflow-y: auto; padding: 10px; font-family: 'VT323', monospace; }
    .chat-bubble { margin-bottom: 8px; padding: 8px; border: 1px solid #222; font-size: 1rem; }
    .bot-message { border-left: 3px solid var(--red); background: #0a0000; }

    /* MENU & CUBES */
    .menu-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; display: none; }
    .menu-overlay.active { display: block; }
    .slide-menu { position: fixed; bottom: -100%; left: 0; width: 100%; height: 85%; background: #000; border-top: 2px solid var(--red); z-index: 1001; transition: bottom 0.4s; padding: 40px; overflow-y: auto; }
    .slide-menu.active { bottom: 0; }
    
    .cube-container { width: 120px; height: 120px; perspective: 600px; display: inline-block; margin: 20px; }
    .cube { width: 100px; height: 100px; position: relative; transform-style: preserve-3d; transform: rotateX(-20deg) rotateY(30deg); transition: transform 0.5s; }
    .cube-face { position: absolute; width: 100px; height: 100px; border: 1px solid #444; background: rgba(0,0,0,0.9); display: flex; align-items: center; justify-content: center; font-size: 9px; text-transform: uppercase; color: #888; text-decoration: none; text-align: center; }
    .cube-front { transform: translateZ(50px); color: var(--red); border-color: var(--red); }
    .cube-right { transform: rotateY(90deg) translateZ(50px); }
    .cube-top { transform: rotateX(90deg) translateZ(50px); }

    .power-btn { font-size: 9px; padding: 2px 8px; border: 1px solid #333; color: #444; cursor: pointer; }
    .power-on { color: var(--red); border-color: var(--red); box-shadow: 0 0 5px var(--red); }
    footer { grid-column: span 2; background: #000; border-top: 1px solid #222; font-size: 8px; color: #444; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; height: 30px; }
  </style>
</head>
<body>

<div id="splash-screen" class="fixed inset-0 bg-black z-[2000] flex flex-col items-center justify-center border-4 double border-red-600 cursor-pointer">
    <h1 class="text-red-600 font-bold text-5xl mb-4 tracking-tighter italic">INKREALM_ARCHIVE</h1>
    <p class="text-zinc-500 animate-pulse text-xs tracking-widest uppercase">Selectric_2741 Handshake Initiated // Click to Enter</p>
</div>

<div class="app-grid">
  <header>
    <div class="flex items-center gap-4">
      <div id="power-light" class="w-2 h-2 bg-zinc-900 rounded-full"></div>
      <h1 class="text-white font-bold tracking-tighter text-sm uppercase">2741_ARCHIVE // v4.17</h1>
      <button id="power-toggle" class="power-btn" onclick="togglePower()">POWER: OFF</button>
    </div>
    <div class="flex items-center gap-6 text-white">
        <button onclick="toggleMenu()" class="text-xl">â®¸</button>
    </div>
  </header>

  <aside class="sidebar">
    <div class="text-[9px] text-zinc-600 mb-2 uppercase tracking-widest font-bold">Identity_Locker</div>
    <img id="ton-qr" src="https://raw.githubusercontent.com/ghostm68/pantheon/main/inkrealm.ton03.jpeg" style="width:60px; border:1px solid #333; cursor:pointer;" onclick="this.style.width = this.style.width === '60px' ? '180px' : '60px'">
    <div class="mt-8 text-[9px] text-zinc-600 mb-2 uppercase font-bold">Archives</div>
    <div id="word-menu"></div>
  </aside>

  <main id="viewport" onclick="forgeSigil()">
    <canvas id="canvas-bg"></canvas>
    <canvas id="sigil-canvas" width="400" height="400"></canvas>
  </main>

  <div class="bottom-shelf">
    <section class="dossier-panel" id="dossier-text">
        <div class="bg-red-600 text-white px-3 py-1 text-[9px] uppercase inline-block mb-4 transform -rotate-1">Active_Exhibit</div>
        <div id="dossier-content">
            <p><strong>The Great AI Hustle: ARTIFICT.IO vs. The Silicon Overlords</strong></p>
            <p>Derekâ€”our self-appointed CEOâ€”had been demoing a toaster he swore could mine Bitcoin if you fed it rye bread...</p>
        </div>
    </section>

    <section class="log-panel" id="log-stream">
        <div class="text-red-600 border-b border-zinc-800 mb-2 text-[10px]">// SYSTEM_ORACLE_LOG</div>
        <div id="log-content"></div>
    </section>

    <section class="chat-section">
      <div id="chat-container"></div>
      <div class="p-2 flex bg-zinc-900 border-t border-red-900">
        <input type="text" id="chat-input" class="bg-black text-red-600 flex-1 p-2 text-xs outline-none" placeholder="Query Informant..." onkeypress="if(event.key==='Enter') sendMessage()">
      </div>
    </section>
  </div>

  <footer>
    <div>STATION_2741 // CRYPTO_WITCH_SECURE</div>
    <div class="flex gap-4 uppercase italic"><span>InkRealm Construct</span><span>|</span><span id="footer-status">PROTOCOL_ACTIVE</span></div>
  </footer>
</div>

<div class="menu-overlay" id="menu-overlay" onclick="toggleMenu()"></div>
<div class="slide-menu" id="slide-menu">
    <h2 class="text-red-600 font-serif text-3xl mb-10">CUBE_NAVIGATION_CORE</h2>
    <div class="flex justify-around flex-wrap">
        <div class="cube-container">
            <div class="cube">
                <a href="#" class="cube-face cube-front">Core</a>
                <a href="#" class="cube-face cube-right">Typecast</a>
                <a href="#" class="cube-face cube-top">Citadel</a>
            </div>
        </div>
        <div class="cube-container">
            <div class="cube">
                <a href="#" class="cube-face cube-front">Dossier</a>
                <a href="#" class="cube-face cube-right">AI_Link</a>
                <a href="#" class="cube-face cube-top">Status</a>
            </div>
        </div>
    </div>
</div>

<script>
  // --- WRITER DATA ---
  const writers = [
    { name: "Fyodor Dostoevsky", bio: "Psychological depth. Manuscripts don't burn.", img: "https://alchetron.com/cdn/fyodor-dostoyevsky-bb62ecdb-311c-4080-bf05-f11e77b4744-resize-750.jpeg" },
    { name: "Mikhail Bulgakov", bio: "The Master and Margarita. Satirical fantasy.", img: "https://mf.b37mrtl.ru/rbthmedia/images/all/2016/05/13/russian_writer_mikhail_bulgakov_tass_565740_1000.jpg" },
    { name: "Nikolai Gogol", bio: "The Nose. The Overcoat. Absurdism.", img: "https://i0.wp.com/theidlewoman.net/wp-content/uploads/2018/05/nikolay-gogol.jpg?ssl=1" }
  ];

  // --- BG MANDALA ---
  const bgCanvas = document.getElementById('canvas-bg');
  const bgCtx = bgCanvas.getContext('2d');
  let hue = 0;

  function drawMandala() {
    bgCanvas.width = window.innerWidth;
    bgCanvas.height = window.innerHeight;
    const centerX = bgCanvas.width / 2;
    const centerY = bgCanvas.height / 2;
    const petals = 12;
    const radius = 300;
    
    bgCtx.clearRect(0,0, bgCanvas.width, bgCanvas.height);
    for (let i = 0; i < petals; i++) {
        const angle = (Math.PI * 2 / petals) * i;
        bgCtx.beginPath();
        bgCtx.moveTo(centerX, centerY);
        bgCtx.lineTo(centerX + radius * Math.cos(angle), centerY + radius * Math.sin(angle));
        bgCtx.strokeStyle = `hsla(${hue}, 100%, 50%, 0.1)`;
        bgCtx.stroke();
    }
    hue++;
    requestAnimationFrame(drawMandala);
  }

  // --- SIGIL ENGINE ---
  const sCanvas = document.getElementById('sigil-canvas');
  const sCtx = sCanvas.getContext('2d');
  function forgeSigil() {
    sCtx.clearRect(0,0,400,400);
    sCtx.strokeStyle = Math.random() > 0.5 ? "#ff0000" : "#ffffff";
    sCtx.lineWidth = 2;
    const centerX = 200, centerY = 200;
    for(let i=0; i<8; i++) {
        sCtx.beginPath();
        sCtx.arc(centerX, centerY, i*20, 0, Math.PI * (Math.random()*2));
        sCtx.stroke();
    }
  }

  // --- FLOATING CARDS ---
  function spawnCards() {
    writers.forEach((w, i) => {
        const card = document.createElement('div');
        card.className = 'skill-card';
        card.innerHTML = `<img src="${w.img}"><b>${w.name}</b>`;
        card.style.left = (10 + Math.random() * 70) + "%";
        card.style.top = (10 + Math.random() * 60) + "%";
        card.onclick = () => {
            document.getElementById('dossier-content').innerHTML = `<h3>${w.name}</h3><p>${w.bio}</p>`;
        };
        document.getElementById('viewport').appendChild(card);
        animateCard(card);
    });
  }

  function animateCard(el) {
    let x = parseFloat(el.style.left), y = parseFloat(el.style.top);
    let dx = (Math.random()-0.5)*0.1, dy = (Math.random()-0.5)*0.1;
    function move() {
        x += dx; y += dy;
        if(x<0 || x>90) dx*=-1; if(y<0 || y>80) dy*=-1;
        el.style.left = x + "%"; el.style.top = y + "%";
        requestAnimationFrame(move);
    }
    move();
  }

  // --- AUDIO & LOGS ---
  let audioCtx, humOsc, isPowered = false;
  function togglePower() {
    if(!audioCtx) {
        audioCtx = new AudioContext();
        humOsc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        humOsc.type = 'sawtooth'; humOsc.frequency.value = 55;
        gain.gain.value = 0.02;
        humOsc.connect(gain); gain.connect(audioCtx.destination);
        humOsc.start();
    }
    isPowered = !isPowered;
    document.getElementById('power-toggle').innerText = isPowered ? "POWER: ON" : "POWER: OFF";
    document.getElementById('power-toggle').classList.toggle('power-on');
    audioCtx.resume();
    if(!isPowered) audioCtx.suspend();
  }

  const fragments = ["SIGILLUM matched", "SIGNUM active", "Selectric link established", "Manuscripts don't burn", "CALIBRAÃ‡ÃƒO!"];
  setInterval(() => {
    const p = document.createElement('p');
    p.innerText = "> " + fragments[Math.floor(Math.random()*fragments.length)];
    document.getElementById('log-content').appendChild(p);
    document.getElementById('log-stream').scrollTop = 9999;
    if(document.getElementById('log-content').children.length > 10) document.getElementById('log-content').removeChild(document.getElementById('log-content').children[0]);
  }, 4000);

  // --- CHAT ---
  async function sendMessage() {
    const input = document.getElementById('chat-input'), container = document.getElementById('chat-container');
    const msg = input.value; if(!msg) return;
    container.innerHTML += `<div class="chat-bubble user-message">${msg}</div>`;
    input.value = '';
    const response = await fetch(`https://text.pollinations.ai/Noir writer style response to: ${msg}`);
    const data = await response.text();
    container.innerHTML += `<div class="chat-bubble bot-message">${data}</div>`;
    container.scrollTop = 9999;
    forgeSigil();
  }

  function toggleMenu() { document.getElementById('menu-overlay').classList.toggle('active'); document.getElementById('slide-menu').classList.toggle('active'); }
  
  document.getElementById('splash-screen').onclick = function() {
    this.style.display = 'none';
    drawMandala();
    spawnCards();
    forgeSigil();
  };
</script>
</body>
</html>
