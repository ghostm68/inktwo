<!DOCTYPE html>
<html lang="en" class="ðŸ‘—">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>InkRealm: Sigil v4.16</title>
  <meta property="og:url" content="https://www.wordstar.nexus/"/>
  <meta name="copyright" content="Copyright 2026 INKREALM-NEXUS. All rights reserved."/>
  
  <link rel="icon" type="image/svg+xml" href="https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/svg/inky.svg">
  <link rel="apple-touch-icon" type="image/png" href="https://github.com/ghostm68/pantheon/raw/main/inkrealm.info.2025.png" />
  <link href="https://fonts.googleapis.com/css2?family=Nova+Mono&family=Special+Elite&family=VT323&display=swap" rel="stylesheet">
  
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root { --red: #ff0000; --black: #050505; --dark-grey: #121212; --white: #d1d1d1; }
    * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }
    
    body { 
      background: var(--black); color: var(--white); font-family: 'Nova Mono', monospace; 
      margin: 0; overflow: hidden; height: 100vh; width: 100vw;
    }

    /* CRT Scanline Overlay */
    body::after {
      content: " "; display: block; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%);
      z-index: 999; background-size: 100% 3px; pointer-events: none; opacity: 0.3;
    }

    .app-grid { display: grid; grid-template-columns: 200px 1fr; grid-template-rows: 50px 1fr 350px 30px; height: 100vh; }

    header { grid-column: span 2; border-bottom: 1px solid var(--red); background: #000; z-index: 50; padding: 0 20px; display: flex; align-items: center; justify-content: space-between; }
    
    .sidebar { background: #080808; border-right: 1px solid #222; overflow-y: auto; padding: 20px; }

    /* THE VIEWPORT: CENTERPIECE */
    #viewport { 
      background: radial-gradient(circle at center, #111 0%, #000 100%); 
      position: relative; border-bottom: 1px solid var(--red); overflow: hidden; 
      display: flex; align-items: center; justify-content: center;
    }

    #sigil-canvas { 
      filter: drop-shadow(0 0 15px var(--red)); 
      cursor: crosshair; 
      max-width: 90%; max-height: 90%;
    }

    /* BOTTOM SHELF */
    .bottom-shelf { 
      grid-row: 3; grid-column: span 2; 
      display: grid; grid-template-columns: 1fr 320px 350px; 
      height: 350px; overflow: hidden; background: #000;
    }

    .editor-section { background: var(--dark-grey); display: flex; flex-direction: column; overflow: hidden; border-top: 1px solid var(--red); }
    .editor-header { background: var(--red); color: white; padding: 4px 15px; font-family: 'Special Elite', serif; font-size: 10px; display: flex; justify-content: space-between; transform: rotate(-0.5deg); box-shadow: 0 2px 10px rgba(0,0,0,0.5); }
    
    #editor { flex-grow: 1; padding: 20px; font-family: 'Special Elite', serif; font-size: 13px; line-height: 1.6; outline: none; overflow-y: auto; color: var(--white); caret-color: var(--red); background: var(--dark-grey); }

    .log-panel { background: #050505; border-left: 1px solid #222; padding: 15px; font-family: 'VT323', monospace; color: #555; overflow-y: auto; font-size: 14px; }

    .chat-section { background: #000; border-left: 1px solid var(--red); display: flex; flex-direction: column; overflow: hidden; }
    #chat-container { flex-grow: 1; overflow-y: auto; padding: 10px; font-family: 'VT323', monospace; background: #000; }
    .chat-bubble { margin-bottom: 8px; padding: 8px; border: 1px solid #222; font-size: 1.1rem; }
    .user-message { border-left: 3px solid #444; color: #888; }
    .bot-message { border-left: 3px solid var(--red); color: var(--white); background: #0a0000; }

    /* POWER & CUBES */
    .power-btn { font-size: 9px; padding: 2px 8px; border: 1px solid #333; color: #444; cursor: pointer; }
    .power-on { color: var(--red); border-color: var(--red); box-shadow: 0 0 5px var(--red); }

    footer { grid-column: span 2; background: #000; border-top: 1px solid #222; font-size: 8px; color: #444; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; height: 30px; }

    /* SCROLLBARS */
    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-thumb { background: var(--red); }

    /* MOBILE OVERRIDES */
    @media (max-width: 768px) {
      .app-grid { grid-template-columns: 1fr; grid-template-rows: 50px auto 400px auto auto 30px; height: auto; overflow-y: auto; }
      .sidebar { grid-row: 2; height: 150px; }
      #viewport { grid-row: 3; height: 400px; }
      .bottom-shelf { grid-row: 4/6; grid-template-columns: 1fr; grid-template-rows: 300px 300px 200px; height: auto; }
      footer { grid-row: 6; }
    }

    /* 3D CUBE NAVIGATION */
    .cube-menu-container { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-bottom: 30px; }
    .cube-container { width: 100px; height: 100px; perspective: 600px; }
    .cube { width: 80px; height: 80px; position: relative; transform-style: preserve-3d; transform: rotateX(-20deg) rotateY(30deg); transition: transform 0.5s; }
    .cube-container:hover .cube { transform: rotateX(-45deg) rotateY(45deg); }
    .cube-face { position: absolute; width: 80px; height: 80px; border: 1px solid #444; background: rgba(0,0,0,0.9); display: flex; align-items: center; justify-content: center; font-size: 8px; text-transform: uppercase; color: #888; text-decoration: none; }
    .cube-front { transform: translateZ(40px); color: var(--red); border-color: var(--red); }
    .cube-right { transform: rotateY(90deg) translateZ(40px); }
    .cube-top { transform: rotateX(90deg) translateZ(40px); }
    .cube-left { transform: rotateY(-90deg) translateZ(40px); }

    .menu-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; display: none; opacity: 0; transition: 0.3s; }
    .menu-overlay.active { display: block; opacity: 1; }
    .slide-menu { position: fixed; bottom: -100%; left: 0; width: 100%; height: 85%; background: #000; border-top: 2px solid var(--red); z-index: 1001; transition: bottom 0.4s; padding: 40px; overflow-y: auto; }
    .slide-menu.active { bottom: 0; }
  </style>
</head>
<body>

<div class="app-grid">
  <header>
    <div class="flex items-center gap-4">
      <div id="power-light" class="w-2 h-2 bg-zinc-900 rounded-full"></div>
      <h1 class="text-white font-bold tracking-tighter text-sm uppercase">INKREALM_OS // v4.16</h1>
      <button id="power-toggle" class="power-btn" onclick="togglePower()">POWER: OFF</button>
    </div>
    <div style="font-size:10px; color:#444" class="hidden sm:block">STABILITY: PROTECTED_BY_WITCHES</div>
    <div class="flex items-center gap-4">
        <button onclick="exportDraft()" class="text-red-700 text-[10px] font-bold">EXTRACT_DOSSIER</button>
        <button onclick="toggleMenu()" class="text-white text-[18px]">â®¸</button>
    </div>
  </header>

  <aside class="sidebar">
    <div class="text-[9px] text-zinc-600 mb-2 uppercase tracking-widest">TON_WALLET</div>
    <img id="ton-qr" src="https://raw.githubusercontent.com/ghostm68/pantheon/main/inkrealm.ton03.jpeg" style="width:60px; border:1px solid #333;" onclick="this.style.width = this.style.width === '60px' ? '200px' : '60px'">
    
    <div class="text-zinc-600 mt-6 mb-2 uppercase tracking-widest">Directives</div>
    <div class="cursor-pointer hover:text-red-600 py-1 text-[10px]" onclick="window.open('https://www.inkrealm.info')">> DOMAIN</div>
    <div class="cursor-pointer hover:text-red-600 py-1 text-[10px]" onclick="window.open('https://inkrealm.instatus.com/')">> SYSTEM_STATUS</div>
  </aside>

  <main id="viewport" onclick="forgeSigil()">
    <div class="absolute top-4 left-6 text-[10px] text-red-900 tracking-tighter uppercase italic opacity-50">>> SIGIL_FORGE_ACTIVE // CLICK_TO_MANIFEST</div>
    <canvas id="sigil-canvas" width="600" height="600"></canvas>
  </main>

  <div class="bottom-shelf">
    <section class="editor-section">
      <div class="editor-header">
          <div id="teletype">>> LATCHING_CORE...</div>
          <div id="word-count">0W</div>
      </div>
      <div id="editor" contenteditable="true" spellcheck="false"></div>
    </section>

    <div class="log-panel" id="log-stream">
        <div style="color:var(--red); border-bottom:1px solid #222; margin-bottom:10px; font-size:10px">// SYSTEM_LOG</div>
        <div id="log-content"></div>
    </div>

    <section class="chat-section">
      <div class="bg-zinc-900 p-2 text-[9px] uppercase flex justify-between border-b border-red-900">
          <span>Informant_Link</span>
          <span id="witch-status" class="text-red-700 italic">Protected</span>
      </div>
      <div id="chat-container"></div>
      <div class="chat-input-area">
        <input type="text" id="chat-input" placeholder="Type query..." onkeypress="if(event.key==='Enter') sendMessage()">
      </div>
    </section>
  </div>

  <footer>
    <div>SYSTEM: SHADOW_STABLE // SIGIL_FORGE_v4.16</div>
    <div class="flex gap-4 uppercase italic"><span>InkRealm Construct</span><span>|</span><span id="footer-status">WITCH_PROTOCOL_ACTIVE</span></div>
  </footer>
</div>

<!-- SLIDE MENU -->
<div class="menu-overlay" id="menu-overlay" onclick="toggleMenu()"></div>
<div class="slide-menu" id="slide-menu">
    <h2 style="color:var(--red); font-family:'Special Elite'; font-size:2rem; margin-bottom:20px">NEXUS_NAVIGATION</h2>
    
    <div class="cube-menu-container">
        <!-- Cube: Core -->
        <div class="cube-container">
            <div class="cube">
                <a href="https://wordstar.nexus/conceptweave" class="cube-face cube-front">Concept</a>
                <a href="https://wordstar.nexus/typecast" class="cube-face cube-right">Typecast</a>
                <a href="https://wordstar.nexus/citadelle" class="cube-face cube-top">Citadel</a>
                <a href="https://wordstar.nexus/typespace" class="cube-face cube-left">Space</a>
            </div>
        </div>
        <!-- Cube: Apps -->
        <div class="cube-container">
            <div class="cube">
                <a href="https://wordstar.nexus/ai" class="cube-face cube-front">AI</a>
                <a href="https://wordstar.nexus/38" class="cube-face cube-right">38</a>
                <a href="https://wordstar.nexus/netherlands" class="cube-face cube-left">Nether</a>
                <a href="https://wordstar.nexus/wip" class="cube-face cube-top">WIP</a>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-2 gap-8 border-t border-zinc-800 pt-8">
        <div>
            <h3 class="text-zinc-600 text-[10px] uppercase mb-4 tracking-widest">Main_Nodes</h3>
            <a href="https://www.inkrealm.info" class="block py-2 border-b border-zinc-900 hover:text-red-600 text-sm">INKREALM.INFO</a>
            <a href="https://inkrealm.instatus.com/" class="block py-2 border-b border-zinc-900 hover:text-red-600 text-sm">SYSTEM_STATUS</a>
        </div>
        <div>
            <h3 class="text-zinc-600 text-[10px] uppercase mb-4 tracking-widest">Emergency</h3>
            <a href="tel:+16468019713" class="block py-2 border-b border-zinc-900 hover:text-red-600 text-sm">PHONE_CONTACT</a>
        </div>
    </div>
</div>

<script>
    // --- SIGIL ENGINE ---
    const canvas = document.getElementById('sigil-canvas');
    const ctx = canvas.getContext('2d');

    function forgeSigil() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const numPoints = 6 + Math.floor(Math.random() * 6);
        const radius = 180;
        const points = [];
        
        for (let i = 0; i < numPoints; i++) {
            const angle = (i / numPoints) * Math.PI * 2;
            points.push({ x: centerX + radius * Math.cos(angle), y: centerY + radius * Math.sin(angle) });
        }
        
        ctx.strokeStyle = Math.random() > 0.3 ? "#ff0000" : "#ffffff";
        ctx.lineCap = 'round'; ctx.lineJoin = 'round';
        
        for (let i = 0; i < 5; i++) {
            ctx.lineWidth = 1 + Math.random() * 3;
            ctx.beginPath();
            let start = Math.floor(Math.random() * numPoints);
            let end = Math.floor(Math.random() * numPoints);
            ctx.moveTo(points[start].x, points[start].y);
            let cpX = centerX + (Math.random() - 0.5) * 100;
            let cpY = centerY + (Math.random() - 0.5) * 100;
            ctx.quadraticCurveTo(cpX, cpY, points[end].x, points[end].y);
            ctx.stroke();
            
            // Accents
            ctx.beginPath();
            ctx.arc(points[start].x, points[start].y, 3 + Math.random() * 5, 0, Math.PI * 2);
            if(Math.random() > 0.5) ctx.fill(); else ctx.stroke();
        }
    }

    // --- TELETYPE ---
    const statusMessages = [">> 2741_LINK_STABLE", ">> SIGNUM_PROTOCOL_ACTIVE", ">> SIGIL_MANIFESTING", ">> NOIR_CORE_v4.16"];
    let messageIndex = 0, charIndex = 0, isDeleting = false;

    function typeStatus() {
        const target = document.getElementById('teletype');
        const currentMsg = statusMessages[messageIndex];
        target.innerText = isDeleting ? currentMsg.substring(0, charIndex - 1) : currentMsg.substring(0, charIndex + 1);
        charIndex = isDeleting ? charIndex - 1 : charIndex + 1;
        let speed = isDeleting ? 40 : 80;
        if (!isDeleting && charIndex === currentMsg.length) { speed = 3000; isDeleting = true; }
        else if (isDeleting && charIndex === 3) { isDeleting = false; messageIndex = (messageIndex + 1) % statusMessages.length; speed = 500; }
        setTimeout(typeStatus, speed);
    }

    // --- AUDIO & POWER ---
    let audioCtx, humOsc, gainNode, filter, isPowered = false;
    function initAudio() {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        humOsc = audioCtx.createOscillator(); gainNode = audioCtx.createGain(); filter = audioCtx.createBiquadFilter();
        humOsc.type = 'sawtooth'; humOsc.frequency.setValueAtTime(55, audioCtx.currentTime);
        filter.type = 'lowpass'; filter.frequency.setValueAtTime(120, audioCtx.currentTime);
        gainNode.gain.setValueAtTime(0, audioCtx.currentTime);
        humOsc.connect(filter); filter.connect(gainNode); gainNode.connect(audioCtx.destination); humOsc.start();
    }

    function togglePower() {
        if (!audioCtx) initAudio();
        const btn = document.getElementById('power-toggle'), light = document.getElementById('power-light');
        if (!isPowered) {
            isPowered = true; btn.innerText = "POWER: ON"; btn.classList.add('power-on'); light.classList.add('bg-red-600', 'animate-pulse');
            gainNode.gain.setTargetAtTime(0.04, audioCtx.currentTime, 0.5);
        } else {
            isPowered = false; btn.innerText = "POWER: OFF"; btn.classList.remove('power-on'); light.classList.remove('bg-red-600', 'animate-pulse');
            gainNode.gain.setTargetAtTime(0, audioCtx.currentTime, 0.2);
        }
    }

    // --- LOGS ---
    const logFragments = ["SIGILLUM authenticated", "SIGNUM protocol active", "Typography aligned", "Rest is productive", "Path illuminated", "Witch-glass calibrated"];
    function updateLogs() {
        const content = document.getElementById('log-content');
        const p = document.createElement('p');
        p.textContent = "> " + logFragments[Math.floor(Math.random() * logFragments.length)];
        content.appendChild(p);
        document.getElementById('log-stream').scrollTop = document.getElementById('log-stream').scrollHeight;
        if (content.children.length > 15) content.removeChild(content.children[0]);
    }

    // --- CHAT ---
    async function sendMessage() {
        const input = document.getElementById('chat-input'), container = document.getElementById('chat-container');
        const msg = input.value.trim(); if (!msg) return;
        container.innerHTML += `<div class="chat-bubble user-message">${msg}</div>`; input.value = '';
        const b = document.createElement('div'); b.className = 'chat-bubble bot-message'; b.textContent = '...';
        container.appendChild(b); container.scrollTop = container.scrollHeight;
        try {
            const resp = await fetch(`https://text.pollinations.ai/In a short noir/witch style, answer: ${encodeURIComponent(msg)}`);
            const data = await resp.text(); b.textContent = data.trim(); forgeSigil();
        } catch (e) { b.textContent = "Interference detected."; }
    }

    // --- UTILS ---
    function toggleMenu() { document.getElementById('menu-overlay').classList.toggle('active'); document.getElementById('slide-menu').classList.toggle('active'); }
    function saveAll() { localStorage.setItem('sigil_v416_save', document.getElementById('editor').innerHTML); document.getElementById('word-count').innerText = document.getElementById('editor').innerText.trim().split(/\s+/).length + "W"; }
    function loadAll() {
        const saved = localStorage.getItem('sigil_v416_save');
        if(saved && saved.length > 50) document.getElementById('editor').innerHTML = saved;
        else document.getElementById('editor').innerHTML = "_PROTOCOL:<br>i. POWER ON.<br>ii. CLICK forge to manifest.<br>iii. EXPORT dossier.<br><br>------------------<br><br>The detective's cigarette was working harder than his liver, and the neon rain was turning the sidewalk into a smear of spilled ink...";
        saveAll();
    }
    function exportDraft() { const blob = new Blob([document.getElementById('editor').innerText], {type: 'text/plain'}); const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'sigil-dossier.txt'; a.click(); }
    function animateWitch() {
        const status = document.getElementById('witch-status'), footer = document.getElementById('footer-status');
        const texts = ['Protected', 'Scanning', 'Warding', 'Secure', 'Charged'];
        let idx = 0; setInterval(() => { status.textContent = texts[idx]; footer.textContent = `WITCH_PROTOCOL_${texts[idx].toUpperCase()}`; idx = (idx + 1) % texts.length; }, 3000);
    }

    document.getElementById('editor').addEventListener('input', saveAll);
    window.onload = () => { loadAll(); typeStatus(); animateWitch(); forgeSigil(); setInterval(updateLogs, 4000); };
</script>
</body>
</html>
