<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Book Cover Creator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <style>
        body {
            background-color: #1e293b;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        // Wait for everything to load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded');
            console.log('React exists:', typeof React !== 'undefined');
            console.log('ReactDOM exists:', typeof ReactDOM !== 'undefined');

            const { useState } = React;
            
            const Sparkles = ({ className }) => React.createElement('span', { 
                className: `inline-block align-middle ${className}`, 
                style: { fontSize: '1.5rem' }
            }, '✨');

            function BookCoverGenerator() {
                const [formData, setFormData] = useState({
                    title: '', author: '', genre: 'thriller', mood: 'dark', 
                    style: 'photorealistic', colorScheme: 'noir', elements: ''
                });
                const [generatedPrompt, setGeneratedPrompt] = useState('');
                const [isGenerating, setIsGenerating] = useState(false);

                const genres = ['thriller', 'mystery', 'romance', 'sci-fi', 'fantasy', 'horror', 'literary', 'memoir', 'historical', 'contemporary'];
                const moods = ['dark', 'atmospheric', 'bright', 'hopeful', 'mysterious', 'melancholic', 'energetic', 'contemplative', 'suspenseful', 'whimsical'];
                const styles = ['photorealistic', 'illustrated', 'minimalist', 'vintage', 'abstract', 'collage', 'painted', 'digital art', 'noir', 'surreal'];
                const colorSchemes = ['noir', 'vibrant', 'muted', 'earth tones', 'pastels', 'monochrome', 'neon', 'jewel tones', 'warm', 'cool'];

                const handleInputChange = (e) => {
                    const { name, value } = e.target;
                    setFormData(prev => ({ ...prev, [name]: value }));
                };

                const generatePrompt = () => {
                    setIsGenerating(true);
                    const prompt = `Professional book cover design for ${formData.genre}:

Title: "${formData.title || '[Your Title]'}" in bold, elegant typography
Author: "${formData.author || '[Author Name]'}"

Style: ${formData.style}
Mood: ${formData.mood} and atmospheric
Color palette: ${formData.colorScheme}
${formData.elements ? `Key visual elements: ${formData.elements}` : ''}

Composition rules:
- Rule of thirds layout
- Clear space for title at top third
- Author name at bottom
- High contrast for readability
- Market-ready, professional quality
- Trending contemporary book design aesthetic
- No text rendering (text will be added separately)
- Clean margins and bleed areas

Technical specs:
--ar 2:3 (portrait book cover ratio)
--style raw
--quality 2

Additional context: Evoke the feeling of browsing a bookstore and this cover makes you stop and pick it up. It should feel premium, intriguing, and genre-appropriate while standing out from competitors.`;

                    setGeneratedPrompt(prompt);
                    setTimeout(() => setIsGenerating(false), 500);
                };

                const copyToClipboard = () => {
                    navigator.clipboard.writeText(generatedPrompt);
                    alert('Prompt copied to clipboard!');
                };

                const reset = () => {
                    setFormData({ title: '', author: '', genre: 'thriller', mood: 'dark', style: 'photorealistic', colorScheme: 'noir', elements: '' });
                    setGeneratedPrompt('');
                };

                return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4 md:p-8' },
                    React.createElement('div', { className: 'max-w-6xl mx-auto' },
                        React.createElement('div', { className: 'text-center mb-8' },
                            React.createElement('div', { className: 'flex items-center justify-center gap-2 mb-3' },
                                React.createElement(Sparkles, { className: 'w-8 h-8 text-amber-400' }),
                                React.createElement('h1', { className: 'text-4xl md:text-5xl font-bold text-white' }, 'Book Cover Generator')
                            ),
                            React.createElement('p', { className: 'text-slate-300 text-lg' }, 'Generate prompts for book covers')
                        ),

                        React.createElement('div', { className: 'grid md:grid-cols-2 gap-6' },
                            React.createElement('div', { className: 'bg-slate-800 border border-slate-700 rounded-lg p-6 shadow-xl' },
                                React.createElement('h2', { className: 'text-2xl font-semibold text-white mb-6' }, 'Book Details'),
                                React.createElement('div', { className: 'space-y-4' },
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-slate-300 mb-2 font-medium' }, 'Book Title'),
                                        React.createElement('input', {
                                            type: 'text', name: 'title', value: formData.title, onChange: handleInputChange,
                                            placeholder: 'Enter your book title',
                                            className: 'w-full px-4 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500'
                                        })
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-slate-300 mb-2 font-medium' }, 'Genre'),
                                        React.createElement('select', {
                                            name: 'genre', value: formData.genre, onChange: handleInputChange,
                                            className: 'w-full px-4 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500'
                                        }, genres.map(g => React.createElement('option', { key: g, value: g }, g.charAt(0).toUpperCase() + g.slice(1))))
                                    ),
                                    React.createElement('div', { className: 'flex gap-3 pt-4' },
                                        React.createElement('button', {
                                            onClick: generatePrompt, disabled: isGenerating,
                                            className: 'flex-1 bg-amber-500 hover:bg-amber-600 disabled:opacity-50 text-slate-900 font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2'
                                        }, React.createElement(Sparkles, { className: 'w-5 h-5' }), isGenerating ? 'Generating...' : 'Generate Prompt'),
                                        React.createElement('button', {
                                            onClick: reset, className: 'bg-slate-700 hover:bg-slate-600 text-white py-3 px-4 rounded-lg transition-colors',
                                            title: 'Reset form'
                                        }, 'Reset')
                                    )
                                )
                            ),
                            
                            React.createElement('div', { className: 'bg-slate-800 border border-slate-700 rounded-lg p-6 shadow-xl' },
                                React.createElement('h2', { className: 'text-2xl font-semibold text-white mb-6' }, 'Generated Prompt'),
                                generatedPrompt ? 
                                    React.createElement('div', { className: 'space-y-4' },
                                        React.createElement('div', { className: 'bg-slate-900 border border-slate-600 rounded-lg p-4 max-h-[500px] overflow-y-auto' },
                                            React.createElement('pre', { className: 'text-slate-300 text-sm whitespace-pre-wrap font-mono' }, generatedPrompt)
                                        ),
                                        React.createElement('button', {
                                            onClick: copyToClipboard,
                                            className: 'w-full bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors'
                                        }, 'Copy Prompt')
                                    ) :
                                    React.createElement('div', { className: 'h-full flex items-center justify-center text-slate-500 text-center' },
                                        React.createElement('p', null, 'Fill in the form and generate a prompt')
                                    )
                            )
                        )
                    )
                );
            }

            console.log('Attempting to mount component...');
            try {
                const rootElement = document.getElementById('root');
                if (!rootElement) {
                    throw new Error('Root element not found');
                }
                
                const root = ReactDOM.createRoot(rootElement);
                root.render(React.createElement(BookCoverGenerator));
                console.log('✅ Component mounted successfully');
            } catch (error) {
                console.error('❌ Failed to mount React:', error);
                document.getElementById('root').innerHTML = `
                    <div style="color: red; padding: 20px; background: white;">
                        <h1>Mounting Error</h1>
                        <p>${error.message}</p>
                        <p>Check console for details</p>
                    </div>
                `;
            }
        });
    </script>
</body>
</html>
