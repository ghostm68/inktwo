<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Book Cover Creator</title>

    <script src="https://cdn.tailwindcss.com"></script> 
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    
    <style>
        body {
            background-color: #1e293b; 
        }
    </style>
</head>
<body>
    <div id="root"></div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const { useState } = React;
        
        const Sparkles = ({ className }) => React.createElement('span', { 
            className: `inline-block align-middle ${className}`, 
            style: { fontSize: '1.5rem' }
        }, 'âœ¨');
        
        const Download = ({ className }) => React.createElement('span', { 
            className: `inline-block align-middle ${className}`, 
            style: { fontSize: '1rem' }
        }, 'â¬‡ï¸');
        
        const RefreshCw = ({ className }) => React.createElement('span', { 
            className: `inline-block align-middle ${className}`, 
            style: { fontSize: '1rem' }
        }, 'ðŸ”„');

        function BookCoverGenerator() {
            const [formData, setFormData] = useState({
                title: '', author: '', genre: 'thriller', mood: 'dark', 
                style: 'photorealistic', colorScheme: 'noir', elements: ''
            });
            const [apiKey, setApiKey] = useState('');
            const [password, setPassword] = useState('');
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [generatedPrompt, setGeneratedPrompt] = useState('');
            const [imageUrl, setImageUrl] = useState('');
            const [isGenerating, setIsGenerating] = useState(false);
            const [error, setError] = useState('');
            const [message, setMessage] = useState('');

            // âœ… FIXED: No trailing spaces
            const correctPassword = "ParisTexas66KingSWUnitATorontoONM5V1K3";

            const genres = ['thriller', 'mystery', 'romance', 'sci-fi', 'fantasy', 'horror', 'literary', 'memoir', 'historical', 'contemporary'];
            const moods = ['dark', 'atmospheric', 'bright', 'hopeful', 'mysterious', 'melancholic', 'energetic', 'contemplative', 'suspenseful', 'whimsical'];
            const styles = ['photorealistic', 'illustrated', 'minimalist', 'vintage', 'abstract', 'collage', 'painted', 'digital art', 'noir', 'surreal'];
            const colorSchemes = ['noir', 'vibrant', 'muted', 'earth tones', 'pastels', 'monochrome', 'neon', 'jewel tones', 'warm', 'cool'];

            // âœ… FIXED: Trim password to prevent copy-paste errors
            const handlePasswordCheck = (e) => {
                e.preventDefault();
                if (password.trim() === correctPassword.trim()) {
                    setIsAuthenticated(true);
                    setError('');
                } else {
                    setError(`Incorrect password. You entered "${password}" (${password.length} chars). Expected length: ${correctPassword.length} chars. Check for extra spaces.`);
                }
            };

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({ ...prev, [name]: value }));
            };

            // âœ… FIXED: Clean URL with no trailing space
            const generateImage = async (prompt) => {
                setIsGenerating(true);
                setError('');
                setMessage('');
                
                try {
                    const response = await fetch('https://ai.api.nvidia.com/v1/genai/stabilityai/stable-diffusion-3-medium', {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${apiKey}`,
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify({
                            prompt: prompt,
                            cfg_scale: 5,
                            aspect_ratio: "2:3",
                            seed: 0,
                            steps: 30,
                            negative_prompt: "text, words, letters, watermark, signature, blurry, low quality"
                        }),
                    });

                    if (!response.ok) {
                        const errorText = await response.text();
                        throw new Error(`API error: ${response.status} - ${errorText}`);
                    }

                    const responseData = await response.json();
                    
                    if (responseData.image) {
                        const imageDataUrl = `data:image/png;base64,${responseData.image}`;
                        setImageUrl(imageDataUrl);
                        setMessage('âœ… Image generated successfully!');
                    } else {
                        throw new Error('No image in response');
                    }
                } catch (err) {
                    setError(`Image generation failed: ${err.message}`);
                    console.error('Error:', err);
                } finally {
                    setIsGenerating(false);
                }
            };

            const generatePrompt = () => {
                const prompt = `Professional book cover design for ${formData.genre}:

Title: "${formData.title || '[Your Title]'}" in bold, elegant typography
Author: "${formData.author || '[Author Name]'}"

Style: ${formData.style}
Mood: ${formData.mood} and atmospheric
Color palette: ${formData.colorScheme}
${formData.elements ? `Key visual elements: ${formData.elements}` : ''}

Composition rules:
- Rule of thirds layout
- Clear space for title at top third
- Author name at bottom
- High contrast for readability
- Market-ready, professional quality
- Trending contemporary book design aesthetic
- No text rendering (text will be added separately)
- Clean margins and bleed areas

Technical specs:
--ar 2:3 (portrait book cover ratio)
--style raw
--quality 2

Additional context: Evoke the feeling of browsing a bookstore and this cover makes you stop and pick it up. It should feel premium, intriguing, and genre-appropriate while standing out from competitors.`;

                setGeneratedPrompt(prompt);
                setMessage('âœ… Prompt generated!' + (apiKey ? ' Image is generating...' : ' Add API key below to generate images.'));
                
                // Auto-generate image if API key is present
                if (apiKey) {
                    generateImage(prompt);
                }
            };

            const copyToClipboard = () => {
                navigator.clipboard.writeText(generatedPrompt);
                alert('Prompt copied to clipboard!');
            };

            const downloadImage = () => {
                if (!imageUrl) return;
                const a = document.createElement('a');
                a.href = imageUrl;
                a.download = `book-cover-${formData.title || 'untitled'}.png`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            };

            const reset = () => {
                setFormData({ title: '', author: '', genre: 'thriller', mood: 'dark', style: 'photorealistic', colorScheme: 'noir', elements: '' });
                setGeneratedPrompt('');
                setImageUrl('');
                setError('');
                setMessage('');
            };

            return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4 md:p-8' },
                React.createElement('div', { className: 'max-w-6xl mx-auto' },
                    React.createElement('div', { className: 'text-center mb-8' },
                        React.createElement('div', { className: 'flex items-center justify-center gap-2 mb-3' },
                            React.createElement(Sparkles, { className: 'w-8 h-8 text-amber-400' }),
                            React.createElement('h1', { className: 'text-4xl md:text-5xl font-bold text-white' }, 'Book Cover Generator')
                        ),
                        React.createElement('p', { className: 'text-slate-300 text-lg' }, 'Generate professional AI prompts AND images for stunning book covers'),
                        React.createElement('p', { className: 'text-slate-400 text-sm mt-2' }, 'Powered by NVIDIA Stable Diffusion 3 - BYOK (Bring Your Own Key)')
                    ),

                    !isAuthenticated && React.createElement('div', { className: 'bg-amber-900 border border-amber-700 rounded-lg p-6 mb-6 shadow-xl' },
                        React.createElement('h2', { className: 'text-2xl font-semibold text-amber-200 mb-4' }, 'ðŸ” Access Control'),
                        React.createElement('p', { className: 'text-amber-300 mb-4' }, 'Enter password to unlock. Get your free NVIDIA key at build.nvidia.com for image generation.'),
                        React.createElement('div', { className: 'flex gap-3' },
                            React.createElement('input', {
                                type: 'password',
                                placeholder: 'Enter password',
                                value: password,
                                onChange: (e) => setPassword(e.target.value),
                                className: 'flex-1 px-4 py-2 bg-slate-900 border border-amber-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500'
                            }),
                            React.createElement('button', {
                                onClick: handlePasswordCheck,
                                className: 'bg-amber-500 hover:bg-amber-600 text-slate-900 font-semibold py-3 px-6 rounded-lg transition-colors'
                            }, 'Unlock')
                        ),
                        error && React.createElement('div', { className: 'mt-4 bg-red-900 border border-red-700 rounded-lg p-3' },
                            React.createElement('p', { className: 'text-red-200 text-sm' }, error)
                        )
                    ),

                    isAuthenticated && React.createElement('div', { className: 'space-y-6' },
                        React.createElement('div', { className: 'bg-slate-800 border border-slate-700 rounded-lg p-6 shadow-xl' },
                            React.createElement('h2', { className: 'text-2xl font-semibold text-white mb-4' }, 'ðŸ—ï¸ NVIDIA API Key (Optional for Images)'),
                            React.createElement('p', { className: 'text-slate-400 text-sm mb-4' }, 
                                'Add your key to generate images. Skip this to use prompt-only mode. Get a free trial key at ', 
                                React.createElement('a', { 
                                    href: 'https://build.nvidia.com/explore/generative-models', 
                                    target: '_blank', 
                                    className: 'text-amber-400 hover:text-amber-300 underline' 
                                }, 'build.nvidia.com')
                            ),
                            React.createElement('input', {
                                type: 'password',
                                placeholder: 'Your API key (nvapi-...)',
                                value: apiKey,
                                onChange: (e) => setApiKey(e.target.value),
                                className: 'w-full px-4 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500'
                            })
                        ),

                        React.createElement('div', { className: 'grid md:grid-cols-2 gap-6' },
                            React.createElement('div', { className: 'bg-slate-800 border border-slate-700 rounded-lg p-6 shadow-xl' },
                                React.createElement('h2', { className: 'text-2xl font-semibold text-white mb-6' }, 'Book Details'),
                                React.createElement('div', { className: 'space-y-4' },
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-slate-300 mb-2 font-medium' }, 'Book Title'),
                                        React.createElement('input', {
                                            type: 'text', name: 'title', value: formData.title, onChange: handleInputChange,
                                            placeholder: 'Enter your book title',
                                            className: 'w-full px-4 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500'
                                        })
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-slate-300 mb-2 font-medium' }, 'Author Name'),
                                        React.createElement('input', {
                                            type: 'text', name: 'author', value: formData.author, onChange: handleInputChange,
                                            placeholder: 'Author name',
                                            className: 'w-full px-4 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500'
                                        })
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-slate-300 mb-2 font-medium' }, 'Genre'),
                                        React.createElement('select', {
                                            name: 'genre', value: formData.genre, onChange: handleInputChange,
                                            className: 'w-full px-4 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500'
                                        }, genres.map(g => React.createElement('option', { key: g, value: g }, g.charAt(0).toUpperCase() + g.slice(1))))
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-slate-300 mb-2 font-medium' }, 'Mood'),
                                        React.createElement('select', {
                                            name: 'mood', value: formData.mood, onChange: handleInputChange,
                                            className: 'w-full px-4 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500'
                                        }, moods.map(m => React.createElement('option', { key: m, value: m }, m.charAt(0).toUpperCase() + m.slice(1))))
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-slate-300 mb-2 font-medium' }, 'Visual Style'),
                                        React.createElement('select', {
                                            name: 'style', value: formData.style, onChange: handleInputChange,
                                            className: 'w-full px-4 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500'
                                        }, styles.map(s => React.createElement('option', { key: s, value: s }, s.charAt(0).toUpperCase() + s.slice(1))))
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-slate-300 mb-2 font-medium' }, 'Color Scheme'),
                                        React.createElement('select', {
                                            name: 'colorScheme', value: formData.colorScheme, onChange: handleInputChange,
                                            className: 'w-full px-4 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500'
                                        }, colorSchemes.map(c => React.createElement('option', { key: c, value: c }, c.charAt(0).toUpperCase() + c.slice(1))))
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-slate-300 mb-2 font-medium' }, 'Key Visual Elements (optional)'),
                                        React.createElement('input', {
                                            type: 'text', name: 'elements', value: formData.elements, onChange: handleInputChange,
                                            placeholder: 'e.g., silhouette, cityscape, blood spatter',
                                            className: 'w-full px-4 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500'
                                        }),
                                        React.createElement('p', { className: 'text-slate-500 text-xs mt-1' }, 'Separate multiple elements with commas')
                                    ),
                                    React.createElement('div', { className: 'flex gap-3 pt-4' },
                                        React.createElement('button', {
                                            onClick: generatePrompt, disabled: isGenerating,
                                            className: 'flex-1 bg-amber-500 hover:bg-amber-600 disabled:opacity-50 text-slate-900 font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2'
                                        }, React.createElement(Sparkles, { className: 'w-5 h-5' }), isGenerating ? 'Generating...' : 'Generate Prompt' + (apiKey ? ' & Image' : '')),
                                        React.createElement('button', {
                                            onClick: reset, className: 'bg-slate-700 hover:bg-slate-600 text-white py-3 px-4 rounded-lg transition-colors',
                                            title: 'Reset form'
                                        }, React.createElement(RefreshCw, { className: 'w-5 h-5' }))
                                    )
                                )
                            ),
                            
                            React.createElement('div', { className: 'bg-slate-800 border border-slate-700 rounded-lg p-6 shadow-xl' },
                                React.createElement('h2', { className: 'text-2xl font-semibold text-white mb-6' }, 'Generated Result'),
                                
                                message && React.createElement('div', { className: 'bg-emerald-900 border border-emerald-700 rounded-lg p-3 mb-4' },
                                    React.createElement('p', { className: 'text-emerald-200 text-sm' }, message)
                                ),
                                
                                error && React.createElement('div', { className: 'bg-red-900 border border-red-700 rounded-lg p-3 mb-4' },
                                    React.createElement('p', { className: 'text-red-200 text-sm' }, error)
                                ),
                                
                                isGenerating && React.createElement('div', { className: 'text-center py-8' },
                                    React.createElement('div', { className: 'inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-400 mb-3' }),
                                    React.createElement('p', { className: 'text-slate-300' }, 'Generating your book cover...')
                                ),
                                
                                imageUrl && React.createElement('div', { className: 'mb-4' },
                                    React.createElement('img', { 
                                        src: imageUrl, 
                                        alt: 'Generated book cover',
                                        className: 'w-full rounded-lg shadow-lg border border-slate-600'
                                    }),
                                    React.createElement('p', { className: 'text-slate-400 text-xs mt-2' }, 
                                        'Add your title/author text using Photoshop, Canva, or BookBrush'
                                    )
                                ),
                                
                                generatedPrompt && React.createElement('div', { className: 'space-y-4' },
                                    React.createElement('div', { className: 'bg-slate-900 border border-slate-600 rounded-lg p-4 max-h-[300px] overflow-y-auto' },
                                        React.createElement('pre', { className: 'text-slate-300 text-sm whitespace-pre-wrap font-mono' }, generatedPrompt)
                                    ),
                                    
                                    React.createElement('div', { className: 'flex gap-3' },
                                        React.createElement('button', {
                                            onClick: copyToClipboard,
                                            className: 'flex-1 bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2'
                                        }, React.createElement(Download, { className: 'w-5 h-5' }), 'Copy Prompt'),
                                        
                                        imageUrl && React.createElement('button', {
                                            onClick: downloadImage,
                                            className: 'flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2'
                                        }, React.createElement(Download, { className: 'w-5 h-5' }), 'Download Image')
                                    ),
                                    
                                    React.createElement('div', { className: 'bg-slate-900 border border-slate-700 rounded-lg p-4' },
                                        React.createElement('h3', { className: 'text-white font-semibold mb-2' }, 'How to Use This Prompt:'),
                                        React.createElement('ol', { className: 'text-slate-300 text-sm space-y-1 list-decimal list-inside' },
                                            React.createElement('li', null, 'Copy the generated prompt above'),
                                            React.createElement('li', null, 'Paste into Midjourney, DALL-E, Stable Diffusion, or FLUX'),
                                            React.createElement('li', null, 'Generate multiple variations'),
                                            React.createElement('li', null, 'Download and add text overlays in Photoshop/Canva')
                                        )
                                    )
                                ),
                                
                                !generatedPrompt && !isGenerating && React.createElement('div', { className: 'h-full flex items-center justify-center text-slate-500 text-center' },
                                    React.createElement('div', null,
                                        React.createElement(Sparkles, { className: 'w-16 h-16 mx-auto mb-4 opacity-50' }),
                                        React.createElement('p', null, 'Fill in the form and click Generate Prompt' + (apiKey ? ' & Image' : ''))
                                    )
                                )
                            )
                        )
                    ),
                    
                    isAuthenticated && React.createElement('div', { className: 'mt-8 text-center text-slate-500 text-sm' },
                        React.createElement('p', null, 'Part of the inkrealm.info writing tools suite'),
                        React.createElement('p', { className: 'mt-1' }, 'Prompts work everywhere â€¢ Images need NVIDIA API key')
                    )
                )
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(BookCoverGenerator));
    });
</script>
</body>
</html>
</html>
