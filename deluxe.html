<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="DELUXE Edition. A full-featured word processor with AI image generation, 29 retro computing fonts, and quantum aesthetic. Soviet Program meets modern AI in a brutalist interface.">
<meta name="keywords" content="word processor, AI image generation, text-to-image, Puter.js, retro fonts, IBM fonts, Soviet Program, Olivetti typewriter, brutalist design, text editor, PDF export, contenteditable, INK REALM">

<!-- OPEN GRAPH / FACEBOOK / DISCORD -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://inkrealm.info/deluxe"> 
<meta property="og:title" content="INK REALM DELUXE | Retro Word Processor">
<meta property="og:description" content="Full-featured word processor with AI image generation. 29 retro fonts. Brutalist aesthetic. Export to PDF/TXT.">
<meta property="og:image" content="https://github.com/ghostm68/pantheon/raw/main/deluxe12.gif">
<meta property="og:site_name" content="INKREALM-NEXUS">

<!-- TWITTER / X -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@inkrealm">
<meta name="twitter:creator" content="@inkrealm">
<meta name="twitter:title" content="INK REALM DELUXE">
<meta name="twitter:description" content="Retro word processor with AI image generation. Soviet Program aesthetic.">
<meta name="twitter:image" content="https://github.com/ghostm68/pantheon/raw/main/deluxe12.gif">

<!-- MOBILE APP STYLING -->
<meta name="theme-color" content="#1a1a1a">
<meta name="msapplication-navbutton-color" content="#1a1a1a">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-capable" content="yes">

<meta name="copyright" content="Copyright 2026 INKREALM-NEXUS. All rights reserved."/>
<meta property="telegram:channel" content="@inkrealm">
<meta property="vk:image" content="https://vk.com/authorwave?z=photo707345788_457239017%2Falbum707345788_0">

<!--ink realm deluxe word processor
-Created by www.inkrealm.info
(inspired by love and the spirit of innovation)
ja: "ç§ã®å€‹äººæƒ…å ±ã‚’è²©å£²ã—ãªã„(ã‚«ãƒªãƒ•ã‚©ãƒ«ãƒ‹ã‚¢å·žæ¶ˆè²»è€…ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼æ³•)",
Ð§Ð°ÑÑ‚Ð½Ð°Ñ Ð»Ð¸Ñ‡Ð½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ, InformaÃ§Ãµes pessoais privadas, 
PersÃ³nulegar upplÃ½singar, 
Private personal information, áž–áŸážáŸŒáž˜áž¶áž“áž•áŸ’áž‘áž¶áž›áŸ‹ážáŸ’áž›áž½áž“áž¯áž€áž‡áž“
(Verbraucherschutzgesetz der PrÃ¤fektur Kalifornien)
en: "Do Not Sell My Info (KKKalifornia)"--->

<!-- â‚  Â£  â‚¿ Â£ 0 âˆ†å…ƒ âˆ†ï¿¦ âˆ† ðŸ‚¶ï¿¥  Â£ ðŸ‚¶ï¿¥
Â£ áž¯    0å…ƒ âˆ†ï¿¦ âˆ† Â¢á¶„á¶„ â‚ âŽˆ â‘± â™˜ð…™ â‚ª Ñ 
â™¢ for investment advice : âš¡
+â€¢1=9=1â€¢7=3â€¢1=0â€¢0=1â€¢1â€¢6â€¢ --->

<link rel="apple-touch-icon" type="image/png" href="https://github.com/ghostm68/pantheon/raw/main/inkrealm.info.2025.png" />
<link rel="shortcut icon" href="./Images//favicon.ico" />

<title>INK REALM DELUXE | Word Processor with AI</title>

<!-- Puter.js for AI functionality -->
<script src="https://js.puter.com/v2/"></script>

<!-- Material Symbols -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<title>INK REALM - Word Processor</title>

<!-- Puter.js for AI functionality -->
<script src="https://js.puter.com/v2/"></script>

<!-- Material Symbols -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
/* Font faces */
@font-face {
  font-family: 'Ac437 Mindset-2y';
  src: url('soviet-program/Ac437_Mindset-2y.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 EuroPC CGA-2y';
  src: url('soviet-program/Ac437_EuroPC_CGA-2y.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 EuroPC CGA';
  src: url('soviet-program/Ac437_EuroPC_CGA.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 EuroPC Mono';
  src: url('soviet-program/Ac437_EuroPC_Mono.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 EverexME 5x8';
  src: url('soviet-program/Ac437_EverexME_5x8.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 EverexME 7x8';
  src: url('soviet-program/Ac437_EverexME_7x8.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 HP 150';
  src: url('soviet-program/Ac437_HP_150_re.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM 3270pc';
  src: url('soviet-program/Ac437_IBM_3270pc.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM BIOS-2x';
  src: url('soviet-program/Ac437_IBM_BIOS-2x.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM BIOS-2y';
  src: url('soviet-program/Ac437_IBM_BIOS-2y.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM BIOS';
  src: url('soviet-program/Ac437_IBM_BIOS.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM CGA-2y';
  src: url('soviet-program/Ac437_IBM_CGA-2y.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM CGA';
  src: url('soviet-program/Ac437_IBM_CGA.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM CGAthin-2y';
  src: url('soviet-program/Ac437_IBM_CGAthin-2y.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM CGAthin';
  src: url('soviet-program/Ac437_IBM_CGAthin.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM EGA 8x14-2x';
  src: url('soviet-program/Ac437_IBM_EGA_8x14-2x.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM EGA 8x14';
  src: url('soviet-program/Ac437_IBM_EGA_8x14.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM EGA 9x14-2x';
  src: url('soviet-program/Ac437_IBM_EGA_9x14-2x.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM EGA 9x14';
  src: url('soviet-program/Ac437_IBM_EGA_9x14.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM MDA';
  src: url('soviet-program/Ac437_IBM_MDA.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 Mindset-2x';
  src: url('soviet-program/Ac437_Mindset-2x.ttf') format('truetype');
}

@font-face {
  font-family: 'SovietProgram';
  src: url('soviet-program/SovietProgram.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'SovietProgram';
  src: url('soviet-program/SovietProgram-Bold.ttf') format('truetype');
  font-weight: bold;
  font-style: normal;
}

@font-face {
  font-family: 'SovietProgram';
  src: url('soviet-program/SovietProgram-Italic.ttf') format('truetype');
  font-weight: normal;
  font-style: italic;
}

/* Additional fonts from inktwo/fonts repo */
@font-face {
  font-family: 'Perfect DOS VGA 437';
  src: url('fonts/Perfect DOS VGA 437.ttf') format('truetype');
}

@font-face {
  font-family: 'VT323';
  src: url('fonts/VT323-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Glass TTY VT220';
  src: url('fonts/glass-tty-vt220.ttf') format('truetype');
}

@font-face {
  font-family: 'IBM 3270';
  src: url('fonts/3270-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Courier Prime';
  src: url('fonts/CourierPrime-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Inconsolata';
  src: url('fonts/Inconsolata-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Roboto Mono';
  src: url('fonts/RobotoMono-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Source Code Pro';
  src: url('fonts/SourceCodePro-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Fixedsys Excelsior';
  src: url('fonts/FSEX300.ttf') format('truetype');
}

@font-face {
  font-family: 'Terminal';
  src: url('fonts/TerminusTTF-4.49.3.ttf') format('truetype');
}

@font-face {
  font-family: 'Berkeley Mono';
  src: url('fonts/BerkeleyMono-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Monocraft';
  src: url('fonts/Monocraft.ttf') format('truetype');
}

@font-face {
  font-family: 'IBM Plex Mono';
  src: url('fonts/IBMPlexMono-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Cascadia Code';
  src: url('fonts/CascadiaCode.ttf') format('truetype');
}

@font-face {
  font-family: 'Olivetti';
  src: url('fonts/olivetti-typewriter.ttf') format('truetype');
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 12px;
}

::-webkit-scrollbar-track {
  background: #2a2a2a;
}
 
::-webkit-scrollbar-thumb {
  background: #666;
  border-radius: 6px;
}

::-webkit-scrollbar-thumb:hover {
  background: #888;
}

/* Base styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Noto Sans', sans-serif;
    background-color: #1a1a1a;
    color: #e0e0e0;
    overflow: hidden;
}

/* CRT Effect */
#crt-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9999;
  opacity: 0.15;
}

.scanline {
  width: 100%;
  height: 100%;
  background: linear-gradient(to bottom, 
    rgba(255,255,255,0), 
    rgba(255,255,255,0) 50%, 
    rgba(0,0,0,0.2) 50%, 
    rgba(0,0,0,0.2));
  background-size: 100% 4px;
  position: absolute;
  pointer-events: none;
  animation: scanline 10s linear infinite;
}

@keyframes scanline {
  0% { transform: translateY(0); }
  100% { transform: translateY(100%); }
}

#crt-overlay::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,0.3) 100%);
  pointer-events: none;
}

/* Main container */
#editor-wrapper {
    display: flex;
    flex-direction: column;
    height: 100vh;
    width: 100vw;
}

/* Toolbar */
#toolbar {
    background-color: #2a2a2a;
    border-bottom: 2px solid #ff0000;
    padding: 12px 15px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-items: center;
}

.toolbar-group {
    display: flex;
    gap: 4px;
    align-items: center;
    padding-right: 8px;
    border-right: 1px solid #444;
}

.toolbar-group:last-child {
    border-right: none;
}

#toolbar select {
    background-color: #333;
    color: #e0e0e0;
    border: 1px solid #555;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 13px;
    cursor: pointer;
}

#toolbar input[type="number"] {
    width: 60px;
    background-color: #333;
    color: #e0e0e0;
    border: 1px solid #555;
    padding: 6px 8px;
    border-radius: 4px;
    font-size: 13px;
}

#toolbar input[type="color"] {
    width: 40px;
    height: 32px;
    background-color: #333;
    border: 1px solid #555;
    border-radius: 4px;
    cursor: pointer;
}

#toolbar button {
    background-color: #333;
    color: #e0e0e0;
    border: 1px solid #555;
    padding: 6px 10px;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

#toolbar button:hover {
    background-color: #444;
    border-color: #666;
}

#toolbar button:active {
    background-color: #555;
}

#toolbar button .material-symbols-outlined {
    font-size: 20px;
}

/* Editor area */
#editor-container {
    flex: 1;
    overflow: hidden;
    display: flex;
    justify-content: center;
    background-color: #1a1a1a;
    padding: 20px;
}

#editor {
    width: 100%;
    max-width: 1200px;
    height: 100%;
    background-color: #222;
    background-image: url('https://raw.githubusercontent.com/ghostm68/pantheon/main/deluxe12.gif');
    background-size: cover;
    background-attachment: fixed;
    color: #e0e0e0;
    border: 2px solid #ff0000;
    padding: 30px;
    font-family: 'SovietProgram', monospace;
    font-size: 16px;
    line-height: 1.6;
    overflow-y: auto;
    outline: none;
    box-shadow: 0 0 20px rgba(255, 0, 0, 0.3);
}

#editor.full-width {
    max-width: 100%;
}

#editor:focus {
    border-color: #ff3333;
    box-shadow: 0 0 30px rgba(255, 51, 51, 0.5);
}

/* Status bar */
#status-bar {
    background-color: #2a2a2a;
    border-top: 2px solid #ff0000;
    padding: 10px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 12px;
    color: #888;
}

#quantum-status {
    font-style: italic;
}

#word-count {
    font-weight: bold;
    color: #ff0000;
}

/* Image upload helper */
.image-block {
    display: inline-block;
    max-width: 100%;
    margin: 10px 0;
}

.image-block img {
    max-width: 100%;
    height: auto;
    border: 1px solid #555;
}

/* Code block styling */
.code-block {
    background-color: #1a1a1a;
    border: 1px solid #ff0000;
    border-radius: 4px;
    padding: 15px;
    margin: 10px 0;
    font-family: 'Ac437 IBM MDA', monospace;
    color: #00ff00;
    overflow-x: auto;
}

/* Hidden file input */
#fileInput {
    display: none;
}

/* Color picker popup */
#colorPicker {
    display: none;
    position: absolute;
    background-color: #333;
    border: 2px solid #ff0000;
    padding: 10px;
    border-radius: 4px;
    z-index: 1000;
}
</style>
</head>
<body>

<!-- CRT Overlay -->
<div id="crt-overlay">
  <div class="scanline"></div>
</div>

<!-- Editor Wrapper -->
<div id="editor-wrapper">
    
    <!-- Toolbar -->
    <div id="toolbar">
        <!-- Font and size -->
        <div class="toolbar-group">
            <select id="fontSelector">
                <option value="'SovietProgram', monospace">Soviet Program</option>
                <option value="'Ac437 IBM CGA', monospace">IBM CGA</option>
                <option value="'Ac437 Mindset-2y', monospace">Mindset-2y</option>
                <option value="'Ac437 IBM EGA 8x14', monospace">IBM EGA 8x14</option>
                <option value="'Ac437 IBM EGA 9x14', monospace">IBM EGA 9x14</option>
                <option value="'Ac437 IBM MDA', monospace">IBM MDA</option>
                <option value="'Ac437 IBM BIOS', monospace">IBM BIOS</option>
                <option value="'Ac437 IBM CGA-2y', monospace">IBM CGA-2y</option>
                <option value="'Ac437 IBM CGAthin', monospace">IBM CGA Thin</option>
                <option value="'Ac437 EuroPC CGA', monospace">EuroPC CGA</option>
                <option value="'Ac437 EuroPC Mono', monospace">EuroPC Mono</option>
                <option value="'Ac437 EverexME 5x8', monospace">EverexME 5x8</option>
                <option value="'Ac437 HP 150', monospace">HP 150</option>
                <option value="'Perfect DOS VGA 437', monospace">Perfect DOS VGA 437</option>
                <option value="'VT323', monospace">VT323</option>
                <option value="'Glass TTY VT220', monospace">Glass TTY VT220</option>
                <option value="'IBM 3270', monospace">IBM 3270</option>
                <option value="'Courier Prime', monospace">Courier Prime</option>
                <option value="'Inconsolata', monospace">Inconsolata</option>
                <option value="'Roboto Mono', monospace">Roboto Mono</option>
                <option value="'Source Code Pro', monospace">Source Code Pro</option>
                <option value="'Fixedsys Excelsior', monospace">Fixedsys Excelsior</option>
                <option value="'Terminal', monospace">Terminal</option>
                <option value="'Berkeley Mono', monospace">Berkeley Mono</option>
                <option value="'Monocraft', monospace">Monocraft</option>
                <option value="'IBM Plex Mono', monospace">IBM Plex Mono</option>
                <option value="'Cascadia Code', monospace">Cascadia Code</option>
                <option value="'Olivetti', monospace">Olivetti Typewriter</option>
                <option value="'Noto Sans', sans-serif">Noto Sans</option>
            </select>
            <input type="number" id="fontSize" min="8" max="48" value="16">
        </div>

        <!-- Text formatting -->
        <div class="toolbar-group">
            <button id="boldButton" title="Bold (Ctrl+B)"><span class="material-symbols-outlined">format_bold</span></button>
            <button id="italicButton" title="Italic (Ctrl+I)"><span class="material-symbols-outlined">format_italic</span></button>
            <button id="underlineButton" title="Underline (Ctrl+U)"><span class="material-symbols-outlined">format_underlined</span></button>
            <button id="strikeButton" title="Strikethrough"><span class="material-symbols-outlined">strikethrough_s</span></button>
        </div>

        <!-- Alignment -->
        <div class="toolbar-group">
            <button id="alignLeft" title="Align Left"><span class="material-symbols-outlined">format_align_left</span></button>
            <button id="alignCenter" title="Align Center"><span class="material-symbols-outlined">format_align_center</span></button>
            <button id="alignRight" title="Align Right"><span class="material-symbols-outlined">format_align_right</span></button>
            <button id="alignJustify" title="Justify"><span class="material-symbols-outlined">format_align_justify</span></button>
        </div>

        <!-- Undo/Redo -->
        <div class="toolbar-group">
            <button id="undoButton" title="Undo (Ctrl+Z)"><span class="material-symbols-outlined">undo</span></button>
            <button id="redoButton" title="Redo (Ctrl+Y)"><span class="material-symbols-outlined">redo</span></button>
        </div>

        <!-- Blocks -->
        <div class="toolbar-group">
            <button id="addTextBlock" title="Add Text Block"><span class="material-symbols-outlined">text_fields</span></button>
            <button id="addCodeBlock" title="Add Code Block"><span class="material-symbols-outlined">code</span></button>
            <button id="uploadButton" title="Upload Image"><span class="material-symbols-outlined">upload</span></button>
        </div>

        <!-- AI Image Generation -->
        <div class="toolbar-group">
            <select id="aiModelSelector" title="AI Image Model">
                <option value="black-forest-labs/FLUX.1-schnell">FLUX Schnell (Fast)</option>
                <option value="black-forest-labs/FLUX.1-dev">FLUX Dev (Quality)</option>
                <option value="black-forest-labs/FLUX.1-pro">FLUX Pro (Best)</option>
                <option value="stabilityai/stable-diffusion-xl-base-1.0">Stable Diffusion XL</option>
                <option value="dall-e-3">DALL-E 3</option>
                <option value="gpt-image-1">GPT Image 1</option>
                <option value="gpt-image-1-mini">GPT Image 1 Mini</option>
                <option value="google/imagen-4.0-fast">Google Imagen 4 Fast</option>
                <option value="gemini-2.5-flash-image-preview">Gemini 2.5 Flash</option>
                <option value="ideogram/ideogram-3.0">Ideogram 3.0</option>
                <option value="RunDiffusion/Juggernaut-pro-flux">Juggernaut Pro</option>
            </select>
            <select id="aiQualitySelector" title="Image Quality" style="display: none;">
                <option value="standard">Standard</option>
                <option value="hd">HD</option>
            </select>
            <button id="generateImage" title="Generate AI Image from Selected Text" style="background-color: #ff0000; border-color: #ff0000;"><span class="material-symbols-outlined">auto_awesome</span></button>
        </div>

        <!-- Color -->
        <div class="toolbar-group">
            <button id="colorButton" title="Text Color"><span class="material-symbols-outlined">palette</span></button>
            <input type="color" id="colorPicker" value="#e0e0e0">
        </div>

        <!-- Width toggle -->
        <div class="toolbar-group">
            <button id="toggleWidth" title="Toggle Width"><span class="material-symbols-outlined">open_in_full</span></button>
        </div>

        <!-- Copy -->
        <div class="toolbar-group">
            <button id="copySelectedBlocks" title="Copy Text"><span class="material-symbols-outlined">content_copy</span></button>
        </div>
    </div>

    <!-- Editor -->
    <div id="editor-container">
        <div id="editor" contenteditable="true" spellcheck="true">
            <p style="color: #888; font-style: italic;">
                Welcome to INK REALM Word Processor<br><br>
                
                <strong>Getting Started:</strong><br>
                â€¢ Select your favorite retro IBM font from the toolbar<br>
                â€¢ Use formatting buttons for Bold, Italic, Underline, Strikethrough<br>
                â€¢ Align your text: Left, Center, Right, or Justify<br><br>
                
                <strong>AI Image Generation:</strong><br>
                â€¢ Type a description of the image you want<br>
                â€¢ Select that text with your cursor<br>
                â€¢ Choose an AI model from the dropdown (FLUX, DALL-E, Imagen, etc.)<br>
                â€¢ Click the sparkle (âœ¨) button to generate an AI image<br>
                â€¢ The image will appear in your document<br><br>
                
                <strong>Adding Content:</strong><br>
                â€¢ Upload images from your computer<br>
                â€¢ Add code blocks for programming snippets<br>
                â€¢ Change text color with the palette button<br><br>
                
                <strong>Saving & Export:</strong><br>
                â€¢ Save - Auto-saves to your browser for recovery<br>
                â€¢ Download TXT - Plain text file<br>
                â€¢ Download PDF - Formatted document<br><br>
                
                <strong>Keyboard Shortcuts:</strong><br>
                â€¢ Ctrl+B = Bold | Ctrl+I = Italic | Ctrl+U = Underline<br>
                â€¢ Ctrl+Z = Undo | Ctrl+Y = Redo | Ctrl+S = Save<br><br>
                
                Start typing to replace this text...
            </p>
        </div>
    </div>

    <!-- Status Bar -->
    <div id="status-bar">
        <div id="quantum-status">Quantum circuit: Ready</div>
        <div id="word-count">0 words</div>
        <div>
            <button id="saveButton" style="background: #555; border: none; padding: 6px 15px; border-radius: 4px; color: white; cursor: pointer; margin-right: 8px;">Save</button>
            <button id="downloadTxt" style="background: #666; border: none; padding: 6px 15px; border-radius: 4px; color: white; cursor: pointer; margin-right: 8px;">Download TXT</button>
            <button id="downloadPdf" style="background: #777; border: none; padding: 6px 15px; border-radius: 4px; color: white; cursor: pointer;">Download PDF</button>
        </div>
    </div>

</div>

<!-- Hidden file input -->
<input type="file" id="fileInput" accept="image/*">

<script>
document.addEventListener('DOMContentLoaded', () => {
    const editor = document.getElementById('editor');
    const fontSelector = document.getElementById('fontSelector');
    const fontSize = document.getElementById('fontSize');
    const boldButton = document.getElementById('boldButton');
    const italicButton = document.getElementById('italicButton');
    const underlineButton = document.getElementById('underlineButton');
    const strikeButton = document.getElementById('strikeButton');
    const alignLeft = document.getElementById('alignLeft');
    const alignCenter = document.getElementById('alignCenter');
    const alignRight = document.getElementById('alignRight');
    const alignJustify = document.getElementById('alignJustify');
    const undoButton = document.getElementById('undoButton');
    const redoButton = document.getElementById('redoButton');
    const addTextBlock = document.getElementById('addTextBlock');
    const addCodeBlock = document.getElementById('addCodeBlock');
    const uploadButton = document.getElementById('uploadButton');
    const colorButton = document.getElementById('colorButton');
    const colorPicker = document.getElementById('colorPicker');
    const toggleWidth = document.getElementById('toggleWidth');
    const copySelectedBlocks = document.getElementById('copySelectedBlocks');
    const saveButton = document.getElementById('saveButton');
    const downloadPdf = document.getElementById('downloadPdf');
    const downloadTxt = document.getElementById('downloadTxt');
    const quantumStatus = document.getElementById('quantum-status');
    const wordCount = document.getElementById('word-count');
    const fileInput = document.getElementById('fileInput');
    const generateImage = document.getElementById('generateImage');
    const aiModelSelector = document.getElementById('aiModelSelector');
    const aiQualitySelector = document.getElementById('aiQualitySelector');

    // Show/hide quality selector based on model
    aiModelSelector.addEventListener('change', () => {
        const model = aiModelSelector.value;
        
        // Models that support quality settings
        if (model === 'gpt-image-1' || model === 'gpt-image-1-mini') {
            aiQualitySelector.style.display = 'inline-block';
            aiQualitySelector.innerHTML = `
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
            `;
        } else if (model === 'dall-e-3') {
            aiQualitySelector.style.display = 'inline-block';
            aiQualitySelector.innerHTML = `
                <option value="standard">Standard</option>
                <option value="hd">HD</option>
            `;
        } else {
            aiQualitySelector.style.display = 'none';
        }
    });

    // Font controls
    fontSelector.addEventListener('change', () => {
        document.execCommand('fontName', false, fontSelector.value);
        editor.focus();
    });

    fontSize.addEventListener('input', () => {
        editor.style.fontSize = `${fontSize.value}px`;
    });

    // Text formatting
    boldButton.addEventListener('click', () => {
        document.execCommand('bold', false, null);
        editor.focus();
    });

    italicButton.addEventListener('click', () => {
        document.execCommand('italic', false, null);
        editor.focus();
    });

    underlineButton.addEventListener('click', () => {
        document.execCommand('underline', false, null);
        editor.focus();
    });

    strikeButton.addEventListener('click', () => {
        document.execCommand('strikeThrough', false, null);
        editor.focus();
    });

    // Alignment
    alignLeft.addEventListener('click', () => {
        document.execCommand('justifyLeft', false, null);
        editor.focus();
    });

    alignCenter.addEventListener('click', () => {
        document.execCommand('justifyCenter', false, null);
        editor.focus();
    });

    alignRight.addEventListener('click', () => {
        document.execCommand('justifyRight', false, null);
        editor.focus();
    });

    alignJustify.addEventListener('click', () => {
        document.execCommand('justifyFull', false, null);
        editor.focus();
    });

    // Undo/Redo
    undoButton.addEventListener('click', () => {
        document.execCommand('undo', false, null);
        editor.focus();
    });

    redoButton.addEventListener('click', () => {
        document.execCommand('redo', false, null);
        editor.focus();
    });

    // Keyboard shortcuts
    editor.addEventListener('keydown', (e) => {
        if (e.ctrlKey || e.metaKey) {
            switch(e.key.toLowerCase()) {
                case 'b':
                    e.preventDefault();
                    document.execCommand('bold', false, null);
                    break;
                case 'i':
                    e.preventDefault();
                    document.execCommand('italic', false, null);
                    break;
                case 'u':
                    e.preventDefault();
                    document.execCommand('underline', false, null);
                    break;
                case 's':
                    e.preventDefault();
                    saveDocument();
                    break;
            }
        }
    });

    // Add text block
    addTextBlock.addEventListener('click', () => {
        document.execCommand('insertHTML', false, '<p><br></p>');
        editor.focus();
    });

    // Add code block
    addCodeBlock.addEventListener('click', () => {
        const codeBlock = '<div class="code-block" contenteditable="true">// Enter code here...</div><p><br></p>';
        document.execCommand('insertHTML', false, codeBlock);
        editor.focus();
    });

    // Image upload
    uploadButton.addEventListener('click', () => {
        fileInput.click();
    });

    fileInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file && file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = (event) => {
                const img = `<div class="image-block"><img src="${event.target.result}" alt="Uploaded image"></div><p><br></p>`;
                document.execCommand('insertHTML', false, img);
                editor.focus();
            };
            reader.readAsDataURL(file);
        }
    });

    // Color picker
    colorButton.addEventListener('click', () => {
        colorPicker.click();
    });

    colorPicker.addEventListener('input', () => {
        document.execCommand('foreColor', false, colorPicker.value);
        editor.focus();
    });

    // Toggle width
    toggleWidth.addEventListener('click', () => {
        editor.classList.toggle('full-width');
    });

    // Copy selected text
    copySelectedBlocks.addEventListener('click', () => {
        document.execCommand('copy');
        quantumStatus.textContent = 'Text copied to quantum clipboard';
        setTimeout(() => {
            quantumStatus.textContent = 'Quantum circuit: Ready';
        }, 2000);
    });

    // Word count
    function updateWordCount() {
        const text = editor.innerText || editor.textContent;
        const words = text.trim().split(/\s+/).filter(w => w.length > 0);
        wordCount.textContent = `${words.length} words`;
    }

    editor.addEventListener('input', updateWordCount);

    // AI Image Generation with Puter.js
    generateImage.addEventListener('click', async () => {
        const selectedText = window.getSelection().toString().trim();
        
        if (!selectedText) {
            quantumStatus.textContent = 'Select text to generate image from';
            setTimeout(() => {
                quantumStatus.textContent = 'Quantum circuit: Ready';
            }, 2000);
            return;
        }

        // Check if Puter AI is available
        if (!window.puter || !puter.ai || !puter.ai.txt2img) {
            quantumStatus.textContent = 'âš ï¸ Puter AI not available - check console';
            console.error('[INK REALM] Puter AI txt2img not found');
            setTimeout(() => {
                quantumStatus.textContent = 'Quantum circuit: Ready';
            }, 4000);
            return;
        }

        const selectedModel = aiModelSelector.value;
        const modelName = selectedModel.split('/').pop();
        quantumStatus.textContent = `Generating with ${modelName}...`;
        
        try {
            // Build options object
            const options = { model: selectedModel };
            
            // Add quality if model supports it and selector is visible
            if (aiQualitySelector.style.display !== 'none') {
                options.quality = aiQualitySelector.value;
            }
            
            // Puter returns an <img> element directly, not a blob!
            const img = await puter.ai.txt2img(selectedText, options);
            
            if (!img) {
                throw new Error("Empty response from Puter AI");
            }
            
            // Wrap the img element and insert it
            const wrapper = document.createElement('div');
            wrapper.className = 'image-block';
            wrapper.appendChild(img);
            wrapper.innerHTML += '<p><br></p>';
            
            // Insert at cursor position
            const selection = window.getSelection();
            if (selection.rangeCount > 0) {
                const range = selection.getRangeAt(0);
                range.deleteContents();
                range.insertNode(wrapper);
            } else {
                editor.appendChild(wrapper);
            }
            
            quantumStatus.textContent = 'Quantum image materialized âœ¨';
            setTimeout(() => {
                quantumStatus.textContent = 'Quantum circuit: Ready';
            }, 3000);
            
        } catch (err) {
            console.error('[INK REALM] AI Image generation error:', err);
            
            let errorMsg = 'âš ï¸ Generation failed: ';
            
            if (err.message && err.message.includes('auth')) {
                errorMsg += 'Authentication required';
            } else if (err.message && err.message.includes('quota')) {
                errorMsg += 'API quota exceeded';
            } else if (err.message && err.message.includes('model')) {
                errorMsg += 'Model unavailable - try different model';
            } else {
                errorMsg += err.message || 'Unknown error';
            }
            
            quantumStatus.textContent = errorMsg;
            
            setTimeout(() => {
                quantumStatus.textContent = 'Quantum circuit: Ready';
            }, 5000);
        }
    });

    // Save document (localStorage kept - useful for auto-recovery)
    function saveDocument() {
        const content = editor.innerHTML;
        localStorage.setItem('quantumDocument', content);
        quantumStatus.textContent = 'Document saved to quantum cloud';
        setTimeout(() => {
            quantumStatus.textContent = 'Quantum circuit: Ready';
        }, 2000);
    }

    saveButton.addEventListener('click', saveDocument);

    // Load saved document
    const savedDoc = localStorage.getItem('quantumDocument');
    if (savedDoc) {
        editor.innerHTML = savedDoc;
        updateWordCount();
        quantumStatus.textContent = 'Previous quantum state restored';
        setTimeout(() => {
            quantumStatus.textContent = 'Quantum circuit: Ready';
        }, 2000);
    }

    // Download TXT
    downloadTxt.addEventListener('click', () => {
        const text = editor.innerText || editor.textContent;
        
        if (!text.trim()) {
            quantumStatus.textContent = 'Quantum void detected: nothing to materialize';
            setTimeout(() => {
                quantumStatus.textContent = 'Quantum circuit: Ready';
            }, 2000);
            return;
        }

        const blob = new Blob([text], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'ink-realm-document.txt';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        quantumStatus.textContent = 'TXT materialized from quantum state';
        setTimeout(() => {
            quantumStatus.textContent = 'Quantum circuit: Ready';
        }, 2000);
    });

    // Download PDF
    downloadPdf.addEventListener('click', async () => {
        const text = editor.innerText || editor.textContent;
        
        if (!text.trim()) {
            quantumStatus.textContent = 'Quantum void detected: nothing to materialize';
            setTimeout(() => {
                quantumStatus.textContent = 'Quantum circuit: Ready';
            }, 2000);
            return;
        }

        quantumStatus.textContent = 'Generating quantum PDF...';
        
        try {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const lines = doc.splitTextToSize(text, 180);
            doc.setFontSize(parseInt(fontSize.value));
            doc.text(lines, 15, 15);
            
            doc.save('ink-realm-document.pdf');
            quantumStatus.textContent = 'PDF materialized from quantum state';
            setTimeout(() => {
                quantumStatus.textContent = 'Quantum circuit: Ready';
            }, 2000);
        } catch (error) {
            quantumStatus.textContent = 'Quantum collapse: PDF generation failed';
            console.error(error);
            setTimeout(() => {
                quantumStatus.textContent = 'Quantum circuit: Ready';
            }, 2000);
        }
    });

    // Initial word count
    updateWordCount();
});
</script>

</body>
	</html>
