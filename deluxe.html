<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>INK REALM DELUXE | Word Processor with AI</title>

<!-- ICONS & FAVICON -->
<link rel="apple-touch-icon" type="image/png" href="https://github.com/ghostm68/pantheon/raw/main/inkrealm.info.2025.png" />
<link rel="shortcut icon" href="./Images/favicon.ico" />

<!-- SCRIPTS -->
<script src="https://js.puter.com/v2/"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<!-- STANDARD FONTS (Google/Adobe/Icons) -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=DejaVu+Sans:wght@400;700&family=DejaVu+Serif:wght@400;700&family=DejaVu+Sans+Mono&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light&display=swap" rel="stylesheet">
<link href="//fonts.cdnfonts.com/css/hardcore-pen" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@league-of-moveable-type/junction@1.0.0/junction.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@league-of-moveable-type/league-gothic@1.0.0/league-gothic.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@league-of-moveable-type/chunk@1.0.0/chunk.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/gh/velvetyne/Millimetre@master/webfonts/Millimetre.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/gh/velvetyne/Steps-Mono@master/webfonts/StepsMono.css" rel="stylesheet">
<link href="https://fonts.cdnfonts.com/css/adobe-text-pro" rel="stylesheet">
<link href="https://fonts.cdnfonts.com/css/adobe-garamond-pro-2" rel="stylesheet">
<!-- THE WEIRD PACK (Experimental, OCR, Glitch) -->
<link href="https://fonts.googleapis.com/css2?family=OCR+A+Extended&family=Syne+Mono&family=Major+Mono+Display&family=Six+Caps&family=Silkscreen&family=DotGothic16&family=Zen+Dots&family=Wallpoet&family=Audiowide&family=Megrim&family=UnifrakturMaguntia&family=Bungee+Outline&display=swap" rel="stylesheet">
<!-- VELVETYNE (Experimental Open Source) -->
<link href="https://cdn.jsdelivr.net/gh/velvetyne/Terminal-Grotesque@master/webfonts/terminal-grotesque.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/gh/velvetyne/Trickster@master/webfonts/trickster.css" rel="stylesheet">	

<style>
/* --- 1. SOVIET PROGRAM FONTS (Corrected Filenames) --- */
@font-face { font-family: 'Ac437 Mindset-2y'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_Mindset-2y.ttf') format('truetype'); }
@font-face { font-family: 'Ac437 EuroPC CGA-2y'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_EuroPC_CGA-2y.ttf') format('truetype'); }
@font-face { font-family: 'Ac437 EuroPC CGA'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_EuroPC_CGA.ttf') format('truetype'); }
@font-face { font-family: 'Ac437 EuroPC Mono'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_EuroPC_Mono.ttf') format('truetype'); }

/* FIXED EVEREX (Matches your repo: Ac437_EverexME_5x8.ttf) */
@font-face { font-family: 'Ac437 EverexME 5x8'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_EverexME_5x8.ttf') format('truetype'); }
@font-face { font-family: 'Ac437 EverexME 7x8'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_EverexME_7x8.ttf') format('truetype'); }

/* FIXED HP 150 (Matches your repo: Ac437_HP_150_re.ttf) */
@font-face { font-family: 'Ac437 HP 150'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_HP_150_re.ttf') format('truetype'); }

@font-face { font-family: 'Ac437 IBM BIOS'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_IBM_BIOS.ttf') format('truetype'); }
@font-face { font-family: 'Ac437 IBM CGA-2y'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_IBM_CGA-2y.ttf') format('truetype'); }
@font-face { font-family: 'Ac437 IBM CGA'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_IBM_CGA.ttf') format('truetype'); }
@font-face { font-family: 'Ac437 IBM CGAthin-2y'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_IBM_CGAthin-2y.ttf') format('truetype'); }
@font-face { font-family: 'Ac437 IBM CGAthin'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_IBM_CGAthin.ttf') format('truetype'); }
@font-face { font-family: 'Ac437 IBM DOS ISO9-2x'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_IBM_DOS_ISO9-2x.ttf') format('truetype'); }
@font-face { font-family: 'Ac437 IBM DOS ISO9'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_IBM_DOS_ISO9.ttf') format('truetype'); }
@font-face { font-family: 'Ac437 IBM EGA 8x14-2x'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_IBM_EGA_8x14-2x.ttf') format('truetype'); }
@font-face { font-family: 'Ac437 IBM EGA 8x14'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_IBM_EGA_8x14.ttf') format('truetype'); }
@font-face { font-family: 'Ac437 IBM EGA 8x8-2x'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_IBM_EGA_8x8-2x.ttf') format('truetype'); }
@font-face { font-family: 'Ac437 IBM EGA 8x8'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_IBM_EGA_8x8.ttf') format('truetype'); }
@font-face { font-family: 'Ac437 IBM MDA'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_IBM_MDA.ttf') format('truetype'); }
@font-face { font-family: 'Ac437 Mindset-2x'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/Ac437_Mindset-2x.ttf') format('truetype'); }
@font-face { font-family: 'SovietProgram'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/SovietProgram.ttf') format('truetype'); font-weight: normal; font-style: normal; }
@font-face { font-family: 'SovietProgram'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/SovietProgram-Bold.ttf') format('truetype'); font-weight: bold; font-style: normal; }
@font-face { font-family: 'SovietProgram'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/soviet-program/SovietProgram-Italic.ttf') format('truetype'); font-weight: normal; font-style: italic; }

/* --- 2. ADDITIONAL FONTS (Standardized) --- */
@font-face { font-family: 'Perfect DOS VGA 437'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/fonts/Perfect%20DOS%20VGA%20437.ttf') format('truetype'); }
@font-face { font-family: 'VT323'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/fonts/VT323-Regular.ttf') format('truetype'); }
@font-face { font-family: 'Glass TTY VT220'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/fonts/glass-tty-vt220.ttf') format('truetype'); }
@font-face { font-family: 'IBM 3270'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/fonts/3270-Regular.ttf') format('truetype'); }
@font-face { font-family: 'Courier Prime'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/fonts/CourierPrime-Regular.ttf') format('truetype'); }
@font-face { font-family: 'Inconsolata'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/fonts/Inconsolata-Regular.ttf') format('truetype'); }
@font-face { font-family: 'Roboto Mono'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/fonts/RobotoMono-Regular.ttf') format('truetype'); }
@font-face { font-family: 'Source Code Pro'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/fonts/SourceCodePro-Regular.ttf') format('truetype'); }
@font-face { font-family: 'Fixedsys Excelsior'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/fonts/FSEX300.ttf') format('truetype'); }
@font-face { font-family: 'Terminal'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/fonts/TerminusTTF-4.49.3.ttf') format('truetype'); }
@font-face { font-family: 'Berkeley Mono'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/fonts/BerkeleyMono-Regular.ttf') format('truetype'); }
@font-face { font-family: 'Monocraft'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/fonts/Monocraft.ttf') format('truetype'); }
@font-face { font-family: 'IBM Plex Mono'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/fonts/IBMPlexMono-Regular.ttf') format('truetype'); }
@font-face { font-family: 'Cascadia Code'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/fonts/CascadiaCode.ttf') format('truetype'); }
@font-face { font-family: 'Olivetti'; src: url('https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/fonts/olivetti-typewriter.ttf') format('truetype'); }

/* SWITZER */
@font-face { font-family: 'Switzer'; src: url('WEB/fonts/Switzer-Regular.ttf') format('truetype'); font-weight: 400; font-style: normal; }
@font-face { font-family: 'Switzer'; src: url('WEB/fonts/Switzer-Bold.ttf') format('truetype'); font-weight: 700; font-style: normal; }
@font-face { font-family: 'Switzer'; src: url('WEB/fonts/Switzer-Italic.ttf') format('truetype'); font-weight: 400; font-style: italic; }

/* EDITOR RESET */
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Noto Sans', sans-serif; background-color: #1a1a1a; color: #e0e0e0; overflow: hidden; }

/* Important: Force the editor to use the selected font */
#editor * { font-family: inherit !important; }
#editor { font-family: 'SovietProgram', monospace; }

/* Scrollbar */
::-webkit-scrollbar { width: 12px; }
::-webkit-scrollbar-track { background: #2a2a2a; }
::-webkit-scrollbar-thumb { background: #666; border-radius: 6px; }
::-webkit-scrollbar-thumb:hover { background: #888; }

/* CRT Effect */
#crt-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; opacity: 0.15; }
.scanline { width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2)); background-size: 100% 4px; position: absolute; pointer-events: none; animation: scanline 10s linear infinite; }
@keyframes scanline { 0% { transform: translateY(0); } 100% { transform: translateY(100%); } }
#crt-overlay::before { content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,0.3) 100%); pointer-events: none; }

/* Main container */
#editor-wrapper { display: flex; flex-direction: column; height: 100dvh; width: 100vw; }

/* Toolbar */
#toolbar { background-color: #2a2a2a; border-bottom: 2px solid #ff0000; padding: 12px 15px; display: flex; flex-wrap: wrap; gap: 8px; align-items: center; }
.toolbar-group { display: flex; gap: 4px; align-items: center; padding-right: 8px; border-right: 1px solid #444; }
.toolbar-group:last-child { border-right: none; }
#toolbar select { background-color: #333; color: #e0e0e0; border: 1px solid #555; padding: 6px 10px; border-radius: 4px; font-size: 13px; cursor: pointer; }
#toolbar input[type="number"] { width: 60px; background-color: #333; color: #e0e0e0; border: 1px solid #555; padding: 6px 8px; border-radius: 4px; font-size: 13px; }
#toolbar input[type="color"] { width: 40px; height: 32px; background-color: #333; border: 1px solid #555; border-radius: 4px; cursor: pointer; }
#toolbar button { background-color: #333; color: #e0e0e0; border: 1px solid #555; padding: 6px 10px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
#toolbar button:hover { background-color: #444; border-color: #666; }
#toolbar button:active { background-color: #555; }
#toolbar button .material-symbols-outlined { font-size: 20px; }

/* Editor area */
#editor-container { flex: 1; overflow: hidden; display: flex; justify-content: center; background-color: #1a1a1a; padding: 20px; }
#editor { width: 100%; max-width: 1200px; height: 100%; background-color: #222; background-image: url('https://raw.githubusercontent.com/ghostm68/pantheon/main/deluxe12.gif'); background-size: cover; background-attachment: fixed; color: #e0e0e0; border: 2px solid #ff0000; padding: 30px; font-family: 'SovietProgram', monospace; font-size: 16px; line-height: 1.6; overflow-y: auto; outline: none; box-shadow: 0 0 20px rgba(255, 0, 0, 0.3); }

#editor.full-width { max-width: 100%; }
#editor:focus { border-color: #ff3333; box-shadow: 0 0 30px rgba(255, 51, 51, 0.5); }

/* Status bar */
#status-bar { background-color: #2a2a2a; border-top: 2px solid #ff0000; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; font-size: 12px; color: #888; }
#quantum-status { font-style: italic; }
#word-count { font-weight: bold; color: #ff0000; }

/* Image upload helper */
.image-block { display: inline-block; max-width: 100%; margin: 10px 0; }
.image-block img { max-width: 100%; height: auto; border: 1px solid #555; }

/* Code block styling */
.code-block { background-color: #1a1a1a; border: 1px solid #ff0000; border-radius: 4px; padding: 15px; margin: 10px 0; font-family: 'Ac437 IBM MDA', monospace; color: #00ff00; overflow-x: auto; }

/* Hidden file input */
#fileInput { display: none; }

/* Color picker popup */
#colorPicker { display: none; position: absolute; background-color: #333; border: 2px solid #ff0000; padding: 10px; border-radius: 4px; z-index: 1000; }

/* Bold/Italic Safety Fixes */
strong, b { font-weight: bold; }
em, i { font-style: italic; }
#editor b, #editor strong, #editor i, #editor em, #editor u, #editor s { color: inherit; }

/* ORB CONTAINER */
.orb-container { display: inline-block; vertical-align: middle; margin-right: 15px; width: 50px; height: 50px; position: relative; }
.glitch-orb { width: 100%; height: 100%; fill: none; stroke-width: 3; overflow: visible; }
.orb-circle { stroke: #ff0033; }
.orb-triangle { stroke: #ffffff; }
.orb-container svg { animation: slow-spin 10s linear infinite; filter: drop-shadow(0 0 5px rgba(255, 0, 51, 0.4)); transition: all 0.2s ease; }
.orb-container:hover svg { animation: glitch-shake 0.3s cubic-bezier(.25, .46, .45, .94) both infinite; filter: drop-shadow(2px 2px 0px rgba(255, 255, 255, 0.5)) drop-shadow(-2px -2px 0px rgba(255, 0, 51, 0.8)); }
.orb-container:hover .orb-triangle { fill: rgba(255, 255, 255, 0.1); }
@keyframes slow-spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
@keyframes glitch-shake { 0% { transform: translate(0) rotate(0deg); } 20% { transform: translate(-2px, 2px) rotate(-5deg); } 40% { transform: translate(-2px, -2px) rotate(5deg); } 60% { transform: translate(2px, 2px) rotate(-5deg); } 80% { transform: translate(2px, -2px) rotate(5deg); } 100% { transform: translate(0) rotate(0deg); } }
</style>
		<style>
	/* 1. The Text Highlight (Your snippet) */
::selection {
  background: var(--red);
  color: var(--black);
  text-shadow: none;
}

/* 2. Firefox Support (Just in case) */
::-moz-selection {
  background: var(--red);
  color: var(--black);
}

/* 3. The Blinking Cursor (Input fields) */
input, textarea, [contenteditable] {
  caret-color: var(--red);
}

/* 4. The Mobile "Tap" Flash (Crucial for phones) */
* {
  -webkit-tap-highlight-color: transparent;
}

/* 5. Focus Rings (Tab selection) */
*:focus {
  outline: 1px dotted var(--red);
  outline-offset: 2px;
}
	</style>
</head>
<body>

<!-- CRT Overlay -->
<div id="crt-overlay">
  <div class="scanline"></div>
</div>

<!-- Editor Wrapper -->
<div id="editor-wrapper">
    
    <!-- Toolbar -->
    <div id="toolbar">
		<div class="orb-container">
            <svg class="glitch-orb" viewBox="0 0 100 100">
                <circle class="orb-circle" cx="50" cy="50" r="45" />
                <polygon class="orb-triangle" points="50,25 78,75 22,75" />
            </svg>
        </div>
 <div class="toolbar-group">
    <select id="fontSelector">
        <option value="'SovietProgram', monospace">Soviet Program</option>
        <option value="'SovietProgram Thin', monospace">Soviet Program Thin</option>
        <option value="'SovietProgram Light', monospace">Soviet Program Light</option>
        <option value="'Ac437 IBM CGA', monospace">Ac437 IBM CGA</option>
        <option value="'Ac437 Mindset-2y', monospace">Ac437 Mindset-2y</option>
        <option value="'Ac437 IBM EGA 8x14', monospace">Ac437 IBM EGA 8x14</option>
        <option value="'Ac437 IBM EGA 9x14', monospace">Ac437 IBM EGA 9x14</option>
        <option value="'Ac437 IBM MDA', monospace">Ac437 IBM MDA</option>
        <option value="'Ac437 IBM BIOS', monospace">Ac437 IBM BIOS</option>
        <option value="'Ac437 IBM CGA-2y', monospace">Ac437 IBM CGA-2y</option>
        <option value="'Ac437 IBM CGAthin', monospace">Ac437 IBM CGAthin</option>
        <option value="'Ac437 EuroPC CGA', monospace">Ac437 EuroPC CGA</option>
        <option value="'Ac437 EuroPC CGA-2y', monospace">Ac437 EuroPC CGA-2y</option>
        <option value="'Ac437 EuroPC Mono', monospace">Ac437 EuroPC Mono</option>
        <!-- FIXED EVEREX -->
        <option value="'Ac437 EverexME 5x8', monospace">Ac437 EverexME 5x8</option>
        <option value="'Ac437 EverexME 7x8', monospace">Ac437 EverexME 7x8</option>
        <!-- FIXED HP -->
        <option value="'Ac437 HP 150', monospace">Ac437 HP 150</option>
        <option value="'Ac437 IBM DOS ISO9-2x', monospace">Ac437 IBM DOS ISO9-2x</option>
        <option value="'Ac437 IBM DOS ISO9', monospace">Ac437 IBM DOS ISO9</option>
        <option value="'Ac437 IBM EGA 8x14-2x', monospace">Ac437 IBM EGA 8x14-2x</option>
        <option value="'Ac437 IBM EGA 8x8-2x', monospace">Ac437 IBM EGA 8x8-2x</option>
        <option value="'Ac437 IBM EGA 8x8', monospace">Ac437 IBM EGA 8x8</option>
        <option value="'Ac437 Mindset-2x', monospace">Ac437 Mindset-2x</option>
        <option value="'Perfect DOS VGA 437', monospace">Perfect DOS VGA 437</option>
        <option value="'VT323', monospace">VT323</option>
        <option value="'Glass TTY VT220', monospace">Glass TTY VT220</option>
        <option value="'IBM 3270', monospace">IBM 3270</option>
        <option value="'Courier Prime', monospace">Courier Prime</option>
        <option value="'Inconsolata', monospace">Inconsolata</option>
        <option value="'Roboto Mono', monospace">Roboto Mono</option>
        <option value="'Source Code Pro', monospace">Source Code Pro</option>
        <option value="'Fixedsys Excelsior', monospace">Fixedsys Excelsior</option>
        <option value="'Terminal', monospace">Terminal</option>
        <option value="'Berkeley Mono', monospace">Berkeley Mono</option>
        <option value="'Monocraft', monospace">Monocraft</option>
        <option value="'IBM Plex Mono', monospace">IBM Plex Mono</option>
        <option value="'Cascadia Code', monospace">Cascadia Code</option>
        <option value="'Olivetti', monospace">Olivetti Typewriter</option>
        <option value="'Noto Sans', sans-serif">Noto Sans</option>
        <option value="'DejaVu Sans', sans-serif">DejaVu Sans</option>
        <option value="'DejaVu Serif', serif">DejaVu Serif</option>
        <option value="'DejaVu Sans Mono', monospace">DejaVu Sans Mono</option>
        <option value="'Switzer', sans-serif">Switzer</option>
        <!-- HANDWRITTEN/ARTISTIC -->
        <option value="'Permanent Marker', cursive">Permanent Marker</option>
        <option value="'Indie Flower', cursive">Indie Flower</option>
        <option value="'Shadows Into Light', cursive">Shadows Into Light</option>
        <option value="'Hardcore Pen', cursive">Hardcore Pen</option>
        <!-- MODERN CODING -->
        <option value="'Fira Code', monospace">Fira Code</option>
        <option value="'JetBrains Mono', monospace">JetBrains Mono</option>
        <option value="'Space Mono', monospace">Space Mono</option>
        <!-- TYPEWRITER -->
        <option value="'Special Elite', cursive">Special Elite</option>
        <!-- THE LEAGUE / VELVETYNE -->
        <option value="'Junction', sans-serif">Junction</option>
        <option value="'League Gothic', sans-serif">League Gothic</option>
        <option value="'Chunk', serif">Chunk</option>
        <option value="'Millimetre', sans-serif">Millimetre</option>
        <option value="'Steps Mono', monospace">Steps Mono</option>
        <!-- ADOBE SERIF -->
        <option value="'Adobe Text Pro', serif">Adobe Text Pro</option>
        <option value="'Adobe Garamond Pro', serif">Adobe Garamond Pro</option>	
		<option value="disabled" disabled>--- EXOTIC / EXPERIMENTAL ---</option>
        
        <!-- MACHINE / DATA -->
        <option value="'OCR A Extended', monospace">OCR-A (Machine Readable)</option>
        <option value="'Terminal Grotesque', monospace">Terminal Grotesque</option>
        <option value="'DotGothic16', sans-serif">DotGothic16 (ATM Interface)</option>
        
        <!-- WILD / DISPLAY -->
        <option value="'Six Caps', sans-serif">Six Caps (Brutalist Tall)</option>
        <option value="'Bungee Outline', cursive">Bungee Outline</option>
        <option value="'Wallpoet', cursive">Wallpoet (Stencil)</option>
        
        <!-- WEIRD / ART HOUSE -->
        <option value="'Syne Mono', monospace">Syne Mono</option>
        <option value="'Megrim', cursive">Megrim (Experimental)</option>
        <option value="'Major Mono Display', monospace">Major Mono Display (Glitch)</option>
        <option value="'Trickster', sans-serif">Trickster (Medieval-Cyber)</option>
        
        <!-- RETRO FUTURISM -->
        <option value="'Silkscreen', cursive">Silkscreen (Pixel)</option>
        <option value="'Zen Dots', cursive">Zen Dots</option>
        <option value="'Audiowide', cursive">Audiowide (HUD)</option>
        
        <!-- ANCIENT -->
        <option value="'UnifrakturMaguntia', cursive">Unifraktur (Dark Gothic)</option>
    </select>
    <input type="number" id="fontSize" min="8" max="48" value="16">
</div>
        <!-- Text formatting -->
        <div class="toolbar-group">
            <button id="boldButton" title="Bold (Ctrl+B)"><span class="material-symbols-outlined">format_bold</span></button>
            <button id="italicButton" title="Italic (Ctrl+I)"><span class="material-symbols-outlined">format_italic</span></button>
            <button id="underlineButton" title="Underline (Ctrl+U)"><span class="material-symbols-outlined">format_underlined</span></button>
            <button id="strikeButton" title="Strikethrough"><span class="material-symbols-outlined">strikethrough_s</span></button>
        </div>

        <!-- Alignment -->
        <div class="toolbar-group">
            <button id="alignLeft" title="Align Left"><span class="material-symbols-outlined">format_align_left</span></button>
            <button id="alignCenter" title="Align Center"><span class="material-symbols-outlined">format_align_center</span></button>
            <button id="alignRight" title="Align Right"><span class="material-symbols-outlined">format_align_right</span></button>
            <button id="alignJustify" title="Justify"><span class="material-symbols-outlined">format_align_justify</span></button>
        </div>

        <!-- Undo/Redo -->
        <div class="toolbar-group">
            <button id="undoButton" title="Undo (Ctrl+Z)"><span class="material-symbols-outlined">undo</span></button>
            <button id="redoButton" title="Redo (Ctrl+Y)"><span class="material-symbols-outlined">redo</span></button>
        </div>

        <!-- Blocks -->
        <div class="toolbar-group">
            <button id="addTextBlock" title="Add Text Block"><span class="material-symbols-outlined">text_fields</span></button>
            <button id="addCodeBlock" title="Add Code Block"><span class="material-symbols-outlined">code</span></button>
            <button id="uploadButton" title="Upload Image"><span class="material-symbols-outlined">upload</span></button>
        </div>

        <!-- AI Image Generation -->
        <div class="toolbar-group">
    <select id="aiModelSelector" title="AI Image Model">
        <option value="flux" selected>FLUX.1 (Fast & Quality)</option>
        <option value="flux-realism">FLUX Realism</option>
        <option value="flux-anime">FLUX Anime</option>
        <option value="flux-3d">FLUX 3D</option>
        <option value="turbo">SD Turbo (Fast)</option>
        <option value="dreamshaper">DreamShaper</option>
        <option value="deliberate">Deliberate</option>
    </select>
    <button id="generateImage" title="Generate AI Image from Selected Text" style="background-color: #ff0000; border-color: #ff0000;"><span class="material-symbols-outlined">auto_awesome</span></button>
</div>

        <!-- Color -->
        <div class="toolbar-group">
            <button id="colorButton" title="Text Color"><span class="material-symbols-outlined">palette</span></button>
            <input type="color" id="colorPicker" value="#e0e0e0">
        </div>

        <!-- Width toggle -->
        <div class="toolbar-group">
            <button id="toggleWidth" title="Toggle Width"><span class="material-symbols-outlined">open_in_full</span></button>
        </div>

        <!-- Copy -->
        <div class="toolbar-group">
            <button id="copySelectedBlocks" title="Copy Text"><span class="material-symbols-outlined">content_copy</span></button>
        </div>
    </div>

    <!-- Editor -->
    <div id="editor-container">
        <div id="editor" contenteditable="true" spellcheck="true">
            <p style="color: #888; font-style: italic;">
                Welcome to INK REALM Word Processor<br><br>
                
                <strong>Getting Started:</strong><br>
                • Select your favorite retro IBM font from the toolbar<br>
                • Use formatting buttons for Bold, Italic, Underline, Strikethrough<br>
                • Align your text: Left, Center, Right, or Justify<br><br>
                
                <strong>AI Image Generation:</strong><br>
                • Type a description of the image you want<br>
                • Select that text with your cursor<br>
                • Choose an AI model from the dropdown (FLUX, DALL-E, Imagen, etc.)<br>
                • Click the sparkle (✨) button to generate an AI image<br>
                • The image will appear in your document<br><br>
                
                <strong>Adding Content:</strong><br>
                • Upload images from your computer<br>
                • Add code blocks for programming snippets<br>
                • Change text color with the palette button<br><br>
                
                <strong>Saving & Export:</strong><br>
                • Save - Auto-saves to your browser for recovery<br>
                • Download TXT - Plain text file<br>
                • Download PDF - Formatted document<br><br>
                
                <strong>Keyboard Shortcuts:</strong><br>
                • Ctrl+B = Bold | Ctrl+I = Italic | Ctrl+U = Underline<br>
                • Ctrl+Z = Undo | Ctrl+Y = Redo | Ctrl+S = Save<br><br>
                
                Start typing to replace this text...
            </p>
        </div>
    </div>

    <!-- Status Bar -->
    <div id="status-bar">
        <div id="quantum-status">Quantum circuit: Ready</div>
        <div id="word-count">0 words</div>
        <div>
            <button id="saveButton" style="background: #555; border: none; padding: 6px 15px; border-radius: 4px; color: white; cursor: pointer; margin-right: 8px;">Save</button>
            <button id="downloadTxt" style="background: #666; border: none; padding: 6px 15px; border-radius: 4px; color: white; cursor: pointer; margin-right: 8px;">Download TXT</button>
            <button id="downloadPdf" style="background: #777; border: none; padding: 6px 15px; border-radius: 4px; color: white; cursor: pointer;">Download PDF</button>
        </div>
    </div>

</div>

<!-- Hidden file input -->
<input type="file" id="fileInput" accept="image/*">

<script>
document.addEventListener('DOMContentLoaded', () => {
    const editor = document.getElementById('editor');
    const fontSelector = document.getElementById('fontSelector');
    const fontSize = document.getElementById('fontSize');
    const boldButton = document.getElementById('boldButton');
    const italicButton = document.getElementById('italicButton');
    const underlineButton = document.getElementById('underlineButton');
    const strikeButton = document.getElementById('strikeButton');
    const alignLeft = document.getElementById('alignLeft');
    const alignCenter = document.getElementById('alignCenter');
    const alignRight = document.getElementById('alignRight');
    const alignJustify = document.getElementById('alignJustify');
    const undoButton = document.getElementById('undoButton');
    const redoButton = document.getElementById('redoButton');
    const addTextBlock = document.getElementById('addTextBlock');
    const addCodeBlock = document.getElementById('addCodeBlock');
    const uploadButton = document.getElementById('uploadButton');
    const colorButton = document.getElementById('colorButton');
    const colorPicker = document.getElementById('colorPicker');
    const toggleWidth = document.getElementById('toggleWidth');
    const copySelectedBlocks = document.getElementById('copySelectedBlocks');
    const saveButton = document.getElementById('saveButton');
    const downloadPdf = document.getElementById('downloadPdf');
    const downloadTxt = document.getElementById('downloadTxt');
    const quantumStatus = document.getElementById('quantum-status');
    const wordCount = document.getElementById('word-count');
    const fileInput = document.getElementById('fileInput');
    const generateImage = document.getElementById('generateImage');
    const aiModelSelector = document.getElementById('aiModelSelector');
    const aiQualitySelector = document.getElementById('aiQualitySelector');

    // Show/hide quality selector based on model
    aiModelSelector.addEventListener('change', () => {
        const model = aiModelSelector.value;
        
        // Models that support quality settings
        if (model === 'gpt-image-1' || model === 'gpt-image-1-mini') {
            aiQualitySelector.style.display = 'inline-block';
            aiQualitySelector.innerHTML = `
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
            `;
        } else if (model === 'dall-e-3') {
            aiQualitySelector.style.display = 'inline-block';
            aiQualitySelector.innerHTML = `
                <option value="standard">Standard</option>
                <option value="hd">HD</option>
            `;
        } else {
            aiQualitySelector.style.display = 'none';
        }
    });

  // Font controls
// Font controls
fontSelector.addEventListener('change', () => {
    editor.style.fontFamily = fontSelector.value;
    editor.focus();
});

    fontSize.addEventListener('input', () => {
        editor.style.fontSize = `${fontSize.value}px`;
    });

    // Text formatting
    boldButton.addEventListener('click', () => {
        document.execCommand('bold', false, null);
        editor.focus();
    });

    italicButton.addEventListener('click', () => {
        document.execCommand('italic', false, null);
        editor.focus();
    });

    underlineButton.addEventListener('click', () => {
        document.execCommand('underline', false, null);
        editor.focus();
    });

    strikeButton.addEventListener('click', () => {
        document.execCommand('strikeThrough', false, null);
        editor.focus();
    });

    // Alignment
    alignLeft.addEventListener('click', () => {
        document.execCommand('justifyLeft', false, null);
        editor.focus();
    });

    alignCenter.addEventListener('click', () => {
        document.execCommand('justifyCenter', false, null);
        editor.focus();
    });

    alignRight.addEventListener('click', () => {
        document.execCommand('justifyRight', false, null);
        editor.focus();
    });

    alignJustify.addEventListener('click', () => {
        document.execCommand('justifyFull', false, null);
        editor.focus();
    });

    // Undo/Redo
    undoButton.addEventListener('click', () => {
        document.execCommand('undo', false, null);
        editor.focus();
    });

    redoButton.addEventListener('click', () => {
        document.execCommand('redo', false, null);
        editor.focus();
    });

    // Keyboard shortcuts
    editor.addEventListener('keydown', (e) => {
        if (e.ctrlKey || e.metaKey) {
            switch(e.key.toLowerCase()) {
                case 'b':
                    e.preventDefault();
                    document.execCommand('bold', false, null);
                    break;
                case 'i':
                    e.preventDefault();
                    document.execCommand('italic', false, null);
                    break;
                case 'u':
                    e.preventDefault();
                    document.execCommand('underline', false, null);
                    break;
                case 's':
                    e.preventDefault();
                    saveDocument();
                    break;
            }
        }
    });

    // Add text block
    addTextBlock.addEventListener('click', () => {
        document.execCommand('insertHTML', false, '<p><br></p>');
        editor.focus();
    });

    // Add code block
    addCodeBlock.addEventListener('click', () => {
        const codeBlock = '<div class="code-block" contenteditable="true">// Enter code here...</div><p><br></p>';
        document.execCommand('insertHTML', false, codeBlock);
        editor.focus();
    });

    // Image upload
    uploadButton.addEventListener('click', () => {
        fileInput.click();
    });

    fileInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file && file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = (event) => {
                const img = `<div class="image-block"><img src="${event.target.result}" alt="Uploaded image"></div><p><br></p>`;
                document.execCommand('insertHTML', false, img);
                editor.focus();
            };
            reader.readAsDataURL(file);
        }
    });

    // Color picker
    colorButton.addEventListener('click', () => {
        colorPicker.click();
    });

    colorPicker.addEventListener('input', () => {
        document.execCommand('foreColor', false, colorPicker.value);
        editor.focus();
    });

    // Toggle width
    toggleWidth.addEventListener('click', () => {
        editor.classList.toggle('full-width');
    });

    // Copy selected text
    copySelectedBlocks.addEventListener('click', () => {
        document.execCommand('copy');
        quantumStatus.textContent = 'Text copied to quantum clipboard';
        setTimeout(() => {
            quantumStatus.textContent = 'Quantum circuit: Ready';
        }, 2000);
    });

    // Word count
    function updateWordCount() {
        const text = editor.innerText || editor.textContent;
        const words = text.trim().split(/\s+/).filter(w => w.length > 0);
        wordCount.textContent = `${words.length} words`;
    }

    editor.addEventListener('input', updateWordCount);

// AI Image Generation with Pollinations.ai
generateImage.addEventListener('click', async () => {
    const selectedText = window.getSelection().toString().trim();
    
    if (!selectedText) {
        quantumStatus.textContent = 'Select text to generate image from';
        setTimeout(() => {
            quantumStatus.textContent = 'Quantum circuit: Ready';
        }, 2000);
        return;
    }

    const selectedModel = aiModelSelector.value;
    const modelDisplay = aiModelSelector.options[aiModelSelector.selectedIndex].text;
    quantumStatus.textContent = `Generating with ${modelDisplay}...`;
    
    try {
        // Build Pollinations image URL
        const imageUrl = `https://image.pollinations.ai/prompt/${encodeURIComponent(selectedText)}?model=${selectedModel}&width=1024&height=1024&seed=${Math.floor(Math.random() * 1000000)}&nologo=true`;
        
        // Create image element
        const img = document.createElement('img');
        img.src = imageUrl;
        img.alt = selectedText;
        img.style.maxWidth = '100%';
        img.style.height = 'auto';
        
        // Wait for image to load to confirm it worked
        await new Promise((resolve, reject) => {
            img.onload = resolve;
            img.onerror = reject;
            // Timeout after 30 seconds
            setTimeout(() => reject(new Error('Image generation timeout')), 30000);
        });
        
        // Wrap the img element and insert it
        const wrapper = document.createElement('div');
        wrapper.className = 'image-block';
        wrapper.appendChild(img);
        wrapper.innerHTML += '<p><br></p>';
        
        // Insert at cursor position
        const selection = window.getSelection();
        if (selection.rangeCount > 0) {
            const range = selection.getRangeAt(0);
            range.deleteContents();
            range.insertNode(wrapper);
        } else {
            editor.appendChild(wrapper);
        }
        
        quantumStatus.textContent = 'Quantum image materialized ✨';
        setTimeout(() => {
            quantumStatus.textContent = 'Quantum circuit: Ready';
        }, 3000);
        
    } catch (err) {
        console.error('[INK REALM] AI Image generation error:', err);
        
        let errorMsg = '⚠️ Generation failed: ';
        
        if (err.message && err.message.includes('timeout')) {
            errorMsg += 'Request timed out - try again';
        } else if (err.message && err.message.includes('load')) {
            errorMsg += 'Image failed to load - check connection';
        } else {
            errorMsg += err.message || 'Unknown error';
        }
        
        quantumStatus.textContent = errorMsg;
        
        setTimeout(() => {
            quantumStatus.textContent = 'Quantum circuit: Ready';
        }, 5000);
    }
});

    // Save document (localStorage kept - useful for auto-recovery)
    function saveDocument() {
        const content = editor.innerHTML;
        localStorage.setItem('quantumDocument', content);
        quantumStatus.textContent = 'Document saved to quantum cloud';
        setTimeout(() => {
            quantumStatus.textContent = 'Quantum circuit: Ready';
        }, 2000);
    }

    saveButton.addEventListener('click', saveDocument);

    // Load saved document
    const savedDoc = localStorage.getItem('quantumDocument');
    if (savedDoc) {
        editor.innerHTML = savedDoc;
        updateWordCount();
        quantumStatus.textContent = 'Previous quantum state restored';
        setTimeout(() => {
            quantumStatus.textContent = 'Quantum circuit: Ready';
        }, 2000);
    }

    // Download TXT
    downloadTxt.addEventListener('click', () => {
        const text = editor.innerText || editor.textContent;
        
        if (!text.trim()) {
            quantumStatus.textContent = 'Quantum void detected: nothing to materialize';
            setTimeout(() => {
                quantumStatus.textContent = 'Quantum circuit: Ready';
            }, 2000);
            return;
        }

        const blob = new Blob([text], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'ink-realm-document.txt';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        quantumStatus.textContent = 'TXT materialized from quantum state';
        setTimeout(() => {
            quantumStatus.textContent = 'Quantum circuit: Ready';
        }, 2000);
    });

 downloadPdf.addEventListener('click', async () => {
    quantumStatus.textContent = 'Freezing quantum state to PDF...';
    
    try {
        const { jsPDF } = window.jspdf;
        // A4 size setup
        const doc = new jsPDF('p', 'pt', 'a4');
        const editorContent = document.getElementById('editor');

        // Use html method which uses html2canvas internally
        // scale serves as resolution adjustment
        await doc.html(editorContent, {
            callback: function(doc) {
                doc.save('ink-realm-deluxe.pdf');
                quantumStatus.textContent = 'PDF materialized successfully';
                setTimeout(() => {
                    quantumStatus.textContent = 'Quantum circuit: Ready';
                }, 2000);
            },
            x: 10,
            y: 10,
            width: 575, // Target width for A4
            windowWidth: editorContent.scrollWidth // Ensure it captures full width
        });
        
    } catch (error) {
        quantumStatus.textContent = 'Quantum collapse: PDF generation failed';
        console.error(error);
        setTimeout(() => {
            quantumStatus.textContent = 'Quantum circuit: Ready';
        }, 3000);
    }
});

    // Initial word count
    updateWordCount();
});
</script>

</body>
	</html>
