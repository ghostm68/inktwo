<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>INK REALM DELUXE | Word Processor with AI</title>

<link rel="apple-touch-icon" type="image/png" href="https://github.com/ghostm68/pantheon/raw/main/inkrealm.info.2025.png" />
<link rel="shortcut icon" href="./Images/favicon.ico" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://github.com/ghostm68/inktwo/tree/8cf86524a8f511774407e2218e7739c2af652e19/soviet-program">	
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="stylesheet" href="https://github.com/ghostm68/inktwo/tree/50a902956a1a3891d64dd40b781883197d405969/fonts">		
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet">
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=DejaVu+Sans:wght@400;700&family=DejaVu+Serif:wght@400;700&family=DejaVu+Sans+Mono&display=swap" rel="stylesheet">	
<!-- HANDWRITTEN/ARTISTIC -->
<link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light&display=swap" rel="stylesheet">
<link href="//fonts.cdnfonts.com/css/hardcore-pen" rel="stylesheet">

<!-- MODERN CODING -->
<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">

<!-- TYPEWRITER -->
<link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">

<!-- THE LEAGUE OF MOVEABLE TYPE -->
<link href="https://cdn.jsdelivr.net/npm/@league-of-moveable-type/junction@1.0.0/junction.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@league-of-moveable-type/league-gothic@1.0.0/league-gothic.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@league-of-moveable-type/chunk@1.0.0/chunk.min.css" rel="stylesheet">

<!-- VELVETYNE TYPE FOUNDRY -->
<link href="https://cdn.jsdelivr.net/gh/velvetyne/Millimetre@master/webfonts/Millimetre.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/gh/velvetyne/Steps-Mono@master/webfonts/StepsMono.css" rel="stylesheet">	
	<!-- ADOBE FONTS (via CDN) -->
<link href="https://fonts.cdnfonts.com/css/adobe-text-pro" rel="stylesheet">
<link href="https://fonts.cdnfonts.com/css/adobe-garamond-pro-2" rel="stylesheet">
	
<style>
/* Font faces */
@font-face {
  font-family: 'Ac437 Mindset-2y';
  src: url('soviet-program/Ac437_Mindset-2y.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 EuroPC CGA-2y';
  src: url('soviet-program/Ac437_EuroPC_CGA-2y.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 EuroPC CGA';
  src: url('soviet-program/Ac437_EuroPC_CGA.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 EuroPC Mono';
  src: url('soviet-program/Ac437_EuroPC_Mono.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 EverexME 5x8';
  src: url('soviet-program/Ac437_EverexME_5x8.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 EverexME 7x8';
  src: url('soviet-program/Ac437_EverexME_7x8.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 HP 150';
  src: url('soviet-program/Ac437_HP_150_re.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM 3270pc';
  src: url('soviet-program/Ac437_IBM_3270pc.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM BIOS-2x';
  src: url('soviet-program/Ac437_IBM_BIOS-2x.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM BIOS-2y';
  src: url('soviet-program/Ac437_IBM_BIOS-2y.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM BIOS';
  src: url('soviet-program/Ac437_IBM_BIOS.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM CGA-2y';
  src: url('soviet-program/Ac437_IBM_CGA-2y.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM CGA';
  src: url('soviet-program/Ac437_IBM_CGA.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM CGAthin-2y';
  src: url('soviet-program/Ac437_IBM_CGAthin-2y.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM CGAthin';
  src: url('soviet-program/Ac437_IBM_CGAthin.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM EGA 8x14-2x';
  src: url('soviet-program/Ac437_IBM_EGA_8x14-2x.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM EGA 8x14';
  src: url('soviet-program/Ac437_IBM_EGA_8x14.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM EGA 9x14-2x';
  src: url('soviet-program/Ac437_IBM_EGA_9x14-2x.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM EGA 9x14';
  src: url('soviet-program/Ac437_IBM_EGA_9x14.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM MDA';
  src: url('soviet-program/Ac437_IBM_MDA.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 Mindset-2x';
  src: url('soviet-program/Ac437_Mindset-2x.ttf') format('truetype');
}

@font-face {
  font-family: 'SovietProgram';
  src: url('soviet-program/SovietProgram.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'SovietProgram';
  src: url('soviet-program/SovietProgram-Bold.ttf') format('truetype');
  font-weight: bold;
  font-style: normal;
}

@font-face {
  font-family: 'SovietProgram';
  src: url('soviet-program/SovietProgram-Italic.ttf') format('truetype');
  font-weight: normal;
  font-style: italic;
}

/* If you have these variants, add them */
@font-face {
  font-family: 'SovietProgram Thin';
  src: url('soviet-program/SovietProgram-Thin.ttf') format('truetype');
  font-weight: 100;
  font-style: normal;
}

@font-face {
  font-family: 'SovietProgram Light';
  src: url('soviet-program/SovietProgram-Light.ttf') format('truetype');
  font-weight: 300;
  font-style: normal;
}

/* Additional fonts from inktwo/fonts repo */
@font-face {
  font-family: 'Perfect DOS VGA 437';
  src: url('fonts/Perfect DOS VGA 437.ttf') format('truetype');
}

@font-face {
  font-family: 'VT323';
  src: url('fonts/VT323-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Glass TTY VT220';
  src: url('fonts/glass-tty-vt220.ttf') format('truetype');
}

@font-face {
  font-family: 'IBM 3270';
  src: url('fonts/3270-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Courier Prime';
  src: url('fonts/CourierPrime-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Inconsolata';
  src: url('fonts/Inconsolata-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Roboto Mono';
  src: url('fonts/RobotoMono-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Source Code Pro';
  src: url('fonts/SourceCodePro-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Fixedsys Excelsior';
  src: url('fonts/FSEX300.ttf') format('truetype');
}

@font-face {
  font-family: 'Terminal';
  src: url('fonts/TerminusTTF-4.49.3.ttf') format('truetype');
}

@font-face {
  font-family: 'Berkeley Mono';
  src: url('fonts/BerkeleyMono-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Monocraft';
  src: url('fonts/Monocraft.ttf') format('truetype');
}

@font-face {
  font-family: 'IBM Plex Mono';
  src: url('fonts/IBMPlexMono-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Cascadia Code';
  src: url('fonts/CascadiaCode.ttf') format('truetype');
}

@font-face {
  font-family: 'Olivetti';
  src: url('fonts/olivetti-typewriter.ttf') format('truetype');
}
@font-face {
  font-family: 'Ac437 IBM DOS ISO9-2x';
  src: url('soviet-program/Ac437_IBM_DOS_ISO9-2x.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM DOS ISO9';
  src: url('soviet-program/Ac437_IBM_DOS_ISO9.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM EGA 8x8-2x';
  src: url('soviet-program/Ac437_IBM_EGA_8x8-2x.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM EGA 8x8';
  src: url('soviet-program/Ac437_IBM_EGA_8x8.ttf') format('truetype');
}

@font-face {
  font-family: 'Ac437 IBM CGA';
  src: url('soviet-program/Ac437_IBM_CGA.ttf') format('truetype');
}	
/* SWITZER FAMILY */
@font-face {
  font-family: 'Switzer';
  src: url('WEB/fonts/Switzer-Regular.ttf') format('truetype');
  font-weight: 400;
  font-style: normal;
}

@font-face {
  font-family: 'Switzer';
  src: url('WEB/fonts/Switzer-Bold.ttf') format('truetype');
  font-weight: 700;
  font-style: normal;
}

@font-face {
  font-family: 'Switzer';
  src: url('WEB/fonts/Switzer-Italic.ttf') format('truetype');
  font-weight: 400;
  font-style: italic;
}

@font-face {
  font-family: 'Switzer';
  src: url('WEB/fonts/Switzer-Light.ttf') format('truetype');
  font-weight: 300;
  font-style: normal;
}

@font-face {
  font-family: 'Switzer';
  src: url('WEB/fonts/Switzer-Medium.ttf') format('truetype');
  font-weight: 500;
  font-style: normal;
}	
/* EDITOR RESET */
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Noto Sans', sans-serif; background-color: #1a1a1a; color: #e0e0e0; overflow: hidden; }

/* Important: Force the editor to use the selected font */
#editor * {
    font-family: inherit !important;
}
#editor {
    font-family: 'SovietProgram', monospace; /* default */
}

::-webkit-scrollbar { width: 12px; }
::-webkit-scrollbar-track { background: #2a2a2a; }
::-webkit-scrollbar-thumb { background: #666; border-radius: 6px; }
::-webkit-scrollbar-thumb:hover { background: #888; }

#crt-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; opacity: 0.15; }
.scanline { width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2)); background-size: 100% 4px; position: absolute; pointer-events: none; animation: scanline 10s linear infinite; }
@keyframes scanline { 0% { transform: translateY(0); } 100% { transform: translateY(100%); } }
#crt-overlay::before { content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,0.3) 100%); pointer-events: none; }

#editor-wrapper { display: flex; flex-direction: column; height: 100dvh; width: 100vw; }

#toolbar { background-color: #2a2a2a; border-bottom: 2px solid #ff0000; padding: 12px 15px; display: flex; flex-wrap: wrap; gap: 8px; align-items: center; }
.toolbar-group { display: flex; gap: 4px; align-items: center; padding-right: 8px; border-right: 1px solid #444; }
.toolbar-group:last-child { border-right: none; }
#toolbar select { background-color: #333; color: #e0e0e0; border: 1px solid #555; padding: 6px 10px; border-radius: 4px; font-size: 13px; cursor: pointer; }
#toolbar input[type="number"] { width: 60px; background-color: #333; color: #e0e0e0; border: 1px solid #555; padding: 6px 8px; border-radius: 4px; font-size: 13px; }
#toolbar input[type="color"] { width: 40px; height: 32px; background-color: #333; border: 1px solid #555; border-radius: 4px; cursor: pointer; }
#toolbar button { background-color: #333; color: #e0e0e0; border: 1px solid #555; padding: 6px 10px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
#toolbar button:hover { background-color: #444; border-color: #666; }
#toolbar button:active { background-color: #555; }
#toolbar button .material-symbols-outlined { font-size: 20px; }

#editor-container { flex: 1; overflow: hidden; display: flex; justify-content: center; background-color: #1a1a1a; padding: 20px; }
#editor { width: 100%; max-width: 1200px; height: 100%; background-color: #222; background-image: url('https://raw.githubusercontent.com/ghostm68/pantheon/main/deluxe12.gif'); background-size: cover; background-attachment: fixed; color: #e0e0e0; border: 2px solid #ff0000; padding: 30px; font-family: 'SovietProgram', monospace; font-size: 16px; line-height: 1.6; overflow-y: auto; outline: none; box-shadow: 0 0 20px rgba(255, 0, 0, 0.3); }

#editor.full-width { max-width: 100%; }
#editor:focus { border-color: #ff3333; box-shadow: 0 0 30px rgba(255, 51, 51, 0.5); }

#status-bar { background-color: #2a2a2a; border-top: 2px solid #ff0000; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; font-size: 12px; color: #888; }
#quantum-status { font-style: italic; }
#word-count { font-weight: bold; color: #ff0000; }

.image-block { display: inline-block; max-width: 100%; margin: 10px 0; }
.image-block img { max-width: 100%; height: auto; border: 1px solid #555; }

.code-block { background-color: #1a1a1a; border: 1px solid #ff0000; border-radius: 4px; padding: 15px; margin: 10px 0; font-family: 'Ac437 IBM MDA', monospace; color: #00ff00; overflow-x: auto; }

#fileInput { display: none; }
#colorPicker { display: none; position: absolute; background-color: #333; border: 2px solid #ff0000; padding: 10px; border-radius: 4px; z-index: 1000; }

strong, b { font-weight: bold; }
em, i { font-style: italic; }
#editor b, #editor strong, #editor i, #editor em, #editor u, #editor s { color: inherit; }

.orb-container { display: inline-block; vertical-align: middle; margin-right: 15px; width: 50px; height: 50px; position: relative; }
.glitch-orb { width: 100%; height: 100%; fill: none; stroke-width: 3; overflow: visible; }
.orb-circle { stroke: #ff0033; }
.orb-triangle { stroke: #ffffff; }
.orb-container svg { animation: slow-spin 10s linear infinite; filter: drop-shadow(0 0 5px rgba(255, 0, 51, 0.4)); transition: all 0.2s ease; }
.orb-container:hover svg { animation: glitch-shake 0.3s cubic-bezier(.25, .46, .45, .94) both infinite; filter: drop-shadow(2px 2px 0px rgba(255, 255, 255, 0.5)) drop-shadow(-2px -2px 0px rgba(255, 0, 51, 0.8)); }
.orb-container:hover .orb-triangle { fill: rgba(255, 255, 255, 0.1); }
@keyframes slow-spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
@keyframes glitch-shake { 0% { transform: translate(0) rotate(0deg); } 20% { transform: translate(-2px, 2px) rotate(-5deg); } 40% { transform: translate(-2px, -2px) rotate(5deg); } 60% { transform: translate(2px, 2px) rotate(-5deg); } 80% { transform: translate(2px, -2px) rotate(5deg); } 100% { transform: translate(0) rotate(0deg); } }
</style>
</head>
<body>

<div id="crt-overlay">
  <div class="scanline"></div>
</div>

<div id="editor-wrapper">
    
    <div id="toolbar">
        <div class="orb-container">
            <svg class="glitch-orb" viewBox="0 0 100 100">
                <circle class="orb-circle" cx="50" cy="50" r="45" />
                <polygon class="orb-triangle" points="50,25 78,75 22,75" />
            </svg>
        </div>
        
        <div class="toolbar-group">
              <select id="fontSelector">
        <option value="SovietProgram">Soviet Program</option>
        <option value="SovietProgram Thin">Soviet Program Thin</option>
        <option value="SovietProgram Light">Soviet Program Light</option>
        <option value="Ac437 IBM CGA">Ac437 IBM CGA</option>
        <option value="Ac437 Mindset-2y">Ac437 Mindset-2y</option>
        <option value="Ac437 IBM EGA 8x14">Ac437 IBM EGA 8x14</option>
        <option value="Ac437 IBM EGA 9x14">Ac437 IBM EGA 9x14</option>
        <option value="Ac437 IBM MDA">Ac437 IBM MDA</option>
        <option value="Ac437 IBM BIOS">Ac437 IBM BIOS</option>
        <option value="Ac437 IBM CGA-2y">Ac437 IBM CGA-2y</option>
        <option value="Ac437 IBM CGAthin">Ac437 IBM CGAthin</option>
        <option value="Ac437 EuroPC CGA">Ac437 EuroPC CGA</option>
        <option value="Ac437 EuroPC CGA-2y">Ac437 EuroPC CGA-2y</option>
        <option value="Ac437 EuroPC Mono">Ac437 EuroPC Mono</option>
        <option value="Ac437 EverexME 5x8">Ac437 EverexME 5x8</option>
        <option value="Ac437 EverexME 7x8">Ac437 EverexME 7x8</option>
        <option value="Ac437 HP 150">Ac437 HP 150</option>
        <option value="Ac437 IBM DOS ISO9-2x">Ac437 IBM DOS ISO9-2x</option>
        <option value="Ac437 IBM DOS ISO9">Ac437 IBM DOS ISO9</option>
        <option value="Ac437 IBM EGA 8x14-2x">Ac437 IBM EGA 8x14-2x</option>
        <option value="Ac437 IBM EGA 8x8-2x">Ac437 IBM EGA 8x8-2x</option>
        <option value="Ac437 IBM EGA 8x8">Ac437 IBM EGA 8x8</option>
        <option value="Ac437 Mindset-2x">Ac437 Mindset-2x</option>
        <option value="Perfect DOS VGA 437">Perfect DOS VGA 437</option>
        <option value="VT323">VT323</option>
        <option value="Glass TTY VT220">Glass TTY VT220</option>
        <option value="IBM 3270">IBM 3270</option>
        <option value="Courier Prime">Courier Prime</option>
        <option value="Inconsolata">Inconsolata</option>
        <option value="Roboto Mono">Roboto Mono</option>
        <option value="Source Code Pro">Source Code Pro</option>
        <option value="Fixedsys Excelsior">Fixedsys Excelsior</option>
        <option value="Terminal">Terminal</option>
        <option value="Berkeley Mono">Berkeley Mono</option>
        <option value="Monocraft">Monocraft</option>
        <option value="IBM Plex Mono">IBM Plex Mono</option>
        <option value="Cascadia Code">Cascadia Code</option>
        <option value="Olivetti">Olivetti Typewriter</option>
        <option value="Noto Sans">Noto Sans</option>
		<option value="DejaVu Sans">DejaVu Sans</option>
       <option value="DejaVu Serif">DejaVu Serif</option>
       <option value="DejaVu Sans Mono">DejaVu Sans Mono</option>
		<option value="Switzer">Switzer</option>
		<!-- HANDWRITTEN/ARTISTIC -->
<option value="Permanent Marker">Permanent Marker</option>
<option value="Indie Flower">Indie Flower</option>
<option value="Shadows Into Light">Shadows Into Light</option>
<option value="Hardcore Pen">Hardcore Pen</option>

<!-- MODERN CODING -->
<option value="Fira Code">Fira Code</option>
<option value="JetBrains Mono">JetBrains Mono</option>
<option value="Space Mono">Space Mono</option>

<!-- TYPEWRITER -->
<option value="Special Elite">Special Elite</option>

<!-- THE LEAGUE / VELVETYNE -->
<option value="Junction">Junction</option>
<option value="League Gothic">League Gothic</option>
<option value="Chunk">Chunk</option>
<option value="Millimetre">Millimetre</option>
<option value="Steps Mono">Steps Mono</option>
	<!-- ADOBE SERIF -->
<option value="Adobe Text Pro">Adobe Text Pro</option>
<option value="Adobe Garamond Pro">Adobe Garamond Pro</option>	
    </select>
            <input type="number" id="fontSize" min="8" max="48" value="16">
        </div>

        <div class="toolbar-group">
            <button id="boldButton" title="Bold (Ctrl+B)"><span class="material-symbols-outlined">format_bold</span></button>
            <button id="italicButton" title="Italic (Ctrl+I)"><span class="material-symbols-outlined">format_italic</span></button>
            <button id="underlineButton" title="Underline (Ctrl+U)"><span class="material-symbols-outlined">format_underlined</span></button>
            <button id="strikeButton" title="Strikethrough"><span class="material-symbols-outlined">strikethrough_s</span></button>
        </div>

        <div class="toolbar-group">
            <button id="alignLeft" title="Align Left"><span class="material-symbols-outlined">format_align_left</span></button>
            <button id="alignCenter" title="Align Center"><span class="material-symbols-outlined">format_align_center</span></button>
            <button id="alignRight" title="Align Right"><span class="material-symbols-outlined">format_align_right</span></button>
            <button id="alignJustify" title="Justify"><span class="material-symbols-outlined">format_align_justify</span></button>
        </div>

        <div class="toolbar-group">
            <button id="undoButton" title="Undo (Ctrl+Z)"><span class="material-symbols-outlined">undo</span></button>
            <button id="redoButton" title="Redo (Ctrl+Y)"><span class="material-symbols-outlined">redo</span></button>
        </div>

        <div class="toolbar-group">
            <button id="addTextBlock" title="Add Text Block"><span class="material-symbols-outlined">text_fields</span></button>
            <button id="addCodeBlock" title="Add Code Block"><span class="material-symbols-outlined">code</span></button>
            <button id="uploadButton" title="Upload Image"><span class="material-symbols-outlined">upload</span></button>
        </div>

        <!-- STABLE HORDE IMAGE GENERATION -->
        <div class="toolbar-group">
            <select id="aiModelSelector" title="AI Image Model">
                <option value="Deliberate" selected>Deliberate (Fast)</option>
                <option value="SDXL 1.0">SDXL 1.0 (Quality)</option>
                <option value="Anything Diffusion">Anything Diffusion (Anime)</option>
                <option value="Realistic Vision">Realistic Vision</option>
                <option value="DreamShaper">DreamShaper</option>
            </select>
            <button id="generateImage" title="Generate AI Image via Stable Horde" style="background-color: #ff0000; border-color: #ff0000;">
                <span class="material-symbols-outlined">auto_awesome</span>
            </button>
        </div>

        <div class="toolbar-group">
            <button id="colorButton" title="Text Color"><span class="material-symbols-outlined">palette</span></button>
            <input type="color" id="colorPicker" value="#e0e0e0">
        </div>

        <div class="toolbar-group">
            <button id="toggleWidth" title="Toggle Width"><span class="material-symbols-outlined">open_in_full</span></button>
        </div>

        <div class="toolbar-group">
            <button id="copySelectedBlocks" title="Copy Text"><span class="material-symbols-outlined">content_copy</span></button>
        </div>
    </div>

    <div id="editor-container">
        <div id="editor" contenteditable="true" spellcheck="true">
            <p style="color: #888; font-style: italic;">
                Welcome to INK REALM DELUXE<br><br>
                
                <strong>Stable Horde Image Generation:</strong><br>
                • Select text describing the image you want<br>
                • Choose a model from the dropdown<br>
                • Click the ✨ button to generate via decentralized GPU network<br>
                • No API keys, no credits, completely free<br><br>
                
                <strong>Getting Started:</strong><br>
                • Select your favorite retro IBM font from the toolbar<br>
                • Use formatting buttons for Bold, Italic, Underline, Strikethrough<br>
                • Align your text: Left, Center, Right, or Justify<br><br>
                
                <strong>Adding Content:</strong><br>
                • Upload images from your computer<br>
                • Add code blocks for programming snippets<br>
                • Change text color with the palette button<br><br>
                
                <strong>Saving & Export:</strong><br>
                • Save - Auto-saves to your browser for recovery<br>
                • Download TXT - Plain text file<br>
                • Download PDF - Formatted document<br><br>
                
                <strong>Keyboard Shortcuts:</strong><br>
                • Ctrl+B = Bold | Ctrl+I = Italic | Ctrl+U = Underline<br>
                • Ctrl+Z = Undo | Ctrl+Y = Redo | Ctrl+S = Save<br><br>
                
                Start typing to replace this text...
            </p>
        </div>
    </div>

    <div id="status-bar">
        <div id="quantum-status">Quantum circuit: Ready</div>
        <div id="word-count">0 words</div>
        <div>
            <button id="saveButton" style="background: #555; border: none; padding: 6px 15px; border-radius: 4px; color: white; cursor: pointer; margin-right: 8px;">Save</button>
            <button id="downloadTxt" style="background: #666; border: none; padding: 6px 15px; border-radius: 4px; color: white; cursor: pointer; margin-right: 8px;">Download TXT</button>
            <button id="downloadPdf" style="background: #777; border: none; padding: 6px 15px; border-radius: 4px; color: white; cursor: pointer;">Download PDF</button>
        </div>
    </div>

</div>

<input type="file" id="fileInput" accept="image/*">

<script>
document.addEventListener('DOMContentLoaded', () => {
    const editor = document.getElementById('editor');
    const fontSelector = document.getElementById('fontSelector');
    const fontSize = document.getElementById('fontSize');
    const boldButton = document.getElementById('boldButton');
    const italicButton = document.getElementById('italicButton');
    const underlineButton = document.getElementById('underlineButton');
    const strikeButton = document.getElementById('strikeButton');
    const alignLeft = document.getElementById('alignLeft');
    const alignCenter = document.getElementById('alignCenter');
    const alignRight = document.getElementById('alignRight');
    const alignJustify = document.getElementById('alignJustify');
    const undoButton = document.getElementById('undoButton');
    const redoButton = document.getElementById('redoButton');
    const addTextBlock = document.getElementById('addTextBlock');
    const addCodeBlock = document.getElementById('addCodeBlock');
    const uploadButton = document.getElementById('uploadButton');
    const colorButton = document.getElementById('colorButton');
    const colorPicker = document.getElementById('colorPicker');
    const toggleWidth = document.getElementById('toggleWidth');
    const copySelectedBlocks = document.getElementById('copySelectedBlocks');
    const saveButton = document.getElementById('saveButton');
    const downloadPdf = document.getElementById('downloadPdf');
    const downloadTxt = document.getElementById('downloadTxt');
    const quantumStatus = document.getElementById('quantum-status');
    const wordCount = document.getElementById('word-count');
    const fileInput = document.getElementById('fileInput');
    const generateImage = document.getElementById('generateImage');
    const aiModelSelector = document.getElementById('aiModelSelector');

    // Font controls
    fontSelector.addEventListener('change', () => {
        editor.style.fontFamily = fontSelector.value;
        editor.focus();
    });

    fontSize.addEventListener('input', () => {
        editor.style.fontSize = `${fontSize.value}px`;
    });

    // Text formatting
    boldButton.addEventListener('click', () => {
        document.execCommand('bold', false, null);
        editor.focus();
    });

    italicButton.addEventListener('click', () => {
        document.execCommand('italic', false, null);
        editor.focus();
    });

    underlineButton.addEventListener('click', () => {
        document.execCommand('underline', false, null);
        editor.focus();
    });

    strikeButton.addEventListener('click', () => {
        document.execCommand('strikeThrough', false, null);
        editor.focus();
    });

    // Alignment
    alignLeft.addEventListener('click', () => {
        document.execCommand('justifyLeft', false, null);
        editor.focus();
    });

    alignCenter.addEventListener('click', () => {
        document.execCommand('justifyCenter', false, null);
        editor.focus();
    });

    alignRight.addEventListener('click', () => {
        document.execCommand('justifyRight', false, null);
        editor.focus();
    });

    alignJustify.addEventListener('click', () => {
        document.execCommand('justifyFull', false, null);
        editor.focus();
    });

    // Undo/Redo
    undoButton.addEventListener('click', () => {
        document.execCommand('undo', false, null);
        editor.focus();
    });

    redoButton.addEventListener('click', () => {
        document.execCommand('redo', false, null);
        editor.focus();
    });

    // Keyboard shortcuts
    editor.addEventListener('keydown', (e) => {
        if (e.ctrlKey || e.metaKey) {
            switch(e.key.toLowerCase()) {
                case 'b':
                    e.preventDefault();
                    document.execCommand('bold', false, null);
                    break;
                case 'i':
                    e.preventDefault();
                    document.execCommand('italic', false, null);
                    break;
                case 'u':
                    e.preventDefault();
                    document.execCommand('underline', false, null);
                    break;
                case 's':
                    e.preventDefault();
                    saveDocument();
                    break;
            }
        }
    });

    // Add text block
    addTextBlock.addEventListener('click', () => {
        document.execCommand('insertHTML', false, '<p><br></p>');
        editor.focus();
    });

    // Add code block
    addCodeBlock.addEventListener('click', () => {
        const codeBlock = '<div class="code-block" contenteditable="true">// Enter code here...</div><p><br></p>';
        document.execCommand('insertHTML', false, codeBlock);
        editor.focus();
    });

    // Image upload
    uploadButton.addEventListener('click', () => {
        fileInput.click();
    });

    fileInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file && file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = (event) => {
                const img = `<div class="image-block"><img src="${event.target.result}" alt="Uploaded image"></div><p><br></p>`;
                document.execCommand('insertHTML', false, img);
                editor.focus();
            };
            reader.readAsDataURL(file);
        }
    });

    // Color picker
    colorButton.addEventListener('click', () => {
        colorPicker.click();
    });

    colorPicker.addEventListener('input', () => {
        document.execCommand('foreColor', false, colorPicker.value);
        editor.focus();
    });

    // Toggle width
    toggleWidth.addEventListener('click', () => {
        editor.classList.toggle('full-width');
    });

    // Copy selected text
    copySelectedBlocks.addEventListener('click', () => {
        document.execCommand('copy');
        quantumStatus.textContent = 'Text copied to quantum clipboard';
        setTimeout(() => {
            quantumStatus.textContent = 'Quantum circuit: Ready';
        }, 2000);
    });

    // Word count
    function updateWordCount() {
        const text = editor.innerText || editor.textContent;
        const words = text.trim().split(/\s+/).filter(w => w.length > 0);
        wordCount.textContent = `${words.length} words`;
    }

    editor.addEventListener('input', updateWordCount);

    // STABLE HORDE IMAGE GENERATION
 // STABLE HORDE IMAGE GENERATION WITH POLLINATIONS FALLBACK
generateImage.addEventListener('click', async () => {
    const selectedText = window.getSelection().toString().trim();
    
    if (!selectedText) {
        quantumStatus.textContent = 'Select text to generate image from';
        setTimeout(() => quantumStatus.textContent = 'Quantum circuit: Ready', 2000);
        return;
    }

    const selectedModel = aiModelSelector.value;
    quantumStatus.textContent = 'Connecting to Stable Horde...';
    
    // Try Horde first
    try {
        const response = await fetch('https://stablehorde.net/api/v2/generate/async', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'apikey': '0000000000'
            },
            body: JSON.stringify({
                prompt: selectedText,
                params: {
                    width: 512,
                    height: 512,
                    steps: 25,
                    cfg_scale: 7.5,
                    sampler_name: "k_euler_a",
                    karras: true,
                    post_processing: []
                },
                nsfw: false,
                censor_nsfw: true,
                trusted_workers: false,
                models: [selectedModel]
            })
        });

        if (!response.ok) {
            const error = await response.json();
            throw new Error(error.message || 'Horde rejected request');
        }

        const data = await response.json();
        const jobId = data.id;

        // Poll with timeout check
        let attempts = 0;
        const maxAttempts = 30; // 60 seconds max wait
        
        while (attempts < maxAttempts) {
            await new Promise(r => setTimeout(r, 2000));
            
            const statusRes = await fetch(`https://stablehorde.net/api/v2/generate/check/${jobId}`);
            const status = await statusRes.json();
            
            // Abort if wait is ridiculous
            if (status.wait_time > 120) {
                throw new Error('Horde overloaded');
            }
            
            quantumStatus.textContent = `Generating... ${status.wait_time ? Math.round(status.wait_time) + 's' : 'processing'}`;
            
            if (status.done) {
                const resultRes = await fetch(`https://stablehorde.net/api/v2/generate/status/${jobId}`);
                const result = await resultRes.json();
                
                if (result.generations && result.generations[0]) {
                    insertImage(result.generations[0].img, selectedText);
                    return;
                }
            }
            attempts++;
        }
        
        throw new Error('Generation timeout');
        
    } catch (hordeError) {
        // FALLBACK TO POLLINATIONS
        console.log('Horde failed, trying Pollinations...', hordeError);
        quantumStatus.textContent = 'Horde busy - trying Pollinations...';
        
        try {
            // Map Horde models to Pollinations equivalents
            const pollinationsModels = {
                'Deliberate': 'flux',
                'SDXL 1.0': 'flux',
                'Anything Diffusion': 'flux-anime',
                'Realistic Vision': 'flux-realism',
                'DreamShaper': 'flux'
            };
            
            const pollModel = pollinationsModels[selectedModel] || 'flux';
            const imageUrl = `https://image.pollinations.ai/prompt/${encodeURIComponent(selectedText)}?model=${pollModel}&width=512&height=512&seed=${Math.floor(Math.random() * 1000000)}&nologo=true`;
            
            // Test load the image
            await new Promise((resolve, reject) => {
                const testImg = new Image();
                testImg.onload = resolve;
                testImg.onerror = reject;
                testImg.src = imageUrl;
                setTimeout(() => reject(new Error('Pollinations timeout')), 30000);
            });
            
            insertImage(imageUrl, selectedText);
            quantumStatus.textContent = 'Image materialized via mirror ✨';
            setTimeout(() => quantumStatus.textContent = 'Quantum circuit: Ready', 3000);
            
        } catch (pollError) {
            quantumStatus.textContent = '⚠️ All generation sources busy - try again later';
            setTimeout(() => quantumStatus.textContent = 'Quantum circuit: Ready', 5000);
        }
    }
});

// Helper function to insert image
function insertImage(imageUrl, altText) {
    const wrapper = document.createElement('div');
    wrapper.className = 'image-block';
    wrapper.innerHTML = `<img src="${imageUrl}" alt="${altText.replace(/"/g, '&quot;')}" style="max-width:100%;height:auto;border:2px solid #ff0000;box-shadow:0 0 10px rgba(255,0,0,0.3);"><p><br></p>`;
    
    const selection = window.getSelection();
    if (selection.rangeCount > 0) {
        const range = selection.getRangeAt(0);
        range.deleteContents();
        range.insertNode(wrapper);
    } else {
        editor.appendChild(wrapper);
    }
}

    // Save document
    function saveDocument() {
        const content = editor.innerHTML;
        localStorage.setItem('quantumDocument', content);
        quantumStatus.textContent = 'Document saved to quantum cloud';
        setTimeout(() => {
            quantumStatus.textContent = 'Quantum circuit: Ready';
        }, 2000);
    }

    saveButton.addEventListener('click', saveDocument);

    // Load saved document
    const savedDoc = localStorage.getItem('quantumDocument');
    if (savedDoc) {
        editor.innerHTML = savedDoc;
        updateWordCount();
        quantumStatus.textContent = 'Previous quantum state restored';
        setTimeout(() => {
            quantumStatus.textContent = 'Quantum circuit: Ready';
        }, 2000);
    }

    // Download TXT
    downloadTxt.addEventListener('click', () => {
        const text = editor.innerText || editor.textContent;
        
        if (!text.trim()) {
            quantumStatus.textContent = 'Quantum void detected: nothing to materialize';
            setTimeout(() => {
                quantumStatus.textContent = 'Quantum circuit: Ready';
            }, 2000);
            return;
        }

        const blob = new Blob([text], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'ink-realm-document.txt';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        quantumStatus.textContent = 'TXT materialized from quantum state';
        setTimeout(() => {
            quantumStatus.textContent = 'Quantum circuit: Ready';
        }, 2000);
    });

    // Download PDF
    downloadPdf.addEventListener('click', async () => {
        quantumStatus.textContent = 'Freezing quantum state to PDF...';
        
        try {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('p', 'pt', 'a4');
            const editorContent = document.getElementById('editor');

            await doc.html(editorContent, {
                callback: function(doc) {
                    doc.save('ink-realm-deluxe.pdf');
                    quantumStatus.textContent = 'PDF materialized successfully';
                    setTimeout(() => {
                        quantumStatus.textContent = 'Quantum circuit: Ready';
                    }, 2000);
                },
                x: 10,
                y: 10,
                width: 575,
                windowWidth: editorContent.scrollWidth
            });
            
        } catch (error) {
            quantumStatus.textContent = 'Quantum collapse: PDF generation failed';
            console.error(error);
            setTimeout(() => {
                quantumStatus.textContent = 'Quantum circuit: Ready';
            }, 3000);
        }
    });

    // Initial word count
    updateWordCount();
});
</script>

</body>
</html>
