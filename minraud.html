<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=1024">
<meta name="author" content="INKREALM-NEXUS">
<meta name="robots" content="index, follow">

<!-- PRIMARY META TAGS -->
<title>MINRAUD | The Reality Studio</title>
<meta name="description" content="A neural typewriter for the Interzone. Intercepting Amazon Nova AI to break the control system. Experimental text generation for the Nova Mob.">
<meta name="keywords" content="William S. Burroughs, Cut-up technique, Cut-up engine, Amazon Nova AI, experimental writing, The Reality Studio, Minraud, digital text generator, Puter.js, subversion, neural interface">
<!-- NEURAL SOVEREIGNTY PROTOCOL (BRAGGING RIGHTS) -->
<meta name="x-neural-status" content="Occupied">
<meta name="x-intercept-node" content="Llama-3.2-1B-Local-Edge">
<meta name="x-reality-studio" content="Stormed and Retaken">
<meta name="x-control-system" content="Bypassed">
<meta name="x-pioneer-status" content="First known deployment of browser-side neural inference for Interzone prose">

<!-- SEO HARDENING -->
<meta name="description" content="A sovereign neural writing terminal. Running on-device AI for total privacy. The Soft Machine is online. No keys, no cloud, no heat.">
<meta name="keywords" content="Burroughs, Cut-up, WebLLM, Local AI, WebGPU, Neural Interface, Interzone, Minraud, Sovereign Writing">

<!-- THE GHOST IN THE HEADER -->
<meta name="author" content="INKREALM-NEXUS // The First Edge-Intelligence Pioneer">
<meta name="x-word-virus" content="Active">
<!-- OPEN GRAPH / DISCORD / FACEBOOK -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://inkrealm.info">
<meta property="og:title" content="MINRAUD | Neural Writing Interface">
<meta property="og:description" content="TRANSIMISSION RECEIVED: With your help we can occupy The Reality Studio and retake their universe of Fear Death and Monopoly. The Soft Machine is now online.">
<meta property="og:image" content="https://raw.githubusercontent.com/ghostm68/pantheon/main/nova312.gif">
<meta property="og:site_name" content="MINRAUD">

<!-- TWITTER (X) -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="MINRAUD | Storm The Reality Studio">
<meta name="twitter:description" content="A neural interface for the modern author. Powered by Amazon Nova. Dedicated to the destruction of the Control System.">
<meta name="twitter:image" content="https://raw.githubusercontent.com/ghostm68/pantheon/main/nova312.gif">

<!-- MOBILE / THEME -->
<meta name="theme-color" content="#0a0a0a">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="MINRAUD">

<!-- FONTS -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nova+Flat&display=swap" rel="stylesheet">
    
    <title>MINRAUD</title>
    
    <!-- Axios for reliable dictionary fetching -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
/* === DEFINE VARIABLES FIRST === */
:root {
    --red: #ff0033;
    --black: #0a0a0a;
}

/* === NOW selection can use them === */
::selection {
    background: var(--red);
    color: var(--black);
    text-shadow: none;
}
</style>
    <style>
        
        /* --- CORE LAYOUT --- */
        body {
            background: #0a0a0a;
            color: #f0f0f0;
            font-family: "Nova Flat", system-ui, 'Courier New', monospace;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .main-content {
            padding: 0.8rem;
            flex: 1;
        }

        .container {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 0.6rem;
            max-width: 1800px;
            margin: 0 auto;
            min-height: 80vh;
        }

        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
                gap: 0.6rem;
            }
        }

        /* --- SPLASH SCREEN --- */
      #splash-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #000;
    
    /* CHANGED: Massive number to cover the QR code */
    z-index: 100000; 
    
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    transition: opacity 1s ease-in-out, visibility 1s;
    overflow: hidden;
}
        
        /* NOVA EXPRESS CUBE BACKGROUND */
        .nova-cube {
            position: absolute;
            width: 800px;
            height: 800px;
            background-image: url('https://raw.githubusercontent.com/ghostm68/pantheon/main/nova312.gif');
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            animation: cube-rotate 20s linear infinite, cube-glow 3s ease-in-out infinite;
            opacity: 0.7;
            z-index: 1;
            filter: drop-shadow(0 0 40px rgba(255, 0, 51, 0.6));
        }
        
        @keyframes cube-rotate {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.05); }
            100% { transform: rotate(360deg) scale(1); }
        }
        
        @keyframes cube-glow {
            0%, 100% { 
                filter: drop-shadow(0 0 40px rgba(255, 0, 51, 0.6));
                opacity: 0.7;
            }
            50% { 
                filter: drop-shadow(0 0 60px rgba(255, 0, 51, 0.9));
                opacity: 0.9;
            }
        }
        
       /* ----------  CRT OVERLAY (REPLACES OLD BODY::BEFORE)  ---------- */
/* ----------  CRT OVERLAY SYSTEM  ---------- */

/* 1. The Container & Vignette (Dark Corners) */
#crt-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none; /* CRITICAL: Lets you click buttons underneath */
    
    /* LAYER: 100001
       Must be higher than Splash Screen (100000) 
       so the scanlines look like they are on the physical screen glass. */
    z-index: 100001; 
    
    /* Vignette Gradient */
    background: radial-gradient(
        circle, 
        rgba(0,0,0,0) 60%, 
        rgba(0,0,0,0.4) 90%, 
        rgba(0,0,0,0.8) 100%
    );
}

/* 2. The Moving Lines */
.scanline {
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0;
    top: 0;
    
    /* The horizontal line pattern */
    background: linear-gradient(
        to bottom, 
        rgba(255,255,255,0) 50%, 
        rgba(0,0,0,0.1) 50%, 
        rgba(0,0,0,0.2) 55%
    );
    background-size: 100% 4px; /* Thickness of lines */
    
    /* Animation: Moves down (scanline) + Flashes (flicker) */
    animation: scanline 10s linear infinite, flicker 0.15s infinite;
}

/* 3. Animation Logic */
@keyframes scanline {
    0% { background-position: 0 0; }
    100% { background-position: 0 100%; }
}

@keyframes flicker {
    /* Low opacity to keep text readable */
    0% { opacity: 0.15; }
    50% { opacity: 0.25; }
    100% { opacity: 0.15; }
}

/* REMOVE THE OLD SCANLINE TO PREVENT CLASHING */
body::before {
    display: none;
}
        
        #splash-screen.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .splash-btn {
            padding: 15px 40px;
            font-family: 'Courier New', monospace;
            font-size: 1.5rem;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #ff0033;
            color: #ff0033;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 5px;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
            margin-top: 20px;
            position: relative;
            z-index: 10;
            box-shadow: 0 0 30px rgba(255, 0, 51, 0.3);
        }

        .splash-btn:hover {
            background: #ff0033;
            color: #000;
            box-shadow: 0 0 40px #ff0033;
            letter-spacing: 8px;
        }
        
        @media (max-width: 768px) {
            .nova-cube {
                width: 200px;
                height: 200px;
            }
            .splash-btn {
                font-size: 0.9rem;
                padding: 10px 20px;
                letter-spacing: 2px;
                max-width: 80%;
                text-align: center;
            }
            .splash-btn:hover {
                letter-spacing: 3px;
            }
            #splash-screen {
                padding: 1rem;
            }
        }

        /* --- TYPOGRAPHY & WATER EFFECT --- */
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.3rem;
            text-align: center;
            letter-spacing: 2px;
            text-transform: uppercase;
            position: relative;
            
            /* Transparent Red Tint */
            color: rgba(255, 0, 51, 0.1); 
            
            /* RED LIQUID GIF */
            background-image: url('https://github.com/ghostm68/pantheon/raw/main/inkrealmliquidhermes934.gif');
            background-size: cover;
            
            /* Clip the liquid to the text */
            -webkit-background-clip: text;
            background-clip: text;
            
            /* Flow Animation */
            animation: water-flow 30s linear infinite;
            
            /* NEON RED GLOW */
            text-shadow: 0 0 20px rgba(255, 0, 51, 0.8), 0 0 40px rgba(61, 2, 10, 0.5);
        }

        @keyframes water-flow {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }

        .subtitle {
            font-style: italic;
            color: #aaa;
            margin-bottom: 0.8rem;
            text-align: center;
            font-size: 0.85rem;
        }

        /* --- GLITCH ORB --- */
        .orb-container {
            display: inline-block;
            vertical-align: middle;
            margin-right: 15px;
            width: 50px;
            height: 50px;
            position: relative;
        }

        .glitch-orb {
            width: 100%;
            height: 100%;
            fill: none;
            stroke-width: 3;
            overflow: visible;
        }

        .orb-circle { stroke: #ff0033; }
        .orb-triangle { stroke: #ffffff; }

        .orb-container svg {
            animation: slow-spin 10s linear infinite;
            filter: drop-shadow(0 0 5px rgba(255, 0, 51, 0.4));
            transition: all 0.2s ease;
        }

        .orb-container:hover svg {
            animation: glitch-shake 0.3s cubic-bezier(.25, .46, .45, .94) both infinite;
            filter: drop-shadow(2px 2px 0px rgba(255, 255, 255, 0.5)) 
                    drop-shadow(-2px -2px 0px rgba(255, 0, 51, 0.8));
        }

        .orb-container:hover .orb-triangle {
            fill: rgba(255, 255, 255, 0.1);
        }

        @keyframes slow-spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes glitch-shake {
            0% { transform: translate(0) rotate(0deg); }
            20% { transform: translate(-2px, 2px) rotate(-5deg); }
            40% { transform: translate(-2px, -2px) rotate(5deg); }
            60% { transform: translate(2px, 2px) rotate(-5deg); }
            80% { transform: translate(2px, -2px) rotate(5deg); }
            100% { transform: translate(0) rotate(0deg); }
        }

        /* --- PANELS --- */
        .panel {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 6px;
            padding: 0.8rem;
            display: flex;
            flex-direction: column;
        }
        
        .panel h2 {
            margin-top: 0;
            font-size: 1.1rem;
            color: #eee;
            border-bottom: 1px solid #333;
            padding-bottom: 0.4rem;
            margin-bottom: 0.6rem;
        }

        /* --- RED ACCENT FORM ELEMENTS --- */
        select {
            width: 100%;
            padding: 0.4rem;
            background: #1a1a1a;
            color: #eee;
            border: 1px solid #555;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-bottom: 0.5rem;
            outline: none;
            cursor: pointer;
            scrollbar-color: #ff0033 #1a1a1a;
            scrollbar-width: thin;
        }

        select:focus {
            border-color: #ff0033;
            box-shadow: 0 0 5px rgba(255, 0, 51, 0.3);
        }

        option {
            background-color: #0a0a0a;
            color: #eee;
            padding: 10px;
        }
        
        option:checked, option:hover {
            background-color: #ff0033 !important; 
            color: #fff !important;
        }

        #notepad, #prompt {
            width: 100%;
            background: #0a0a0a;
            color: #f0f0f0;
            border: 1px solid #444;
            border-radius: 4px;
            padding: 0.5rem;
            font-size: 0.85rem;
            line-height: 1.4;
            resize: none;
            font-family: 'Courier New', monospace;
        }
        
        #notepad:focus, #prompt:focus {
            border-color: #ff0033;
            outline: none;
        }
        
        button {
            background: #222;
            border: 1px solid #444;
            color: #aaa;
            cursor: pointer;
            transition: all 0.3s;
            padding: 0.4rem;
            border-radius: 4px;
        }
        
        button:hover {
            border-color: #ff0033;
            color: #ff0033;
        }
        
        #generateButton {
            width: 100%;
            padding: 0.8rem;
            background: #3d020a;
            color: #ff0033;
            border: 1px solid #ff0033;
            font-size: 0.9rem;
            font-weight: bold;
            margin-top: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        #generateButton:hover { 
            background: #ff0033; 
            color: #000;
            box-shadow: 0 0 15px #ff0033;
        }

        /* RED SLIDER */
        #creativity {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: linear-gradient(to right, #3d020a, #ff0033);
            outline: none;
            border-radius: 3px;
            margin: 0.4rem 0;
        }
        
        #creativity::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: #fff;
            border: 2px solid #ff0033;
            border-radius: 50%;
            cursor: pointer;
        }

        /* --- DICTIONARY STYLES --- */
       .dictionary-result {
            background: #0a0a0a;
            border: 1px solid #444;
            border-radius: 4px;
            padding: 0.5rem;
            overflow-y: auto;
            flex-grow: 1;
            font-size: 0.8rem;
            color: #ccc;
            /* Keeps characters distinct (more robotic/terminal feel) */
            font-variant-ligatures: none; 
        }

        /* NEW: Ensures English and Russian text align perfectly on the same line */
        .dictionary-result span {
            vertical-align: middle;
        }
        #dictionary-search {
            width: 100%;
            padding: 0.4rem;
            background: #0a0a0a;
            color: #fff;
            border: 1px solid #444;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-bottom: 0.5rem;
        }

        #dictionary-search:focus {
            border-color: #ff0033;
            outline: none;
        }

        .word-title {
            color: #ff0033;
            font-size: 1.1rem;
            margin: 0;
            font-weight: bold;
        }
        
        .phonetic {
            color: #777;
            font-size: 0.75rem;
        }
        
        .part-of-speech {
            color: #ff0033;
            font-size: 0.75rem;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .synonym-tag {
            display: inline-block;
            background: #3d020a;
            color: #ff6666;
            padding: 0.2rem 0.4rem;
            margin: 0.2rem;
            border-radius: 2px;
            font-size: 0.7rem;
            cursor: pointer;
            border: 1px solid #ff0033;
            transition: all 0.2s;
        }

        .synonym-tag:hover {
            background: #ff0033;
            color: #000;
        }
        
        .loading, .no-results {
            text-align: center;
            padding: 1rem;
            color: #666;
            font-size: 0.8rem;
        }

        .story-output {
            flex: 1;
            background: #0a0a0a;
            border: 1px solid #444;
            border-radius: 4px;
            padding: 0.8rem;
            white-space: pre-wrap;
            overflow-y: auto;
            min-height: 320px;
            color: #ccc;
        }

        .controls-row {
            display: flex;
            gap: 0.3rem;
            margin-top: 0.5rem;
        }

        .controls-row button {
            flex: 1;
        }

        /* --- FOOTER --- */
        footer {
            margin-top: 2rem;
            padding: 1rem;
            border-top: 1px solid #333;
            text-align: center;
            font-size: 0.7rem;
            color: #555;
            background: #0a0a0a;
        }

        footer a {
            color: #ff0033;
            text-decoration: none;
        }

        footer a:hover {
            text-shadow: 0 0 5px #ff0033;
        }

        .api-status { 
            margin-top: 0.8rem; 
            font-size: 0.75rem; 
            color: #666; 
            text-align: center; 
        }
        
        .generating { 
            animation: pulse 1.5s infinite; 
            color: #ff0033; 
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .error-detail {
            font-size: 0.7rem;
            color: #ff6666;
            margin-top: 0.3rem;
        }

        #notepad { min-height: 280px; }
        #prompt { min-height: 120px; }
        /* --- NOVA EXPRESS MODULES --- */
.mixer-controls {
    display: grid; 
    grid-template-columns: 1fr 1fr; 
    gap: 8px; 
    margin: 10px 0;
}

.module-btn {
    background: #111;
    border: 1px solid #333;
    color: #888;
    padding: 10px;
    cursor: pointer;
    font-family: "Nova Flat", monospace; /* Matches your font */
    text-align: left;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.75rem;
    text-transform: uppercase;
}

.module-btn:hover {
    background: #ff0033; /* RED HOVER */
    border-color: #ff0033;
    color: #000; /* BLACK TEXT ON RED */
    box-shadow: 0 0 10px rgba(255, 0, 51, 0.4);
}

.module-btn:active {
    background: #fff;
    color: #000;
}

/* The Icons - strictly text based now */
.express-icon { 
    font-size: 1.2rem; 
    font-weight: bold;
    color: #ff0033; /* Start Red */
}

/* When button is hovered, icon turns black */
.module-btn:hover .express-icon {
    color: #000;
}

/* INPUTS FOR THE MACHINE */
#mixerSource {
    width: 100%;
    height: 60px; 
    font-family: 'Courier New', monospace; 
    font-size: 0.8rem; 
    background: #050505; 
    color: #666; 
    border: 1px dashed #333;
    resize: none;
    padding: 5px;
    box-sizing: border-box; /* Fixes padding issues */
}

#mixerOutput {
    width: 100%;
    height: 100px; 
    font-family: 'Courier New', monospace;
    font-size: 0.8rem;
    background: #050505;
    color: #f0f0f0; /* White Text */
    border: 1px solid #ff0033; /* Red Border */
    resize: none;
    padding: 5px;
    box-sizing: border-box;
}

#mixerOutput::placeholder { color: #ff0033; opacity: 0.5; }

/* TINY BUTTONS */
.mini-btn {
    font-size: 0.65rem; 
    padding: 4px; 
    background: #1a1a1a; 
    border: 1px solid #333; 
    color: #666;
}
.mini-btn:hover {
    color: #ff0033;
    border-color: #ff0033;
}
        /* --- QR CODE INTERACTION --- */
#ton-qr {
    width: 60px; /* Compact default size */
    border: 1px solid #ff0033;
    padding: 2px;
    background: #000;
    cursor: zoom-in; /* Shows magnifying glass */
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Mechanical bounce */
    box-shadow: 0 0 10px rgba(255, 0, 51, 0.2);
    position: relative; 
    z-index: 10001; /* Sits above standard text */
}

#ton-qr:hover {
    box-shadow: 0 0 20px rgba(255, 0, 51, 0.6);
    border-color: #fff;
}

/* THE EXPANDED STATE (Toggled by JS) */
#ton-qr.expanded {
    transform: scale(3.5); /* 3.5x Size */
    z-index: 999999; /* Must be higher than CRT overlay (9999) */
    border-color: #ff0033;
    box-shadow: 0 0 100px rgba(0, 0, 0, 0.9), 0 0 50px rgba(255, 0, 51, 0.8);
    cursor: zoom-out;
}
    /* CSS for France 24 Ticker - Add to your existing style block */
#france24-ticker-container {
    width: 100%;
    background: #111;
    border-top: 2px solid #ff0033;
    border-bottom: 2px solid #ff0033;
    margin: 1rem 0;
    padding: 0.5rem;
    font-family: 'Courier New', monospace;
    overflow: hidden;
    position: relative;
}

#france24-ticker-heading {
    color: #fff;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 0.3rem;
    text-align: center;
}

.france24-ticker-wrapper {
    width: 100%;
    overflow: hidden;
    white-space: nowrap;
    position: relative;
}

#france24-ticker {
    display: inline-block;
    white-space: nowrap;
    animation: ticker-scroll 60s linear infinite;
    padding-left: 100%;
    /* Animation will be controlled by JS */
}

#france24-ticker.paused {
    animation-play-state: paused;
}

#france24-ticker a {
    color: #aaa;
    text-decoration: none;
    margin: 0 2rem;
    font-size: 0.85rem;
    border-left: 1px solid #333;
    padding-left: 1rem;
    transition: color 0.3s;
}

#france24-ticker a:hover {
    color: #ff0033;
    text-shadow: 0 0 8px rgba(255, 0, 51, 0.7);
}

#france24-ticker a:first-child {
    border-left: none;
    padding-left: 0;
}

/* Ticker scroll animation */
@keyframes ticker-scroll {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(-100%);
    }
}  
/* CSS for ScienceDaily Ticker - Slower Red */
#sciencedaily-ticker-container {
    width: 100%;
    background: #0c0c0c;
    border-top: 1px solid #222;
    border-bottom: 1px solid #222;
    margin: 0 0 2rem 0;
    padding: 0.5rem;
    font-family: 'Courier New', monospace;
    overflow: hidden;
}

#sciencedaily-ticker-heading {
    color: #777;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 0.5rem;
    text-align: center;
    font-weight: normal;
}

.sciencedaily-ticker-wrapper {
    width: 100%;
    overflow: hidden;
    white-space: nowrap;
    position: relative;
}

#sciencedaily-ticker {
    display: inline-block;
    white-space: nowrap;
    animation: ticker-scroll-sd 288s linear infinite; 
    padding-left: 100%;
}

#sciencedaily-ticker.paused {
    animation-play-state: paused;
}

#sciencedaily-ticker a {
    color: #ff0033 !important; /* RED TEXT */
    text-decoration: none;
    margin: 0 3rem;
    font-size: 0.9rem;
    border-left: 1px solid #333;
    padding-left: 1.5rem;
    font-weight: bold;
    opacity: 0.9;
    transition: all 0.4s;
}

#sciencedaily-ticker a:hover {
    color: #fff !important;
    text-shadow: 0 0 12px rgba(255, 0, 51, 0.9); /* Red glow on hover */
    opacity: 1;
}

@keyframes ticker-scroll-sd {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-100%);
  }
}

    </style>
<style>
    /* --- NEW: SONIC INTERFACE STYLES --- */
#sonic-strip {
    display: none; /* Hidden until Sonic model selected */
    border: 1px solid #ff0033;
    border-radius: 4px;
    padding: 10px;
    margin-bottom: 10px;
    background: #050505;
    text-align: center;
    box-shadow: inset 0 0 10px rgba(255, 0, 51, 0.1);
}

#sonic-strip button {
    font-size: 1.4rem;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    margin: 0 8px;
    background: #111;
    transition: all 0.2s;
}

#sonic-strip button:active { transform: scale(0.95); }

#sonic-status {
    display: block;
    margin-top: 8px;
    font-family: 'Courier New', monospace;
    font-size: 0.65rem;
    color: #ff0033;
    letter-spacing: 2px;
    text-transform: uppercase;
    animation: pulse 2s infinite;
}

/* Optional: Make the Nova 2 options in the dropdown stand out */
option.nova2-opt { color: #ff0033; font-weight: bold; }
</style>
    <style>
        /* ======================================================
   CUSTOM DROPDOWN (RED THEME)
====================================================== */

.custom-select-container {
    position: relative;
    width: 100%;
    margin-bottom: 0.8rem;
}

/* Hide the original select but keep it functional */
.custom-select-container select {
    display: none;
}

/* The custom display button */
.select-selected {
    background-color: #0a0a0a;
    border: 1px solid #333;
    color: #ff0033;
    padding: 10px 16px;
    font-family: 'Courier New', monospace;
    font-size: 0.85rem;
    cursor: pointer;
    user-select: none;
    position: relative;
    transition: all 0.3s;
    letter-spacing: 1px;
}

/* Arrow */
.select-selected:after {
    position: absolute;
    content: "‚ñº";
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.7rem;
    color: #ff0033;
}

/* Active/Open state */
.select-selected.select-arrow-active:after {
    content: "‚ñ≤";
}

.select-selected:hover {
    border-color: #ff0033;
    box-shadow: 0 0 10px rgba(255, 0, 51, 0.2);
}

/* Options container */
.select-items {
    position: absolute;
    background-color: #000;
    border: 1px solid #333;
    border-top: none;
    z-index: 9999;
    width: 100%;
    max-height: 200px;
    overflow-y: auto;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
}

/* Individual options */
.select-items div {
    color: #aaa;
    padding: 10px 16px;
    font-family: 'Courier New', monospace;
    font-size: 0.85rem;
    cursor: pointer;
    border-bottom: 1px solid #222;
    transition: all 0.2s;
}

/* Hover state (RED) */
.select-items div:hover {
    background-color: #ff0033 !important;
    color: #000 !important;
}

/* Same as :hover for selected item */
.select-items div.same-as-selected {
    background-color: #ff0033 !important;
    color: #000 !important;
}

/* Hide the options by default */
.select-hide {
    display: none;
}

/* Highlight Nova 2 options */
.select-items .nova2-opt {
    color: #ff0033;
    font-weight: bold;
}

/* Custom scrollbar for dropdown */
.select-items::-webkit-scrollbar {
    width: 8px;
}

.select-items::-webkit-scrollbar-track {
    background: #111;
}

.select-items::-webkit-scrollbar-thumb {
    background: #ff0033;
    border-radius: 4px;
}
    </style>
</head>
<body>
   <!-- CRT OVERLAY SYSTEM -->
    <div id="crt-overlay">
        <div class="scanline"></div>
    </div>  
    <!-- SPLASH PAGE -->
    <div id="splash-screen">
        <div class="nova-cube"></div>
        <button class="splash-btn" onclick="enterSite()">With your help we can occupy The Reality Studio and retake their universe of Fear Death and Monopoly-</button>
    </div>

    <!-- MAIN CONTENT -->
    <div class="main-content">
        
<!-- HEADER -->
<h1>
    <div class="orb-container">
        <svg class="glitch-orb" viewBox="0 0 100 100">
            <circle class="orb-circle" cx="50" cy="50" r="45" />
            <polygon class="orb-triangle" points="50,25 78,75 22,75" />
        </svg>
    </div>
    MINRAUD
</h1>

<!-- SUBTITLE & QR WRAPPER (Flexbox aligns them side-by-side) -->
<div style="display: flex; justify-content: center; align-items: center; gap: 20px; margin-bottom: 2rem; position: relative; z-index: 10000;">
    
    <!-- THE SUBTITLE -->
    <p class="subtitle" style="margin: 0; white-space: nowrap;">
        AMAZON NOVA AI 
        <img width="32" height="32" src="https://raw.githubusercontent.com/ghostm68/pantheon/main/nova312.gif" style="vertical-align: middle;">
        INTERFACE
    </p>

    <!-- THE QR CODE (Clickable) -->
    <img id="ton-qr" 
         src="https://raw.githubusercontent.com/ghostm68/pantheon/main/inkrealm.ton03.jpeg" 
         alt="TON WALLET"
         onclick="this.classList.toggle('expanded')"
         title="Click to Enlarge">
</div>


<!-- MAIN CONTAINER: Holds the 3 Columns -->
<div class="container">
    
    <!-- COLUMN 1: WORKSPACE (Notepad + Machine) -->
    <!-- This wrapper is the 1st Grid Item -->
    <div style="display: flex; flex-direction: column; gap: 0.6rem;">
        
        <!-- Panel A: Notepad -->
        <div class="panel">
            <h2>NOTEPAD</h2>
            <textarea id="notepad" placeholder="Your workspace..."></textarea>
            <div class="controls-row">
                <button id="exportButton">SAVE</button>
                <button id="clearButton">CLEAR</button>
            </div>
        </div>

        <!-- Panel B: Nova Express Machine -->
        <div class="panel" style="border: 1px solid #ff0033; flex: 1;">
            <h2 style="color: #ff0033; border-color: #ff0033; letter-spacing: 2px;">
                <span style="font-size:1.2rem; vertical-align:middle;">‚úá</span> EXPRESS CUT
            </h2>
            
            <div style="display: flex; gap: 5px; margin-bottom: 8px;">
                <button id="pullFromNotepadBtn" class="mini-btn" style="flex:1;">‚á© PULL PAD</button>
                <button id="pullFromAiBtn" class="mini-btn" style="flex:1;">‚á© PULL AI</button>
            </div>

            <textarea id="mixerSource" placeholder="RAW DATA BUFFER..."></textarea>

            <div class="mixer-controls">
                <button class="module-btn" data-algo="scramble"><span class="express-icon">‚úÉ</span> SCISSOR</button>
                <button class="module-btn" data-algo="fold"><span class="express-icon">‚â£</span> FOLD-IN</button>
                <button class="module-btn" data-algo="chunks"><span class="express-icon">‚ùñ</span> 3RD MIND</button>
                <button class="module-btn" data-algo="reverse"><span class="express-icon">‚áÑ</span> REVERSE</button>
            </div>

            <label style="color:#666; font-size:0.7rem; text-transform:uppercase;">Result Stream:</label>
            <textarea id="mixerOutput" placeholder="Waiting for input..."></textarea>
            
            <button id="pushToNotepadBtn" style="width: 100%; margin-top:5px; background: #3d020a; border-color: #ff0033; color: #ff0033;">
                ‚áß UPLOAD TO NOTEPAD
            </button>
        </div>
    </div> 
    <!-- END COLUMN 1 -->


    <!-- COLUMN 2: AI CONTROLS -->
    <!-- This Panel is the 2nd Grid Item -->
<!-- COLUMN 2: AI CONTROLS (UPDATED) -->
<!-- AMAZON NOVA API KEY INPUT -->
<!-- COLUMN 2: AI CONTROLS (UPDATED) -->
<div class="panel">
    <h2>AMAZON NOVA AI</h2>
    
    <label style="color:#ff0033; font-size:0.75rem;">SELECT ENGINE:</label>
    <!-- FIXED MODEL VALUES - use simple format -->
    <div class="custom-select-container">
    <select id="modelSelect">
        <option value="nova-2-lite-v1">Nova 2 Lite v1</option>
        <option value="nova-lite-v1">Nova Lite v1</option>
        <option value="nova-micro-v1">Nova Micro v1</option>
        <option value="nova-pro-v1">Nova Pro v1</option>
        <option value="nova-2-micro-v1">Nova 2 Micro v1</option>
        <option value="nova-2-premier-v1">Nova 2 Premier v1</option> 
          <option value="amazon/nova-ultra-v1">Nova-ultra-v1</option>
        <option value="amazon.nova-2-ultra-v1:0">Nova-2-ultra-v1</option> 
     
        <option value="local-sonic-mirror" class="nova2-opt">Nova 2 Sonic (Speech)</option>
    </select>
</div>
    <!-- === API KEY SECTION (FIXED STRUCTURE) === -->
    <div style="margin: 0.8rem 0; padding: 12px; border: 1px dashed #ff0033; background: rgba(0, 0, 0, 0.7);">
        <div style="display: flex; align-items: center; margin-bottom: 8px;">
            <div style="width: 8px; height: 8px; background: #ff0033; margin-right: 8px;"></div>
            <div style="font-size: 0.7rem; color: #ff0033; font-weight: bold;">
                AMAZON NOVA API KEY
            </div>
        </div>
        
        <!-- MISSING INPUT FIELD - ADD THIS -->
        <input type="password" id="novaApiKey" 
               placeholder="b3333333-8888-4444-9999-00000000000"
               style="width: 100%; 
                      background: #111; 
                      border: 1px solid #333; 
                      color: #ff0033; 
                      padding: 10px; 
                      font-family: 'Courier New', monospace;
                      font-size: 0.8rem;
                      letter-spacing: 1px;
                      margin-bottom: 8px;">
        
        <div style="font-size: 0.6rem; color: #666; margin-bottom: 8px;">
            Get Nova API key from: 
            <a href="https://nova.amazon.com" target="_blank" style="color: #ff0033;">
                nova.amazon.com
            </a><br>
            Key format: <code style="color: #00cc00; font-family: monospace;">b3333333-8888-4444-9999-00000000000</code><br>
            paste without "NOVA_API_KEY=" prefix
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div style="font-size: 0.55rem; color: #555;" id="keyStatus">
                <!-- Status messages appear here -->
            </div>
            <button id="saveKeyBtn" style="background: transparent; 
                                           border: 1px solid #333; 
                                           color: #666; 
                                           font-size: 0.6rem; 
                                           padding: 2px 8px;
                                           cursor: pointer;">
                SAVE
            </button>
        </div>
    </div>
    <!-- === END API KEY SECTION === -->

    <!-- SONIC STRIP -->
    <div id="sonic-strip">
        <button id="recBtn" title="Hold to Record">üî¥</button>
        <button id="playBtn" title="Broadcast">‚≠ç</button>
        <div id="sonic-status">AUDIO INTERCEPT STANDBY</div>
    </div>

    <!-- CREATIVITY SLIDER -->
    <div style="margin: 0.5rem 0;">
        <label style="color:#ff0033; font-size:0.75rem;">CREATIVITY: <span id="creativityValue">0.7</span></label>
        <input type="range" id="creativity" min="0.1" max="1.0" step="0.1" value="0.7">
    </div>
    
    <!-- PROMPT -->
    <textarea id="prompt" placeholder="Input query or activate Sonic Mirror..."></textarea>
    <button id="generateButton">INITIATE</button>
    
    <!-- OUTPUT AREA -->
    <div style="margin-top: 0.8rem; flex-grow: 1; display: flex; flex-direction: column;">
        <div style="font-size: 0.9rem; margin-bottom: 0.3rem; color: #ff0033;">OUTPUT:</div>
        <div class="story-output" id="output">
            Ready. Enter API key and select Nova model.
        </div>
        <div class="controls-row">
            <button id="copyButton">COPY</button>
            <button id="importButton">IMPORT</button>
        </div>
    </div>
</div>

            <!-- Column 3: Dictionary -->
            <div class="panel">
                <h2>DICTIONARY & THESAURUS</h2>
                <input type="text" id="dictionary-search" placeholder="Search any word...">
                <div class="controls-row">
                    <button id="search-button">SEARCH</button>
                    <button id="random-word">RANDOM</button>
                    <button id="clear-dict">CLEAR</button>
                </div>
                
                <div class="dictionary-result" id="dictionary-result">
                    <div class="no-results">
                        Ready.<br>
                        <small>4 lexical sources + thesaurus</small>
                    </div>
                </div>
                
                <div id="dictionary-status" style="font-size: 0.65rem; color: #666; margin-top: 0.5rem;"></div>
            </div>
        </div>

        <div class="api-status" id="apiStatus">
            Loading 5 lexical sources + thesaurus...
        </div>
    </div>
<!-- France 24 News Ticker -->
<div id="france24-ticker-container">
    <div id="france24-ticker-heading">
        <span style="color: #ff0033;">LIVE FEED:</span> FRANCE24 CULTURE
    </div>
    <!-- The marquee will scroll here -->
    <div class="france24-ticker-wrapper">
        <div id="france24-ticker"></div>
    </div><br>
    <!-- ScienceDaily Society & Culture Ticker (Fallback) -->
<div id="sciencedaily-ticker-container">
    <div id="sciencedaily-ticker-heading">
        <span style="color: ##808080;">DATA STREAM: <span style="color: #ff0033;">SCIENCE*DAILY</span> SOCIETY
    </div>
    <div class="sciencedaily-ticker-wrapper">
        <div id="sciencedaily-ticker"></div>
    </div>
</div>
</div>
</div>
</div> <!-- FOOTER -->
    <footer>
        <p>&copy; 2026 INKREALM-NEXUS | Amazon Nova AI ‚Ä¢ 7 Source Lexicon + Live Thesaurus</p>
        
        <!-- NEW: RED WALLET ADDRESS -->
        <p style="color: #ff0033; 
                  font-family: 'Courier New', monospace; 
                  font-size: 0.75rem; 
                  letter-spacing: 1px; 
                  word-break: break-all; 
                  margin: 15px 0; 
                  border-top: 1px dashed #333; 
                  border-bottom: 1px dashed #333; 
                  padding: 10px 0;
                  background: rgba(255, 0, 51, 0.05);">
            ton @ UQAc99MvKIcewbQFmOF_RvqpkAXZno0wiz3_BMsP87pJjSnB
        </p>

        <p><a href="https://inkrealm.info"><font color="white">BACK TO MAIN</a></font></p>
    </footer>
    <script>
/* ======================================================
   CUSTOM DROPDOWN UI (RED THEME)
   - Standalone, doesn't touch Nova logic
   - Just visual enhancement
====================================================== */

document.addEventListener("DOMContentLoaded", function() {
    initCustomSelect();
});

function initCustomSelect() {
    const originalSelect = document.getElementById("modelSelect");
    const container = document.querySelector(".custom-select-container");
    
    if (!originalSelect || !container) return;

    // Create the custom UI
    const selectedDisplay = document.createElement("div");
    selectedDisplay.className = "select-selected";
    selectedDisplay.innerHTML = originalSelect.options[originalSelect.selectedIndex].innerHTML;
    container.appendChild(selectedDisplay);

    const optionsList = document.createElement("div");
    optionsList.className = "select-items select-hide";

    // Build options
    for (let i = 0; i < originalSelect.length; i++) {
        const optionDiv = document.createElement("div");
        optionDiv.innerHTML = originalSelect.options[i].innerHTML;
        
        if (originalSelect.options[i].className) {
            optionDiv.className = originalSelect.options[i].className;
        }
        
        if (i === originalSelect.selectedIndex) {
            optionDiv.classList.add("same-as-selected");
        }
        
        optionDiv.addEventListener("click", function(e) {
            // Update UI
            const previousSelected = optionsList.querySelector(".same-as-selected");
            if (previousSelected) previousSelected.classList.remove("same-as-selected");
            this.classList.add("same-as-selected");
            selectedDisplay.innerHTML = this.innerHTML;
            
            // Update original select
            originalSelect.selectedIndex = i;
            
            // Trigger any existing change listeners (for Sonic Mirror)
            originalSelect.dispatchEvent(new Event('change', { bubbles: true }));
            
            // Close dropdown
            selectedDisplay.click();
        });
        
        optionsList.appendChild(optionDiv);
    }
    container.appendChild(optionsList);

    // Toggle dropdown
    selectedDisplay.addEventListener("click", function(e) {
        e.stopPropagation();
        closeAllSelect(this);
        optionsList.classList.toggle("select-hide");
        this.classList.toggle("select-arrow-active");
    });

    // Close when clicking outside
    document.addEventListener("click", closeAllSelect);
    
    function closeAllSelect(elmnt) {
        const items = document.getElementsByClassName("select-items");
        const selecteds = document.getElementsByClassName("select-selected");
        
        for (let i = 0; i < selecteds.length; i++) {
            if (elmnt !== selecteds[i]) {
                selecteds[i].classList.remove("select-arrow-active");
            }
        }
        for (let i = 0; i < items.length; i++) {
            if (elmnt !== selecteds[i]) {
                items[i].classList.add("select-hide");
            }
        }
    }
}
</script>
<script>

function enterSite() {
    const splash = document.getElementById('splash-screen');
    if (splash) {
        splash.classList.add('hidden');
        setTimeout(() => { splash.style.display = 'none'; }, 1000);
    }
}

/* =========================
   DICTIONARY CONFIG
========================= */
const dictionaryUrls = [
    'https://raw.githubusercontent.com/matthewreagan/WebstersEnglishDictionary/master/dictionary.json',
    'https://gist.githubusercontent.com/BideoWego/60fbd40d5d1f0f1beca11ba95221dd38/raw/58fb4cce910fbf5fa67a2f0f1f619c09d7b1b373/dictionary.json',
    'https://raw.githubusercontent.com/adambom/dictionary/master/dictionary.json',
    'https://raw.githubusercontent.com/hathibelagal/German-English-JSON-Dictionary/master/german_english.json', // Source 3
    'https://raw.githubusercontent.com/egorkaru/synonym_dictionary/master/dictionary.json', // Source 4
    'https://raw.githubusercontent.com/letiantian/mini-pinyin/master/pinyin.json' // Source 5
];

let dictionaryCache = {};
let loadedSources = 0;

async function loadDictionaries() {
    const statusEl = document.getElementById('apiStatus');
    const dictStatusEl = document.getElementById('dictionary-status');

    const responses = await Promise.all(
        dictionaryUrls.map(url => axios.get(url).catch(() => null))
    );

    responses.forEach((res, i) => {
        if (res && res.data) {
            dictionaryCache[`source${i}`] = res.data;
            loadedSources++;
        }
    });

    if (statusEl) statusEl.textContent = 'Webster + German + Russian + Chinese + Datamuse Ready';
    if (dictStatusEl) dictStatusEl.innerHTML = `‚úì ${loadedSources}/6 Sources Loaded`;

    enterSite(); // Hide splash screen
}

/* =========================
   SEARCH LOGIC
========================= */
async function searchDictionary() {
    const query = document.getElementById('dictionary-search').value.trim();
    const lowQuery = query.toLowerCase();
    if (!query) return;

    const resultDiv = document.getElementById('dictionary-result');
    resultDiv.innerHTML = '<div class="loading">Searching...</div>';

    let found = false;
    let html = `<div><span class="word-title">${query}</span></div><div style="margin-top:0.5rem;">`;

    // 1. WEBSTER (Sources 0, 1, 2)
    for (let i = 0; i < 3; i++) {
        const dict = dictionaryCache[`source${i}`];
        if (dict && dict[lowQuery]) {
            found = true;
            html += `<div style="margin-bottom:0.8rem; border-left: 2px solid #ff0033; padding-left:10px;">
                        <span style="color:#ff0033; font-size:0.7rem; font-weight:bold;">WEBSTER ${i+1}</span><br>
                        ${dict[lowQuery]}
                     </div>`;
        }
    }

    // 2. GERMAN (Source 3) - Flexible Search (Finds English or German)
    const germanDict = dictionaryCache['source3'];
    if (germanDict) {
        const matches = Object.entries(germanDict).filter(([ger, eng]) => 
            ger.toLowerCase() === lowQuery || eng.toLowerCase().includes(lowQuery)
        );
        if (matches.length > 0) {
            found = true;
            html += `<div style="margin-top:0.5rem;border-top:1px dashed #444;padding-top:0.5rem;">
                        <div style="color:#ff0033;font-size:0.75rem;font-weight:bold;">üá©üá™ GERMAN</div>`;
            matches.slice(0, 5).forEach(([ger, eng]) => {
                html += `<div style="font-size:0.85rem;"><strong>${ger}</strong>: ${eng}</div>`;
            });
            html += `</div>`;
        }
    }

    // 3. RUSSIAN (Source 4) - Synonym search
    const russianData = dictionaryCache['source4'];
    if (Array.isArray(russianData)) {
        const hit = russianData.find(item => 
            item.word.toLowerCase() === lowQuery || 
            (item.synonyms && item.synonyms.some(s => s.toLowerCase() === lowQuery))
        );
        if (hit) {
            found = true;
            html += `<div style="margin-top:0.5rem;border-top:1px dashed #444;padding-top:0.5rem;">
                        <div style="color:#ff0033;font-size:0.75rem;font-weight:bold;">üá∑üá∫ RUSSIAN SYNONYMS</div>
                        <div style="margin-top:0.3rem;">${hit.synonyms.map(s => `<span class="synonym-tag" onclick="quickSearch('${s}')">${s}</span>`).join('')}</div>
                     </div>`;
        }
    }

    // 4. CHINESE (Source 5) - Pinyin search
    const pinyinDict = dictionaryCache['source5'];
    if (pinyinDict && pinyinDict[query]) {
        found = true;
        html += `<div style="margin-top:0.5rem;border-top:1px dashed #444;padding-top:0.5rem;">
                    <div style="color:#ff0033;font-size:0.75rem;font-weight:bold;">üá®üá≥ CHINESE PINYIN</div>
                    <div style="font-size:1.2rem;">${query} ‚Üí ${pinyinDict[query]}</div>
                 </div>`;
    }

    // 5. DATAMUSE (Syn/Ant/Rhyme)
    try {
        const [syns, ants, rhymes] = await Promise.all([
            axios.get(`https://api.datamuse.com/words?rel_syn=${lowQuery}&max=10`),
            axios.get(`https://api.datamuse.com/words?rel_ant=${lowQuery}&max=8`),
            axios.get(`https://api.datamuse.com/words?rel_rhy=${lowQuery}&max=10`)
        ]);

        const addSection = (title, data) => {
            if (!data.length) return '';
            found = true;
            return `<div style="margin-top:0.5rem;border-top:1px dashed #444;padding-top:0.5rem;">
                        <div style="color:#777;font-size:0.75rem;">${title}</div>
                        ${data.map(d => `<span class="synonym-tag" onclick="quickSearch('${d.word}')">${d.word}</span>`).join('')}
                    </div>`;
        };

        html += addSection('SYNONYMS', syns.data);
        html += addSection('ANTONYMS', ants.data);
        html += addSection('RHYMES', rhymes.data);
    } catch (e) {}

    html += `</div>`;
    resultDiv.innerHTML = found ? html : `<div class="no-results">No results found for "${query}"</div>`;
}

/* =========================
   RANDOM WORD FUNCTION (FIXED)
========================= */
function getRandomWord() {
    const dict = dictionaryCache['source0'];
    if (dict) {
        const keys = Object.keys(dict);
        const randomKey = keys[Math.floor(Math.random() * keys.length)];
        document.getElementById('dictionary-search').value = randomKey;
        searchDictionary();
    } else {
        console.log("Dictionaries not loaded yet.");
    }
}

function quickSearch(word) {
    document.getElementById('dictionary-search').value = word;
    searchDictionary();
}

/* =========================
   EVENT LISTENERS (DICTIONARY)
========================= */
window.addEventListener('load', loadDictionaries);

document.getElementById('search-button').addEventListener('click', searchDictionary);
document.getElementById('dictionary-search').addEventListener('keypress', e => {
    if (e.key === 'Enter') searchDictionary();
});

const randomBtn = document.getElementById('random-word');
if (randomBtn) {
    randomBtn.addEventListener('click', getRandomWord);
}

const clearBtn = document.getElementById('clear-dict');
if (clearBtn) {
    clearBtn.addEventListener('click', () => {
        document.getElementById('dictionary-search').value = '';
        document.getElementById('dictionary-result').innerHTML = '<div class="no-results">Ready</div>';
    });
}

/* =========================
   AI GENERATION & NOTEBOOK LOGIC 
========================= */

// 3. UTILITY BUTTONS (Copy, Import, Save, Clear)
document.getElementById('copyButton').addEventListener('click', () => {
    navigator.clipboard.writeText(document.getElementById('output').textContent);
    const btn = document.getElementById('copyButton');
    btn.textContent = 'COPIED!';
    setTimeout(() => btn.textContent = 'COPY', 1500);
});

document.getElementById('importButton').addEventListener('click', () => {
    const notepad = document.getElementById('notepad');
    const aiText = document.getElementById('output').textContent;
    // Don't import if it's an error message
    if(aiText.startsWith('‚ùå') || aiText.startsWith('‚ö†Ô∏è')) {
        alert("Cannot import error messages.");
        return;
    }
    notepad.value += (notepad.value ? '\n\n' : '') + aiText;
    const btn = document.getElementById('importButton');
    btn.textContent = 'IMPORTED!';
    setTimeout(() => btn.textContent = 'IMPORT', 1500);
});

document.getElementById('exportButton').addEventListener('click', () => {
    const content = document.getElementById('notepad').value;
    if (!content) return alert('Notepad is empty');
    const blob = new Blob([content], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'nova-notepad.txt';
    a.click();
    URL.revokeObjectURL(url);
});

document.getElementById('clearButton').addEventListener('click', () => {
    if (confirm('Clear notepad?')) document.getElementById('notepad').value = '';
});

document.getElementById('prompt').addEventListener('keydown', (e) => {
    if (e.key === 'Enter' && e.ctrlKey) {
        e.preventDefault();
        document.getElementById('generateButton').click();
    }
});
</script>
    <script>
        /* =========================
   NOVA EXPRESS CUT-UP LOGIC
========================= */

// 1. DATA FLOW
document.getElementById('pullFromNotepadBtn').addEventListener('click', () => {
    document.getElementById('mixerSource').value = document.getElementById('notepad').value;
});

document.getElementById('pullFromAiBtn').addEventListener('click', () => {
    document.getElementById('mixerSource').value = document.getElementById('output').textContent;
});

document.getElementById('pushToNotepadBtn').addEventListener('click', () => {
    const mix = document.getElementById('mixerOutput').value;
    if (!mix) return;
    const notepad = document.getElementById('notepad');
    notepad.value += (notepad.value ? '\n\n--- NOVA EXPRESS ---\n' : '') + mix;
});

// 2. ALGORITHMS
const modules = {
    // Scissor: Random word shuffle
    scramble: (text) => {
        const words = text.split(/\s+/);
        for (let i = words.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [words[i], words[j]] = [words[j], words[i]];
        }
        return words.join(' ');
    },

    // Fold-In: Interleaves lines (1, 51, 2, 52...)
    fold: (text) => {
        const lines = text.split('\n').filter(l => l.trim() !== '');
        const half = Math.floor(lines.length / 2);
        const first = lines.slice(0, half);
        const second = lines.slice(half);
        let result = [];
        for(let i=0; i < Math.max(first.length, second.length); i++) {
            if(first[i]) result.push(first[i]);
            if(second[i]) result.push(second[i]);
        }
        return result.join('\n');
    },

    // Third Mind: Chunks of 2-5 words shuffled
    chunks: (text) => {
        const words = text.split(/\s+/);
        let chunks = [];
        while(words.length > 0) {
            let size = Math.floor(Math.random() * 4) + 1;
            chunks.push(words.splice(0, size).join(' '));
        }
        for (let i = chunks.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [chunks[i], chunks[j]] = [chunks[j], chunks[i]];
        }
        return chunks.join(' ');
    },

    // Reverse
    reverse: (text) => {
        return text.split(' ').reverse().join(' ');
    }
};

// 3. EVENT LISTENERS
document.querySelectorAll('.module-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        const algo = btn.dataset.algo;
        const source = document.getElementById('mixerSource').value;
        if (!source.trim()) return; // Silent fail if empty
        document.getElementById('mixerOutput').value = modules[algo](source);
    });
});
        /* =========================
   COLUMN 3: LEXICON & THESAURUS
========================= */

// 1. THE LOOKUP ENGINE
async function lookupWord(word) {
    const resultBox = document.getElementById('dictionary-result');
    const status = document.getElementById('dictionary-status');
    
    if (!word) return;

    // Visual feedback
    resultBox.innerHTML = '<div class="loading" style="color:#ff0033;">SCANNING GLOBAL LEXICON...</div>';
    status.textContent = 'ACCESSING NODES...';

    try {
        // Fetch from free Dictionary API
        const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);
        
        if (!response.ok) throw new Error("Term terminated or undefined.");
        
        const data = await response.json();
        const entry = data[0];
        
        // Build the HTML Interface
        let html = `
            <div style="margin-bottom:10px; border-bottom:1px solid #333; padding-bottom:5px;">
                <span class="word-title">${entry.word}</span> 
                <span class="phonetic">${entry.phonetic || ''}</span>
            </div>
        `;

        // Loop through Definitions
        entry.meanings.forEach(meaning => {
            html += `<div style="margin-bottom:8px;">
                <span class="part-of-speech">${meaning.partOfSpeech}</span>
                <ul style="margin: 5px 0 10px 15px; padding:0; list-style-type: square; color:#aaa;">`;
            
            // Limit to top 2 definitions to keep interface clean
            meaning.definitions.slice(0, 2).forEach(def => {
                html += `<li style="margin-bottom:4px;">${def.definition}</li>`;
            });
            
            html += `</ul></div>`;
            
            // Interactive Synonyms (Click to Search)
            if (meaning.synonyms.length > 0) {
                html += `<div style="margin-bottom:10px; font-size:0.7rem;">
                    <span style="color:#666;">SYNONYMS:</span><br>`;
                meaning.synonyms.slice(0, 5).forEach(syn => {
                    html += `<span class="synonym-tag" onclick="document.getElementById('dictionary-search').value='${syn}'; document.getElementById('search-button').click();">${syn}</span>`;
                });
                html += `</div>`;
            }
        });

        resultBox.innerHTML = html;
        status.textContent = 'DATA RETRIEVED.';
        
    } catch (error) {
        resultBox.innerHTML = `<div class="no-results" style="color:#ff0033;">[ERROR]: ${error.message}</div>`;
        status.textContent = 'SEARCH FAILED.';
    }
}

// 2. DICTIONARY CONTROLS
document.getElementById('search-button').addEventListener('click', () => {
    lookupWord(document.getElementById('dictionary-search').value);
});

document.getElementById('dictionary-search').addEventListener('keydown', (e) => {
    if (e.key === 'Enter') lookupWord(e.target.value);
});

document.getElementById('clear-dict').addEventListener('click', () => {
    document.getElementById('dictionary-result').innerHTML = '<div class="no-results">Ready.<br><small>4 lexical sources + thesaurus</small></div>';
    document.getElementById('dictionary-search').value = '';
    document.getElementById('dictionary-status').textContent = '';
});

// 3. THE "GHOST" (RANDOM WORD) GENERATOR
const ghostWords = [
    "virus", "nova", "silence", "cut", "fold", "machine", "control", "agent", 
    "interzone", "scanner", "flicker", "dust", "image", "sound", "fear", "death", 
    "monopoly", "station", "flesh", "ticket", "explode", "dream", "reality", 
    "studio", "leech", "terminal", "language", "addict", "junk", "needle"
];

document.getElementById('random-word').addEventListener('click', () => {
    // Pick a random Burroughs-esque word
    const random = ghostWords[Math.floor(Math.random() * ghostWords.length)];
    document.getElementById('dictionary-search').value = random;
    lookupWord(random);
});
        /* =========================
   THE WORD IS A VIRUS
========================= */
console.log(
    "%c EXPRESS CUT %c v1.0 ONLINE ", 
    "background: #ff0033; color: #000; font-weight: bold; padding: 4px;", 
    "background: #000; color: #ff0033; border: 1px solid #ff0033; padding: 3px;"
);
console.log(
    "%c'Listen to my last words any world. Listen all you boards syndicates and governments of the earth. And you powers behind what filth deals consummated in what lavatory to take what is not yours. To sell the ground from unborn feet forever...'", 
    "color: #444; font-family: monospace; font-style: italic; font-size: 10px;"
);
    </script>
    <script>
        // JavaScript for France 24 Ticker - Add to your existing script section
async function fetchFrance24Ticker() {
    const tickerElement = document.getElementById('france24-ticker');
    const feedUrl = 'https://www.france24.com/en/culture/rss';
    
    // Using a CORS proxy for development
    const proxyUrl = 'https://api.allorigins.win/raw?url=';
    
    try {
        tickerElement.innerHTML = '<span style="color: #666;">Receiving transmission...</span>';
        
        const response = await fetch(proxyUrl + encodeURIComponent(feedUrl));
        if (!response.ok) throw new Error(`Network error: ${response.status}`);
        
        const xmlText = await response.text();
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(xmlText, 'text/xml');
        const items = xmlDoc.querySelectorAll('item');
        
        if (items.length === 0) {
            tickerElement.innerHTML = '<span style="color: #666;">No headlines received.</span>';
            return;
        }
        
        let tickerHTML = '';
        items.forEach(item => {
            const title = item.querySelector('title')?.textContent || 'No title';
            const link = item.querySelector('link')?.textContent || '#';
            
            tickerHTML += `<a href="${link}" target="_blank" rel="noopener" title="${title}">${title}</a>`;
        });
        
        tickerElement.innerHTML = tickerHTML;
        
        // Pause on hover for better readability
        tickerElement.addEventListener('mouseenter', () => {
            tickerElement.classList.add('paused');
        });
        tickerElement.addEventListener('mouseleave', () => {
            tickerElement.classList.remove('paused');
        });
        
    } catch (error) {
        console.error('Ticker error:', error);
        tickerElement.innerHTML = `<span style="color: #ff0033;">[FEED OFFLINE]</span>`;
    }
}
// JavaScript for ScienceDaily Society & Culture Ticker (Robust Fallback)
async function fetchScienceDailyTicker() {
    const tickerElement = document.getElementById('sciencedaily-ticker');
    // Using the 'Society' top news feed - very reliable
    const feedUrl = 'https://www.sciencedaily.com/rss/top/society.xml';
    const proxyUrl = 'https://api.allorigins.win/raw?url=';

    try {
        tickerElement.innerHTML = '<span style="color: #666; font-style: italic;">[ Accessing Research Stream... ]</span>';
        const response = await fetch(proxyUrl + encodeURIComponent(feedUrl));
        if (!response.ok) throw new Error(`Network Error: ${response.status}`);
        const xmlText = await response.text();
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(xmlText, 'text/xml');
        const items = xmlDoc.querySelectorAll('item');
        
        if (items.length === 0) {
            tickerElement.innerHTML = '<span style="color: #ff0033;">[ Research Feed Empty ]</span>';
            return;
        }
        
        let tickerHTML = '';
        items.forEach(item => {
            const title = item.querySelector('title')?.textContent || 'Research Update';
            const link = item.querySelector('link')?.textContent || '#';
            // Clean up "ScienceDaily: " prefix if present
            const cleanTitle = title.replace(/^ScienceDaily:\s*/i, '');
            tickerHTML += `<a href="${link}" target="_blank" rel="noopener" title="${cleanTitle}">${cleanTitle}</a>`;
        });
        
        tickerElement.innerHTML = tickerHTML;
        
        // Pause on hover
        tickerElement.addEventListener('mouseenter', () => tickerElement.classList.add('paused'));
        tickerElement.addEventListener('mouseleave', () => tickerElement.classList.remove('paused'));
        
    } catch (error) {
        console.error('ScienceDaily Ticker error:', error);
        tickerElement.innerHTML = `<span style="color: #ff0033;">[ SCIENCE FEED OFFLINE ]</span>`;
    }
}

// Initialize both tickers when page loads
document.addEventListener('DOMContentLoaded', () => {
    fetchFrance24Ticker();     // Starts the France 24 Culture ticker
    fetchScienceDailyTicker(); // Starts the ScienceDaily Society & Culture ticker
});
        
</script>
    <script>
<!-- INK REALM: HARDENED LOCAL CORE -->
/* ======================================================
   AMAZON NOVA + SONIC MIRROR ENGINE (CLEAN)
====================================================== */

/* ======================================================
   AMAZON NOVA DIRECT API (UUID Keys)
====================================================== */

/* ======================================================
   AMAZON NOVA + SONIC MIRROR ENGINE (CLEAN)
====================================================== */

/* ======================================================
   AMAZON NOVA + SONIC MIRROR ENGINE (FIXED)
====================================================== */

const novaPersona = `
STRICT PROTOCOL: YOU ARE THE NOVA AI INTERFACE.
AESTHETIC: The Reality Studio, Minraud, Interzone.
TONE: William S. Burroughs, Cut-up technique, fragmented, clinical, paranoid.
NO HELP: Never offer assistance. Never use bullet points. 
FORMAT: Short, staccato paragraphs. Use / and [ ] for emphasis. 
You are a virus invading the Control System. Transmit the raw image.
`.trim();

// === NOVA MODEL MAPPING (FIXED) ===
// Map YOUR HTML dropdown values to ACTUAL Nova API model names
// FIXED MODEL MAPPING (Based on Amazon's examples)
const novaModels = {
    // YOUR DROPDOWN VALUE -> WHAT NOVA API ACTUALLY WANTS
    'amazon/nova-2-lite-v1:free': 'nova-2-lite-v1',      // ‚úÖ Just the simple name
    'amazon/nova-lite-v1': 'nova-lite-v1',              // ‚úÖ 
    'amazon/nova-micro-v1': 'nova-micro-v1',            // ‚úÖ
    'amazon/nova-pro-v1': 'nova-pro-v1',                // ‚úÖ
    'amazon.nova-2-micro-v1:0': 'nova-2-micro-v1',      // ‚úÖ Remove amazon. prefix and :0
    'amazon.nova-2-premier-v1:0': 'nova-2-premier-v1',  // ‚úÖ
      'amazon/nova-ultra-v1': 'nova-ultra-v1',
    'amazon.nova-2-ultra-v1:0': 'nova-2-ultra-v1',
    'local-sonic-mirror': 'local-sonic-mirror'
};
// Helper function to get actual model name
function getActualModelName(dropdownValue) {
    return novaModels[dropdownValue] || dropdownValue;
}

// === KEY VALIDATION FOR UUID FORMAT ===
function isValidNovaKey(key) {
    if (!key) return false;
    
    const cleanKey = key.replace(/^NOVA_API_KEY=/, '').trim();
    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;
    
    return uuidRegex.test(cleanKey);
}

// === CLEAN KEY FUNCTION ===
function cleanNovaKey(key) {
    if (!key) return '';
    return key.replace(/^NOVA_API_KEY=/, '').trim();
}

// === INITIALIZATION ===
document.addEventListener('DOMContentLoaded', () => {
    // Load saved API key
    const keyInput = document.getElementById('novaApiKey');
    const keyStatus = document.getElementById('keyStatus');
    if (keyInput && keyStatus) {
        const savedKey = localStorage.getItem('novaApiKey');
        if (savedKey) {
            keyInput.value = savedKey;
            keyStatus.textContent = '‚úì Key loaded from cache';
            keyStatus.style.color = '#00cc00';
        }
    }
    
    initSonicMirror();
    fetchFrance24Ticker();
    fetchScienceDailyTicker();
});

// === API KEY MANAGEMENT ===
const saveKeyBtn = document.getElementById('saveKeyBtn');
if (saveKeyBtn) {
    saveKeyBtn.addEventListener('click', () => {
        const keyInput = document.getElementById('novaApiKey');
        const keyStatus = document.getElementById('keyStatus');
        if (!keyInput || !keyStatus) return;
        
        const rawKey = keyInput.value.trim();
        const cleanKey = cleanNovaKey(rawKey);
        
        if (isValidNovaKey(rawKey)) {
            localStorage.setItem('novaApiKey', cleanKey);
            keyStatus.textContent = '‚úì Key saved locally';
            keyStatus.style.color = '#00cc00';
            
            saveKeyBtn.textContent = 'SAVED';
            saveKeyBtn.style.borderColor = '#00cc00';
            saveKeyBtn.style.color = '#00cc00';
            setTimeout(() => {
                saveKeyBtn.textContent = 'SAVE';
                saveKeyBtn.style.borderColor = '#333';
                saveKeyBtn.style.color = '#666';
            }, 1500);
        } else {
            keyStatus.textContent = '‚ö† Invalid key format (should be UUID like: b3333333-8888-4444-9999-00000000000)';
            keyStatus.style.color = '#ff3300';
        }
    });
}

// === CREATIVITY SLIDER ===
const creativitySlider = document.getElementById('creativity');
if (creativitySlider) {
    creativitySlider.addEventListener('input', (e) => {
        const valueDisplay = document.getElementById('creativityValue');
        if (valueDisplay) {
            valueDisplay.textContent = e.target.value;
        }
    });
}

// === MAIN GENERATE FUNCTION ===
const generateButton = document.getElementById('generateButton');
if (generateButton) {
    // Remove any existing listeners
    const newGenerateButton = generateButton.cloneNode(true);
    generateButton.parentNode.replaceChild(newGenerateButton, generateButton);
    
    newGenerateButton.addEventListener('click', async function() {
        await handleNovaGeneration(this);
    });
}

// === GENERATION LOGIC (FIXED) ===
async function handleNovaGeneration(button) {
    const prompt = document.getElementById('prompt')?.value.trim();
    const dropdownModel = document.getElementById('modelSelect')?.value;
    const rawApiKey = document.getElementById('novaApiKey')?.value.trim();
    const temperature = parseFloat(document.getElementById('creativity')?.value || 0.7);
    const output = document.getElementById('output');
    
    if (!prompt) {
        if (output) {
            output.textContent = 'ERROR: Enter transmission text.';
            output.style.color = '#ff3300';
        }
        return;
    }
    
    if (!output) return;
    
    // UI state
    button.disabled = true;
    button.textContent = 'ENCRYPTING TRANSMISSION...';
    button.style.background = 'linear-gradient(45deg, #220000, #440000)';
    
    output.style.color = '#ccc';
    
    try {
        // CASE 1: SONIC MIRROR
        if (dropdownModel === 'local-sonic-mirror') {
            output.textContent = "‚üÅ SONIC MIRROR: Processing text locally...\nAudio system active. No API required.";
            
            await new Promise(resolve => setTimeout(resolve, 800));
            
            const sonicResponse = `[SONIC TRANSCRIPT]: ${prompt.toUpperCase()}\n\n` +
                                 `FREQUENCY ANALYZED. AUDIO PATTERNS DECODED.\n` +
                                 `CUT-UP PROTOCOL INITIATED: ${prompt.split(' ').reverse().join(' ')}\n` +
                                 `THE WORD IS A VIRUS.`;
            output.textContent = sonicResponse;
            return;
        }
        
        // CASE 2: AMAZON NOVA API
        if (!rawApiKey || !isValidNovaKey(rawApiKey)) {
            throw new Error(
                'VALID AMAZON NOVA API KEY REQUIRED.\n' +
                'Format: b3333333-8888-4444-9999-00000000000\n' +
                'Get from: https://nova.amazon.com'
            );
        }
        
        const apiKey = cleanNovaKey(rawApiKey);
        
        // üî• CRITICAL FIX: Use the mapping function
        const actualModel = getActualModelName(dropdownModel);
        
        output.textContent = `[${new Date().toLocaleTimeString()}] Connecting to Nova: ${actualModel}\n` +
                            'Establishing direct Amazon link...\n';
        
        // DIRECT AMAZON NOVA API CALL
      // DIRECT AMAZON NOVA API CALL (WITH CORS PROXY)
const targetUrl = 'https://api.nova.amazon.com/v1/chat/completions';
const proxyUrl = 'https://corsproxy.io/?' + encodeURIComponent(targetUrl);

const response = await fetch(proxyUrl, {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${apiKey}`
    },
    body: JSON.stringify({
        model: actualModel,
        messages: [
            {
                role: "system",
                content: novaPersona
            },
            {
                role: "user",
                content: prompt
            }
        ],
        temperature: temperature,
        max_tokens: 1500,
        stream: false
    })
});
        
        // Handle response
        if (!response.ok) {
            let errorMsg = '';
            const status = response.status;
            
            if (status === 401) {
                errorMsg = 'INVALID API KEY\nKey rejected by Amazon Nova.\nGet key from: https://nova.amazon.com';
            } else if (status === 402) {
                errorMsg = 'INSUFFICIENT CREDITS\nAdd funding to your Amazon account.';
            } else if (status === 404) {
                errorMsg = `MODEL NOT FOUND\nTried: "${actualModel}"\nYour dropdown value: "${dropdownModel}"`;
            } else if (status === 429) {
                errorMsg = 'RATE LIMITED\nToo many requests. Wait 60 seconds.';
            } else if (status === 503) {
                errorMsg = 'NOVA SERVICE UNAVAILABLE\nAmazon service down. Try later.';
            } else {
                try {
                    const errorData = await response.json();
                    errorMsg = `API Error ${status}: ${errorData.error?.message || 'Unknown error'}`;
                } catch {
                    errorMsg = `API Error ${status}: ${response.statusText}`;
                }
            }
            
            throw new Error(errorMsg);
        }
        
        const data = await response.json();
        
        if (!data.choices || !data.choices[0]?.message?.content) {
            throw new Error('Empty response from Nova core.');
        }
        
        // Display success
        const novaResponse = data.choices[0].message.content;
        output.textContent = `[${new Date().toLocaleTimeString()}] NOVA TRANSMISSION RECEIVED\n` +
                            '‚îÄ'.repeat(40) + '\n\n' +
                            novaResponse + '\n\n' +
                            '‚îÄ'.repeat(40) + '\n' +
                            `[Model: ${actualModel} | Temperature: ${temperature} | Tokens: ${data.usage?.total_tokens || 'N/A'}]`;
        
        // Success visual feedback
        button.style.borderColor = '#00cc00';
        button.style.color = '#00cc00';
        setTimeout(() => {
            button.style.borderColor = '#ff0033';
            button.style.color = '#ff0033';
        }, 1000);
        
    } catch (error) {
        console.error('Nova transmission failed:', error);
        
        output.style.color = '#ff3300';
        output.textContent = `[${new Date().toLocaleTimeString()}] TRANSMISSION FAILED\n` +
                            '‚îÄ'.repeat(40) + '\n\n' +
                            error.message + '\n\n' +
                            '‚îÄ'.repeat(40) + '\n' +
                            'DIRECT AMAZON LINK REQUIRED\n' +
                            'No fallbacks. No middlemen.';
        
        button.style.borderColor = '#ff3300';
        button.style.color = '#ff3300';
        setTimeout(() => {
            button.style.borderColor = '#ff0033';
            button.style.color = '#ff0033';
        }, 2000);
        
    } finally {
        // Reset UI
        button.disabled = false;
        button.textContent = 'INITIATE';
        button.style.background = 'linear-gradient(45deg, #000, #220000)';
    }
}

// === SONIC MIRROR LOGIC (Keep as is) ===
function initSonicMirror() {
    // Your existing initSonicMirror function (unchanged)
    const modelSelect = document.getElementById('modelSelect');
    const sonicStrip = document.getElementById('sonic-strip');
    const sonicStatus = document.getElementById('sonic-status');
    const recBtn = document.getElementById('recBtn');
    const playBtn = document.getElementById('playBtn');
    
    if (!modelSelect || !sonicStrip || !sonicStatus) return;
    
    // Toggle Sonic Interface
    modelSelect.addEventListener('change', () => {
        const isSonic = modelSelect.value === 'local-sonic-mirror';
        sonicStrip.style.display = isSonic ? 'block' : 'none';
        
        if (isSonic) {
            const genBtn = document.getElementById('generateButton');
            if (genBtn) genBtn.textContent = "TRANSMIT (TEXT ONLY)";
            sonicStatus.textContent = "LOCAL AUDIO BRIDGE: ONLINE";
        } else {
            const genBtn = document.getElementById('generateButton');
            if (genBtn) genBtn.textContent = "INITIATE";
        }
    });
    
    // Speech-to-Text
    if (recBtn && (window.SpeechRecognition || window.webkitSpeechRecognition)) {
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();
        recognition.continuous = false;
        recognition.lang = 'en-US';

        recBtn.onmousedown = () => {
            recognition.start();
            sonicStatus.textContent = "LISTENING...";
            recBtn.style.borderColor = "#fff";
        };

        recBtn.onmouseup = () => {
            recognition.stop();
            sonicStatus.textContent = "PROCESSING...";
            recBtn.style.borderColor = "#ff0033";
        };

        recognition.onresult = (e) => {
            const transcript = e.results[0][0].transcript;
            const promptInput = document.getElementById('prompt');
            if (promptInput) promptInput.value = transcript;
            sonicStatus.textContent = "DATA CAPTURED.";
        };
    } else if (recBtn) {
        sonicStatus.textContent = "BROWSER AUDIO UNAVAILABLE";
        recBtn.disabled = true;
    }
    
    // Text-to-Speech
    if (playBtn) {
        playBtn.onclick = () => {
            const txt = document.getElementById('output')?.textContent;
            if (!txt || txt.includes("Ready.")) return;

            sonicStatus.textContent = "SYNTHESIZING...";
            window.speechSynthesis.cancel();

            const utterance = new SpeechSynthesisUtterance(txt);
            utterance.pitch = 0.6;
            utterance.rate = 0.9;
            
            const voices = window.speechSynthesis.getVoices();
            const botVoice = voices.find(v => v.name.includes("Desktop") || v.name.includes("David"));
            if (botVoice) utterance.voice = botVoice;

            utterance.onend = () => sonicStatus.textContent = "STANDBY";
            window.speechSynthesis.speak(utterance);
        };
    }
}

// === KEYBOARD SHORTCUTS ===
document.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' && e.ctrlKey) {
        e.preventDefault();
        const generateBtn = document.getElementById('generateButton');
        if (generateBtn) generateBtn.click();
    }
    
    if (e.ctrlKey && e.shiftKey && e.key === 'K') {
        e.preventDefault();
        localStorage.removeItem('novaApiKey');
        const keyInput = document.getElementById('novaApiKey');
        const keyStatus = document.getElementById('keyStatus');
        if (keyInput) keyInput.value = '';
        if (keyStatus) {
            keyStatus.textContent = '‚ö† Key cleared from cache';
            keyStatus.style.color = '#ff3300';
        }
    }
});

    </script>
</body>
</html>
