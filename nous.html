<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="https://raw.githubusercontent.com/ghostm68/inktwo/main/Images/favicon.ico" />
<script src="https://js.puter.com/v2/"></script>
<title>Creative Writing Machine</title>

<style>
/* ------------------------------------- */
/* BASIC STYLES */
/* ------------------------------------- */
body {
    background: #0a0a0a;
    color: #f0f0f0;
    font-family: 'Georgia', serif;
    margin: 0;
    padding: 0.8rem;
}

.container {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 0.6rem;
    max-width: 1800px;
    margin: 0 auto;
    min-height: 85vh;
}

@media (max-width: 1200px) {
    .container {
        grid-template-columns: 1fr;
    }
}

h1 {
    text-align: center;
    font-size: 1.8rem;
    color: #d4af37;
}

.subtitle {
    text-align: center;
    color: #aaa;
    margin-bottom: 0.8rem;
    font-size: 0.85rem;
}

/* ------------------------------------- */
/* PANEL */
/* ------------------------------------- */
.panel {
    background: #1a1a1a;
    border: 1px solid #333;
    border-radius: 6px;
    padding: 0.8rem;
    display: flex;
    flex-direction: column;
}

.panel h2 {
    margin: 0 0 0.6rem 0;
    color: #eee;
    border-bottom: 1px solid #333;
    padding-bottom: 0.4rem;
}

/* ------------------------------------- */
/* NOTEPAD */
/* ------------------------------------- */
#notepad {
    width: 100%;
    flex: 1;
    background: #0a0a0a;
    color: #f0f0f0;
    border: 1px solid #444;
    padding: 0.6rem;
    line-height: 1.4;
    resize: none;
    min-height: 280px;
    font-size: 0.85rem;
}

button {
    background: transparent;
    color: #eee;
    border: 1px solid #555;
    cursor: pointer;
    padding: 0.4rem;
}

button:hover {
    background: #222;
}

/* ------------------------------------- */
/* CRT EFFECT â€” FULL RETRO */
/* ------------------------------------- */

/* Barrel distortion + glow */
.crt {
    position: relative;
    padding: 0.8rem;
    border-radius: 6px;
    filter:
        contrast(1.2)
        saturate(1.2)
        brightness(1.1)
        drop-shadow(0 0 10px rgba(0,255,180,0.2));
    transform: perspective(900px) rotateX(2deg) rotateY(1deg);
    overflow: hidden;
}

/* Inner glow */
.crt::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background:
        radial-gradient(circle at 50% 50%, rgba(0,255,200,0.07), transparent 60%);
}

/* Scanlines */
.crt::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.03) 0px,
        rgba(255,255,255,0.03) 1px,
        rgba(0,0,0,0.05) 2px
    );
    animation: roll 0.008s infinite linear;
    mix-blend-mode: overlay;
}

@keyframes roll {
    0% { transform: translateY(0); }
    100% { transform: translateY(2px); }
}

/* TV static overlay */
.static-noise {
    position: relative;
}

.static-noise::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background-image: url("https://raw.githubusercontent.com/ghostm68/inktwo/main/Images/static.gif");
    opacity: 0.10;
    mix-blend-mode: screen;
}

/* Flicker animation */
.flicker {
    animation: flickerAnim 0.12s infinite alternate;
}

@keyframes flickerAnim {
    from { opacity: 0.97; }
    to { opacity: 1; }
}

/* ------------------------------------- */
/* OUTPUT BOX */
/* ------------------------------------- */
.story-output {
    flex: 1;
    background: #000;
    padding: 0.8rem;
    white-space: pre-wrap;
    line-height: 1.4;
    font-size: 0.85rem;
    overflow-y: auto;
}

/* Loading pulse */
.generating {
    animation: pulse 1.5s infinite;
    color: #d4af37;
}

@keyframes pulse {
    0% { opacity: 0.5; }
    50% { opacity: 1; }
    100% { opacity: 0.5; }
}
</style>
</head>

<body>

<h1>CREATIVE WRITING MACHINE</h1>
<p class="subtitle">Liquid AI â€¢ Hermes Engine â€¢ GPT-5.2 â€¢ Grok â€¢ Gemma</p>

<div class="container">

    <!-- NOTEPAD -->
    <div class="panel">
        <h2>Notepad</h2>
        <textarea id="notepad" placeholder="Write notes here..."></textarea>
        <div style="display:flex; gap:0.4rem; margin-top:0.6rem;">
            <button id="exportButton">Export</button>
            <button id="clearButton">Clear</button>
        </div>
    </div>

    <!-- AI CONTROLS -->
    <div class="panel">
        <h2>AI Controls</h2>

        <label style="color:#d4af37;">Select Model:</label>
        <select id="modelSelect" style="width:100%; padding:0.3rem; margin-bottom:0.6rem;">
            <optgroup label="ðŸ’§ Liquid AI">
                <option value="liquidai/lfm-3b">Liquid LFM 3B</option>
                <option value="liquidai/lfm-7b">Liquid LFM 7B</option>
                <option value="liquidai/lfm-40b">Liquid LFM 40B</option>
            </optgroup>

            <optgroup label="âš¡ Grok">
                <option value="x-ai/grok-1">Grok 1</option>
                <option value="x-ai/grok-2">Grok 2</option>
            </optgroup>

            <optgroup label="ðŸ§  Hermes">
                <option value="nousresearch/hermes-3-70b">Hermes 3 â€“ 70B</option>
                <option value="nousresearch/hermes-3-405b">Hermes 3 â€“ 405B</option>
            </optgroup>

            <optgroup label="ðŸ¤– OpenAI">
                <option value="openai/gpt-5.2">GPT-5.2</option>
                <option value="openai/gpt-4.1">GPT-4.1</option>
                <option value="openai/gpt-4o">GPT-4o</option>
            </optgroup>

            <optgroup label="âœ¨ Google">
                <option value="google/gemma-2-9b-it">Gemma 2 â€“ 9B</option>
            </optgroup>
        </select>

        <label style="color:#aaa;">Writing Prompt:</label>
        <textarea id="prompt" style="width:100%; height:140px;"></textarea>

        <button id="generateButton" style="margin-top:0.6rem;">Generate</button>

    </div>

    <!-- OUTPUT -->
    <div class="panel">
        <h2>Generated Output</h2>

        <div id="output" class="story-output crt static-noise flicker">
            Ready for input.
        </div>

        <button id="copyButton" style="margin-top:0.6rem;" disabled>Import to Notepad</button>
    </div>

</div>

<script>
/* ------------------------------------- */
/* EXPORT & CLEAR */
/* ------------------------------------- */
document.getElementById('exportButton').onclick = () => {
    const text = document.getElementById('notepad').value;
    if (!text.trim()) return alert("Notepad is empty");
    const blob = new Blob([text], { type:"text/plain" });
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = "creative-writing.txt";
    a.click();
};

document.getElementById('clearButton').onclick = () => {
    if (confirm("Clear notepad?"))
        document.getElementById('notepad').value = "";
};

/* ------------------------------------- */
/* SAFE RESPONSE EXTRACTION */
/* ------------------------------------- */
function extractContent(res) {
    if (!res) return "âŒ Empty response";
    if (typeof res === "string") return res;
    if (res.message?.content) return res.message.content;
    if (Array.isArray(res.choices) && res.choices[0]?.message?.content)
        return res.choices[0].message.content;
    return JSON.stringify(res, null, 2);
}

/* ------------------------------------- */
/* GENERATION */
/* ------------------------------------- */
document.getElementById('generateButton').addEventListener('click', async () => {

    const prompt = document.getElementById('prompt').value;
    const model  = document.getElementById('modelSelect').value;
    const output = document.getElementById('output');
    const copyBtn = document.getElementById('copyButton');
    const genBtn = document.getElementById('generateButton');

    if (!prompt.trim()) {
        output.textContent = "âŒ Enter a prompt first";
        return;
    }

    // Animated status text
    let status = "ðŸ¤– Thinking...";
    if (model.startsWith("liquidai/"))
        status = "ðŸŒŠ Liquid is flowing...";
    else if (model.includes("grok"))
        status = "âš¡ Grok uplink engaging...";
    else if (model.includes("hermes"))
        status = "ðŸ§  Hermes is composing...";
    else if (model.includes("gpt"))
        status = "âœ¨ GPT engine warming up...";

    output.textContent = status;
    output.classList.add("generating");
    genBtn.disabled = true;
    copyBtn.disabled = true;

    try {
        const response = await puter.ai.chat(prompt, {
            model,
            temperature: 0.7,
            max_tokens: 2000
        });

        output.classList.remove("generating");
        output.textContent = extractContent(response);
        copyBtn.disabled = false;

    } catch (err) {
        output.classList.remove("generating");
        output.textContent = "âŒ ERROR: " + err.message;
        console.error(err);
    }

    genBtn.disabled = false;
});

document.getElementById('copyButton').onclick = () => {
    const out = document.getElementById('output').textContent;
    const pad = document.getElementById('notepad');
    pad.value += "\n\n" + out;
};
</script>

</body>
</html>
