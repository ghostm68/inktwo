<!--[if IE 6]>
<html id="ie6" lang="en-US">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8) ]><!-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
	<link rel="icon" type="image/svg+xml" href="https://cdn.jsdelivr.net/gh/ghostm68/inktwo@main/svg/inky.svg">
  
    <link rel="apple-touch-icon" type="image/png" href="https://github.com/ghostm68/pantheon/raw/main/inkto.png" />	
  	    <!--ink city layout 014
 -Created by www.inkrealm.info 
 (based on nyt & other sources)
 (inspired by desire 
 and the spirit of innovation)
    ja: "ç§ã®å€‹äººæƒ…å ±ã‚’è²©å£²ã—ãªã„(ã‚«ãƒªãƒ•ã‚©ãƒ«ãƒ‹ã‚¢å·žæ¶ˆè²»è€…ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼æ³•)",
        en: "Do Not Sell My Info (KKKalifornia)"---> 
      <!-- â‚  Â£  â‚¿ Â£ 0 âˆ†å…ƒ âˆ†ï¿¦ âˆ† ðŸ‚¶ï¿¥  Â£ ðŸ‚¶ï¿¥
 Â£ áž¯                                                                     
,     ,               .       
|     |               |       
| ;-. | , ;-. ,-. ,-: | ;-.-. 
| | | |<  |   |-' | | | | | | 
' ' ' ' ` '   `-' `-` ' ' ' ' 
  0å…ƒ âˆ†ï¿¦ âˆ† Â¢á¶„á¶„ â‚ âŽˆ â‘± â™˜ð…™ â‚ª Ñ 
 â™¢ for investment advice : âš¡
+â€¢1=9=1â€¢7=3â€¢1=0â€¢0=1â€¢1â€¢6â€¢ --->    

	<style> html.fouc-factor{ opacity:0; filter:alpha(opacity=0); } </style>
	<meta property="vk:image" content="https://vk.com/authorwave?z=photo707345788_457239017%2Falbum707345788_0">
	<meta name="p:domain_verify" content="3b55be68eb5ca93c0411d8779e1fa6c2"/>
<link type="application/rss+xml" rel="alternate" title="two skinny girls" href="https://feeds.buzzsprout.com/2330793.rss"/>
  <meta http-equiv="onion-location" content="http://yd3r4tdjgg7you3tuq7uyy5hl7tbwzowmd4pcgf6gpgk24hyawcvsjqd.onion" />
    <meta property="tiktok:app_id" content="@twoskinnygirls" />
    <meta name="twitter:site" content="@inkrealm" />
    <meta name="slack-app-id" content="f060RUD44R3" />	
		<!-- anti-cache insurance -->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
	<meta itemprop="name" content="inkrealm info satellite"/>

			<meta name="copyright" content="Copyright 2026  INKREALM-NEXUS. All rights reserved."/>		 
	<style>
  <title>INK REALM // SATELLITE</title>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=Special+Elite&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-dark: #0a0a0a;
      --panel-bg: rgba(15, 15, 15, 0.95);
      --border: #333;
      --text: #e0e0e0;
      --accent: #8a1c1c;
      --accent-dim: rgba(138, 28, 28, 0.3);
      --paper: #e6e6e6;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background-color: var(--bg-dark);
      font-family: 'IBM Plex Mono', monospace;
      color: var(--text);
      height: 100vh;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* --- BACKGROUND --- */
    .bg-video {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      object-fit: cover; opacity: 0.15; z-index: -2;
      filter: grayscale(100%) contrast(1.2);
    }
 

    /* --- LAYOUT --- */
    .dashboard {
      display: grid;
      grid-template-columns: 280px 1fr 280px;
      gap: 15px;
      width: 98%;
      max-width: 1600px;
      height: 92vh;
      position: relative;
      z-index: 10;
    }

    .panel {
      background: var(--panel-bg);
      border: 1px solid var(--border);
      backdrop-filter: blur(10px);
      display: flex;
      flex-direction: column;
      border-radius: 4px;
      overflow: hidden;
      box-shadow: 0 10px 40px rgba(0,0,0,0.6);
    }

    .panel-header {
      background: #050505;
      padding: 10px;
      border-bottom: 1px solid var(--border);
      font-size: 10px;
      letter-spacing: 2px;
      color: #666;
      font-weight: 600;
      text-transform: uppercase;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    /* --- LEFT: CHAT --- */
    .terminal-panel { border-top: 2px solid var(--accent); }
    
    .chat-log {
      flex: 1;
      background: #080808;
      padding: 12px;
      overflow-y: auto;
      font-size: 11px;
      color: #888;
      font-family: 'IBM Plex Mono', monospace;
    }
    
    .log-msg { margin-bottom: 8px; line-height: 1.4; word-wrap: break-word; }
    .log-msg.user { color: #fff; border-left: 2px solid #333; padding-left: 8px; }
    .log-msg.sys { color: var(--accent); }
    .log-msg.info { color: #44aa44; }

    .chat-controls { padding: 10px; background: #111; border-top: 1px solid #222; }
    
    .chat-input {
      width: 100%; background: #000; border: 1px solid #333;
      color: #fff; padding: 8px; font-family: inherit; margin-bottom: 8px;
      font-size: 11px; outline: none;
    }
    .chat-input:focus { border-color: #666; }
    
    .btn-group { display: flex; gap: 5px; }
    .btn-full { 
      flex: 1; padding: 6px; background: #222; border: 1px solid #333; 
      color: #888; cursor: pointer; font-size: 10px; text-transform: uppercase; 
    }
    .btn-full:hover { background: #333; color: #fff; }
    /* Change to red theme: */
.btn-full.active {
    background: #221111;    /* Dark red background */
    color: var(--accent);   /* Red text */
    border-color: var(--accent);  /* Red border */
}

    /* --- CENTER: EDITOR --- */
    .editor-panel {
      border: 1px solid #333;
      background: linear-gradient(180deg, #1a1a1a, #0d0d0d);
    }

    .toolbar {
      padding: 8px 12px;
      background: #111;
      border-bottom: 1px solid #222;
      display: flex; gap: 6px; align-items: center;
      flex-wrap: wrap;
    }

    .btn {
      background: #1a1a1a; border: 1px solid #333; color: #888;
      padding: 5px 10px; font-family: inherit; font-size: 11px;
      cursor: pointer; min-width: 30px;
    }
    .btn:hover { background: #333; color: #fff; }
    .btn.accent { border-color: #522; color: #a55; }
    .btn.accent:hover { background: var(--accent); color: #fff; }
    
    .sep { width: 1px; height: 16px; background: #333; margin: 0 4px; }

    .paper-container {
      flex: 1;
      background: #050505;
      padding: 20px;
      overflow: hidden;
      display: flex;
      justify-content: center;
    }

    .paper-sheet {
      background: var(--paper);
      width: 100%;
      max-width: 800px;
      height: 100%;
      padding: 40px 50px;
      font-family: 'Special Elite', 'Courier New', serif;
      font-size: 18px;
      line-height: 1.6;
      color: #111;
      outline: none;
      overflow-y: auto;
      white-space: pre-wrap;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }

    /* Formatting */
    .paper-sheet::selection { background: var(--accent-dim); }
    .paper-sheet b { font-weight: 900; }
    .paper-sheet i { font-style: italic; }
    .paper-sheet u { text-decoration-color: var(--accent); text-decoration-thickness: 2px; }
    
    /* Replace the existing .stamp-block css with this: */
.stamp-block { 
  display: inline-block; 
  border: 4px solid var(--accent); 
  color: var(--accent);
  padding: 5px 12px; 
  font-weight: 900; 
  font-family: 'Courier New', monospace; /* Force standard typewriter font for stamp */
  text-transform: uppercase;
  letter-spacing: 3px;
  transform: rotate(-12deg); /* More tilt for realism */
  opacity: 0.85; /* Ink isn't solid */
  margin: 0 10px;
  box-shadow: 0 0 0 2px rgba(138, 28, 28, 0.1); /* Slight bleed */
}
    
    .redacted { background: #000; color: #000; padding: 0 4px; cursor: help; }
    .redacted:hover { color: #fff; }
    .redacted { 
  background: #000; 
  color: #000; 
  padding: 0 4px; 
  user-select: none; /* Prevents highlighting the text inside */
}
.redacted:hover { 
  color: #333; /* Only barely visible on hover */
  cursor: help; 
}

    /* --- RIGHT: NOTEPAD --- */
    .notepad-panel { border-top: 2px solid #fff; }
    
    #note-input {
      flex: 1; width: 100%;
      background: #111; color: #bbb;
      border: none; outline: none; resize: none;
      padding: 15px; font-family: 'Special Elite', monospace; font-size: 13px;
      line-height: 1.5;
    }
    
    .note-footer {
      padding: 8px; background: #080808; border-top: 1px solid #222;
      font-size: 10px; color: #555; display: flex; justify-content: space-between;
    }
	.paper-sheet {
  background: #f0f0f0;
  color: #111;
  box-shadow: 0 0 25px rgba(0,0,0,0.6);
}

.bg-video {
  opacity: 0.12; /* Slightly reduce opacity */
}	

    /* Scrollbars */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: #050505; }
    ::-webkit-scrollbar-thumb { background: #333; }
    ::-webkit-scrollbar-thumb:hover { background: #555; }
  </style>
<style>
#sputnik-ticker-container {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: rgba(15, 15, 15, 0.95);
    border-top: 1px solid var(--border);
    padding: 8px 0;
    overflow: hidden;
    z-index: 10000;
    backdrop-filter: blur(10px);
}

#sputnik-ticker {
    display: inline-block;
    white-space: nowrap;
    padding-left: 100%;
    animation: scroll-ticker 90s linear infinite;
}

#sputnik-ticker.paused {
    animation-play-state: paused;
}

#sputnik-ticker a {
    color: var(--accent); /* #8a1c1c - dark red */
    text-decoration: none;
    margin: 0 40px;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: color 0.2s;
}

#sputnik-ticker a:hover {
    color: #fff;
}

@keyframes scroll-ticker {
    0% { transform: translateX(0); }
    100% { transform: translateX(-100%); }
}

/* Mobile stacking */
@media screen and (max-width: 768px) {
    .dashboard {
        grid-template-columns: 1fr;
        grid-template-rows: auto auto auto;
        height: auto;
        gap: 10px;
    }
    
    .panel {
        min-height: 300px;
    }
    
    .editor-panel {
        min-height: 400px;
    }
    
    #sputnik-ticker a {
        font-size: 9px;
        margin: 0 20px;
    }
}
	
</style>
</head>
<body>

  <video class="bg-video" autoplay muted loop playsinline>
    <source src="https://raw.githubusercontent.com/ghostm68/pantheon/main/master and margarita inkrealminfo1991.mp4" type="video/mp4">
  </video>


  <div class="dashboard">
    
    <!-- LEFT: NEURAL TERMINAL -->
    <div class="panel terminal-panel">
      <div class="panel-header">
        <span>PRIVATE LINK</span>
        <div style="width:8px; height:8px; background:#333; border-radius:50%;" id="ai-status-dot"></div>
      </div>
      <div class="chat-log" id="chat-log">
        <div class="log-msg sys">// Interface Ready.</div>
        <div class="log-msg sys">// Press INITIALIZE to load QWEN core.</div>
      </div>
      <div class="chat-controls">
        <input type="text" class="chat-input" id="chat-input" placeholder="Type message...">
        <div class="btn-group">
          <button class="btn-full active" id="btn-init-ai">INITIALIZE</button>
          <button class="btn-full" id="chat-send">SEND</button>
        </div>
      </div>
    </div>

    <!-- CENTER: TYPEWRITER EDITOR -->
    <div class="panel editor-panel">
      <div class="panel-header">
        <span>ADLER // TYPE II</span>
        <span id="save-status" style="color:#444">READY</span>
      </div>
      
      <div class="toolbar">
        <button class="btn" data-cmd="bold"><b>B</b></button>
        <button class="btn" data-cmd="italic"><i>I</i></button>
        <button class="btn" data-cmd="underline"><u>U</u></button>
        <div class="sep"></div>
        <button class="btn" id="btn-redact" title="Redact Text">â–ˆâ–ˆ</button>
        <button class="btn accent" id="btn-stamp" title="Insert Stamp">RNDM-STMP</button>
        <button class="btn accent" data-stamp="CONFIDENTIAL" title="Insert Confidential Stamp">CONF</button>
       <button class="btn accent" data-stamp="TOP SECRET" title="Insert Top Secret Stamp">TSEC</button>
       <button class="btn accent" data-stamp="CLASSIFIED" title="Insert Classified Stamp">CLAS</button>
       <button class="btn accent" data-stamp="EYES ONLY" title="Insert Eyes Only Stamp">EYES</button>
        <button class="btn" id="btn-date" title="Insert Date">DATE</button>
        <div class="sep"></div>
        <button class="btn" id="btn-download" title="Save to Disk (File)">SAVE FILE</button>
        <button class="btn accent" id="btn-clear" title="Clear All">CLEAR</button>
      </div>

      <div class="paper-container">
        <!-- ContentEditable = True Magic -->
        <div id="paper" class="paper-sheet" contenteditable="true" spellcheck="false"></div>
      </div>
    </div>

    <!-- RIGHT: NOTEPAD -->
    <div class="panel notepad-panel">
      <div class="panel-header">
        <span>SCRATCHPAD</span>
        <span>URL instant SYNC</span>
      </div>
      <textarea id="note-input" placeholder="// Quick notes..."></textarea>
      <div class="note-footer">
        <span id="note-count">0 chars</span>
        <span id="note-status">IDLE</span>
      </div>
    </div>

  </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- 1. TYPEWRITER ENGINE ---
    const paper = document.getElementById('paper');
    const saveStatus = document.getElementById('save-status');

    // Load initial content
    if(!localStorage.getItem('ink-main')) {
        paper.innerHTML = `<div><b>CONFIDENTIAL REPORT</b></div><div><br></div><div>Subject: _________________</div><div>Date: <span class="redacted">1985-10-25</span></div><div><br></div><div>The quick brown fox jumps over the lazy dog.</div>`;
    } else {
        paper.innerHTML = localStorage.getItem('ink-main');
    }

    // -- Helper: Always ensure paper has focus before executing commands --
    function restoreFocus() {
        if (document.activeElement !== paper) {
            paper.focus();
        }
    }

    // Formatting Buttons (B/I/U)
    document.querySelectorAll('.btn[data-cmd]').forEach(btn => {
        btn.addEventListener('mousedown', (e) => {
            e.preventDefault(); // Prevent button from stealing focus
            restoreFocus();
            document.execCommand(btn.dataset.cmd, false, null);
        });
    });

    // Special Tools: Date
    document.getElementById('btn-date').addEventListener('mousedown', (e) => {
        e.preventDefault();
        restoreFocus();
        const d = new Date().toISOString().split('T')[0];
        document.execCommand('insertText', false, ` [${d}] `);
    });

    // Special Tools: Redact
    document.getElementById('btn-redact').addEventListener('mousedown', (e) => {
        e.preventDefault();
        restoreFocus();
        const sel = window.getSelection();
        const html = sel.toString().length > 0 
            ? `<span class="redacted">${sel.toString()}</span>`
            : `<span class="redacted">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</span>`;
        document.execCommand('insertHTML', false, html);
    });

    // Special Tools: Stamp
  // Special Tools: Stamp (Randomized)
document.getElementById('btn-stamp').addEventListener('mousedown', (e) => {
    e.preventDefault();
    restoreFocus(); // Ensures it stamps where your cursor is
    
    // The list of possible stamps
    const stamps = ['CONFIDENTIAL', 'TOP SECRET', 'CLASSIFIED', 'EYES ONLY', 'REJECTED'];
    const randomText = stamps[Math.floor(Math.random() * stamps.length)];
    
    // Insert the stamp with non-breaking spaces around it so you can keep typing
    document.execCommand('insertHTML', false, `&nbsp;<span class="stamp-block">${randomText}</span>&nbsp;`);
});

  // Special Tools: Individual Stamps
document.querySelectorAll('.btn[data-stamp]').forEach(btn => {
    btn.addEventListener('mousedown', (e) => {
        e.preventDefault();
        restoreFocus();
        const stampText = btn.dataset.stamp;
        document.execCommand('insertHTML', false, `&nbsp;<span class="stamp-block">${stampText}</span>&nbsp;`);
    });
});

// Remove or comment out the old randomized stamp handler
// document.getElementById('btn-stamp').addEventListener('mousedown', (e) => { ... });

    // REAL SAVE TO DISK (Download File)
    document.getElementById('btn-download').addEventListener('click', () => {
        // 1. Create content blob
        const content = `
<!DOCTYPE html>
<html>
<head><title>Ink Realm Document</title></head>
<body style="font-family:'Courier New'; padding:40px; background:#f0f0f0;">
  <div style="background:#fff; padding:40px; border:1px solid #ccc; max-width:800px; margin:0 auto;">
    ${paper.innerHTML}
  </div>
  <!-- Sputnik Globe Ticker Footer -->
<div id="sputnik-ticker-container">
    <div id="sputnik-ticker">
        <span style="color: #666;">[ INITIALIZING FEED... ]</span>
    </div>
</div>
<!-- Sputnik Globe Ticker Footer -->
<div id="sputnik-ticker-container">
    <div id="sputnik-ticker">
        <span style="color: #666;">[ INITIALIZING FEED... ]</span>
    </div>
</div>
</body>
</html>`;
        
        // 2. Create download link
        const blob = new Blob([content], {type: 'text/html'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'ink_realm_doc.html'; // Saves as HTML to keep Bold/Redaction
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);

        // 3. Update UI
        flashStatus('FILE SAVED');
    });

    // Background Auto-Save to LocalStorage (Safety)
    paper.addEventListener('input', () => {
        localStorage.setItem('ink-main', paper.innerHTML);
    });

    document.getElementById('btn-clear').addEventListener('click', () => {
        if(confirm("Permanently clear the paper?")) paper.innerHTML = '';
    });

    function flashStatus(msg) {
        saveStatus.textContent = msg;
        saveStatus.style.color = '#fff';
        setTimeout(() => {
            saveStatus.textContent = 'READY';
            saveStatus.style.color = '#444';
        }, 2000);
    }


    // --- 2. NOTEPAD ENGINE (URL Hash) ---
    const noteInput = document.getElementById('note-input');
    const noteStatus = document.getElementById('note-status');
    const noteCount = document.getElementById('note-count');

    // Compression
    async function compress(str) {
        if(!str) return '';
        const stream = new Blob([str]).stream().pipeThrough(new CompressionStream('gzip'));
        const buffer = await new Response(stream).arrayBuffer();
        return btoa(String.fromCharCode(...new Uint8Array(buffer)));
    }

    async function decompress(str) {
        if(!str) return '';
        try {
            const stream = new Blob([Uint8Array.from(atob(str), c => c.charCodeAt(0))]).stream().pipeThrough(new DecompressionStream('gzip'));
            return await new Response(stream).text();
        } catch(e) { return ''; }
    }

    async function initNotes() {
        const hash = window.location.hash.slice(1);
        if(hash) {
            noteInput.value = await decompress(hash);
            noteStatus.textContent = 'URL LOAD';
        } else {
            noteInput.value = localStorage.getItem('ink-notes') || "";
        }
        noteCount.textContent = noteInput.value.length + " chars";
    }
    initNotes();

    let noteTimer;
    noteInput.addEventListener('input', () => {
        noteCount.textContent = noteInput.value.length + " chars";
        noteStatus.textContent = '...';
        clearTimeout(noteTimer);
        noteTimer = setTimeout(async () => {
            localStorage.setItem('ink-notes', noteInput.value);
            const compressed = await compress(noteInput.value);
            if(compressed) window.history.replaceState(null, null, '#' + compressed);
            noteStatus.textContent = 'SAVED';
            noteStatus.style.color = '#fff';
            setTimeout(() => { noteStatus.textContent = 'IDLE'; noteStatus.style.color = '#555'; }, 1000);
        }, 1000);
    });


    // --- 3. NEURAL TERMINAL (WebLLM) ---
    const chatLog = document.getElementById('chat-log');
    const chatInput = document.getElementById('chat-input');
    const chatSend = document.getElementById('chat-send');
    const btnInit = document.getElementById('btn-init-ai');
    const aiDot = document.getElementById('ai-status-dot');
    
    let engine = null;
    const modelId = "Qwen2.5-0.5B-Instruct-q4f16_1-MLC"; 

    // Explicit Initialization Button
    btnInit.addEventListener('click', async () => {
        if(engine) return;
        
        btnInit.disabled = true;
        btnInit.textContent = "LOADING...";
        addLog('sys', 'Initializing Neural Core (Downloading ~300MB)...');
        
        try {
            const { CreateMLCEngine } = await import("https://esm.run/@mlc-ai/web-llm@0.2.79");
            engine = await CreateMLCEngine(modelId, {
                initProgressCallback: (report) => {
                    const pct = Math.round(report.progress * 100);
                    // Only log every 10% to avoid spam
                    if(pct % 20 === 0 && pct > 0) {
                        // Optional: update a specific element instead of spamming log
                    }
                }
            });
            
            addLog('info', '>> CORE ONLINE. READY FOR INPUT.');
            aiDot.style.background = '#0f0';
            aiDot.style.boxShadow = '0 0 8px #0f0';
            btnInit.textContent = "ACTIVE";
            btnInit.style.borderColor = "#0f0";
            btnInit.style.color = "#0f0";
            
        } catch(e) {
            addLog('sys', 'Init Failed: ' + e.message);
            btnInit.textContent = "RETRY";
            btnInit.disabled = false;
        }
    });

    chatSend.addEventListener('click', handleChat);
    chatInput.addEventListener('keypress', (e) => {
        if(e.key === 'Enter') handleChat();
    });

    async function handleChat() {
        const txt = chatInput.value.trim();
        if(!txt) return;
        
        if(!engine) {
            addLog('sys', '!! ERROR: Press INITIALIZE first.');
            return;
        }

        addLog('user', txt);
        chatInput.value = '';
        chatInput.disabled = true;

        try {
            const chunks = await engine.chat.completions.create({
                messages: [
                    { role: "system", content: "You are a noir terminal assistant. Concise, helpful, slightly mysterious." },
                    { role: "user", content: txt }
                ],
                temperature: 0.7,
                max_tokens: 256,
            });
            addLog('sys', chunks.choices[0].message.content);
        } catch(e) {
            addLog('sys', 'Error: ' + e.message);
        }

        chatInput.disabled = false;
        chatInput.focus();
    }

    function addLog(role, txt) {
        const div = document.createElement('div');
        div.className = `log-msg ${role}`;
        div.textContent = (role === 'user' ? '> ' : '') + txt;
        chatLog.appendChild(div);
        chatLog.scrollTop = chatLog.scrollHeight;
    }

});
</script>
  <script>
    
    // Special Tools: Redact
    document.getElementById('btn-redact').addEventListener('mousedown', (e) => {
        e.preventDefault();
        restoreFocus();
        const sel = window.getSelection();
        const html = sel.toString().length > 0 
            ? `<span class="redacted">${sel.toString()}</span>`
            : `<span class="redacted">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</span>`;
        document.execCommand('insertHTML', false, html);
    });

    // Special Tools: Stamp
  // Special Tools: Stamp (Randomized)
document.getElementById('btn-stamp').addEventListener('mousedown', (e) => {
    e.preventDefault();
    restoreFocus(); // Ensures it stamps where your cursor is
    
    // The list of possible stamps
    const stamps = ['CONFIDENTIAL', 'TOP SECRET', 'CLASSIFIED', 'EYES ONLY', 'REJECTED'];
    const randomText = stamps[Math.floor(Math.random() * stamps.length)];
    
    // Insert the stamp with non-breaking spaces around it so you can keep typing
    document.execCommand('insertHTML', false, `&nbsp;<span class="stamp-block">${randomText}</span>&nbsp;`);
});

  // Special Tools: Individual Stamps
document.querySelectorAll('.btn[data-stamp]').forEach(btn => {
    btn.addEventListener('mousedown', (e) => {
        e.preventDefault();
        restoreFocus();
        const stampText = btn.dataset.stamp;
        document.execCommand('insertHTML', false, `&nbsp;<span class="stamp-block">${stampText}</span>&nbsp;`);
    });
});

  </script>
  <script>
    // --- TYPING SOUND ENGINE (Synth Version) ---
const audioContext = new (window.AudioContext || window.webkitAudioContext)();
let isMuted = false;
let lastKeyTime = 0;

// Typewriter click sound
function playTypeSound() {
    if (isMuted || !audioContext || document.activeElement !== paper) return;
    
    try {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.type = 'square';
        oscillator.frequency.setValueAtTime(80 + Math.random() * 40, audioContext.currentTime);
        
        gainNode.gain.setValueAtTime(0, audioContext.currentTime);
        gainNode.gain.linearRampToValueAtTime(0.1, audioContext.currentTime + 0.001);
        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.05);
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.start();
        oscillator.stop(audioContext.currentTime + 0.05);
        
    } catch(e) {
        // Silent fail if audio not supported
    }
}

// Space bar sound (deeper)
function playSpaceSound() {
    if (isMuted || !audioContext) return;
    
    try {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.type = 'sawtooth';
        oscillator.frequency.setValueAtTime(60 + Math.random() * 20, audioContext.currentTime);
        
        gainNode.gain.setValueAtTime(0, audioContext.currentTime);
        gainNode.gain.linearRampToValueAtTime(0.15, audioContext.currentTime + 0.002);
        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.1);
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.start();
        oscillator.stop(audioContext.currentTime + 0.1);
        
    } catch(e) {
        // Silent fail
    }
}

// Enter/Return bell sound
function playBellSound() {
    if (isMuted || !audioContext) return;
    
    try {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.type = 'sine';
        oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
        oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 0.3);
        
        gainNode.gain.setValueAtTime(0, audioContext.currentTime);
        gainNode.gain.linearRampToValueAtTime(0.1, audioContext.currentTime + 0.01);
        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.3);
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.start();
        oscillator.stop(audioContext.currentTime + 0.3);
        
    } catch(e) {
        // Silent fail
    }
}

// Connect to paper typing
paper.addEventListener('keydown', (e) => {
    const now = Date.now();
    if (now - lastKeyTime < 50) return; // Debounce
    
    lastKeyTime = now;
    
    if (e.key === 'Enter') {
        playBellSound();
    } else if (e.key === ' ' || e.key === 'Spacebar') {
        playSpaceSound();
    } else if (e.key.length === 1 && !e.ctrlKey && !e.metaKey && !e.altKey) {
        playTypeSound();
    }
});

// Connect to all editor buttons
document.querySelectorAll('.btn[data-cmd], #btn-redact, #btn-date, .btn[data-stamp], #btn-stamp').forEach(btn => {
    btn.addEventListener('mousedown', (e) => {
        if (audioContext.state === 'suspended') {
            audioContext.resume();
        }
        playTypeSound();
    });
});

// Add mute toggle to toolbar
// Create mute button
const muteBtn = document.createElement('button');
muteBtn.className = 'btn';
muteBtn.id = 'btn-mute';
muteBtn.title = 'Audio Pulse';
muteBtn.innerHTML = 'â—'; // Solid circle for ON state
muteBtn.style.marginLeft = 'auto';
muteBtn.style.color = '#fff'; // White color
muteBtn.style.fontSize = '16px'; // Slightly larger for visibility

// Update the click handler:
muteBtn.addEventListener('click', () => {
    isMuted = !isMuted;
    
    // Switch between solid and hollow circle
    muteBtn.innerHTML = isMuted ? 'â—‹' : 'â—';
    
    // Keep white color for both states
    muteBtn.style.color = '#fff';
    
    // Optional: add subtle red glow when active
    if (!isMuted) {
        muteBtn.style.textShadow = '0 0 4px var(--accent)';
    } else {
        muteBtn.style.textShadow = 'none';
    }
    
    if (isMuted && audioContext) {
        audioContext.suspend();
    } else if (audioContext) {
        audioContext.resume();
    }
});

// Insert mute button into toolbar (after last separator)
const toolbar = document.querySelector('.toolbar');
const lastSep = document.querySelectorAll('.sep');
if (lastSep.length > 0) {
    toolbar.insertBefore(muteBtn, lastSep[lastSep.length - 1].nextSibling);
} else {
    toolbar.appendChild(muteBtn);
}

// Resume audio on first user interaction (browser requirement)
document.addEventListener('click', function initAudio() {
    if (audioContext && audioContext.state === 'suspended') {
        audioContext.resume();
    }
    document.removeEventListener('click', initAudio);
}, { once: true });
  </script>
	<script>
// Sputnik Globe Archive Ticker
async function fetchSputnikTicker() {
    const tickerElement = document.getElementById('sputnik-ticker');
    const feedUrl = 'https://sputnikglobe.com/export/rss2/archive/index.xml';
    const proxyUrl = 'https://api.allorigins.win/raw?url=';

    try {
        tickerElement.innerHTML = '<span style="color: #666; font-style: italic;">[ Loading Sputnik Feed... ]</span>';
        
        const response = await fetch(proxyUrl + encodeURIComponent(feedUrl));
        if (!response.ok) throw new Error(`Network Error: ${response.status}`);
        
        const xmlText = await response.text();
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(xmlText, 'text/xml');
        const items = xmlDoc.querySelectorAll('item');
        
        if (items.length === 0) {
            tickerElement.innerHTML = '<span style="color: #ff0033;">[ Feed Empty ]</span>';
            return;
        }
        
        let tickerHTML = '';
        items.forEach(item => {
            const title = item.querySelector('title')?.textContent || 'News Update';
            const link = item.querySelector('link')?.textContent || '#';
            const pubDate = item.querySelector('pubDate')?.textContent || '';
            
            let dateStr = '';
            if (pubDate) {
                const date = new Date(pubDate);
                dateStr = ` [${date.toLocaleDateString()}]`;
            }
            
            tickerHTML += `<a href="${link}" target="_blank" rel="noopener" title="${title}${dateStr}">${title}${dateStr}</a>`;
        });
        
        tickerElement.innerHTML = tickerHTML;
        
        tickerElement.addEventListener('mouseenter', () => tickerElement.classList.add('paused'));
        tickerElement.addEventListener('mouseleave', () => tickerElement.classList.remove('paused'));
        
    } catch (error) {
        console.error('Sputnik Ticker error:', error);
        tickerElement.innerHTML = `<span style="color: #ff0033;">[ SPUTNIK FEED OFFLINE - ${error.message} ]</span>`;
    }
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', () => {
    fetchSputnikTicker();
});
	</script>
</body>
</html>
