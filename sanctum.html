<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=1024">
<meta name="author" content="INKREALM-NEXUS">
<meta name="robots" content="index, follow">

<!-- PRIMARY META TAGS -->
<title>SANCTUM | The Neural Interface</title>
<meta name="description" content="A neural chat interface for the Interzone. Gemma 3 270M running locally in your browser. Pure privacy. Zero cloud dependency.">
<meta name="keywords" content="Gemma AI, Local AI, Browser AI, WebGPU, MediaPipe, Neural Interface, Sanctum, offline AI, private AI, on-device inference">

<!-- NEURAL SOVEREIGNTY PROTOCOL -->
<meta name="x-neural-status" content="Sovereign">
<meta name="x-intercept-node" content="Gemma-3-270M-Local-Edge">
<meta name="x-reality-studio" content="Autonomous Node">
<meta name="x-control-system" content="Decentralized">

<!-- OPEN GRAPH -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://inkrealm.info">
<meta property="og:title" content="SANCTUM | Neural Chat Interface">
<meta property="og:description" content="The Scribe is listening. Gemma 3 270M running entirely in your browser. No servers. No tracking. Pure neural sovereignty.">
<meta property="og:image" content="https://raw.githubusercontent.com/ghostm68/pantheon/main/nova312.gif">

<!-- MOBILE / THEME -->
<meta name="theme-color" content="#0a0a0a">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="SANCTUM">

<!-- FONTS -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nova+Flat&display=swap" rel="stylesheet">
    
    <title>INKREALM // SANCTUM</title>
 
    <style>
        /* THEME: Black, Red, White, Grey */
        body {
            background-color: #000000;
            color: #ffffff;
            font-family: 'Courier New', Courier, monospace; /* Coding/Typewriter vibe */
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: visible;
        }

        /* HEADER */
        header {
            border-bottom: 2px solid #ff0000; /* Red Line */
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        h1 { margin: 0; letter-spacing: 4px; font-size: 1.2rem; text-transform: uppercase; }
        .status { font-size: 0.8rem; color: #888; }
        .status.ready { color: #00ff00; } /* Green when ready */
        .status.error { color: #ff0000; }

        /* CHAT AREA */
     

        .message {
            max-width: 80%;
            padding: 15px;
            border-left: 3px solid #333;
            line-height: 1.5;
        }

        .user-msg {
            align-self: flex-end;
            background-color: #222;
            border-left: 3px solid #ffffff; /* White accent for user */
        }

        .ai-msg {
            align-self: flex-start;
            background-color: #000;
            border-left: 3px solid #ff0000; /* Red accent for AI */
            color: #ccc;
        }

        /* INPUT AREA */
        #input-area {
            padding: 20px;
            background-color: #000;
            border-top: 1px solid #333;
            display: flex;
            gap: 10px;
        }

        textarea {
            flex: 1;
            background-color: #111;
            border: 1px solid #333;
            color: #fff;
            padding: 10px;
            font-family: inherit;
            resize: none;
            outline: none;
            height: 50px;
        }

        textarea:focus { border-color: #ff0000; }

        button {
            background-color: #ff0000;
            color: #000;
            border: none;
            padding: 0 20px;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            transition: background 0.2s;
        }

        button:hover { background-color: #fff; }
        button:disabled { background-color: #333; color: #555; cursor: not-allowed; }

        /* Loading Bar */
        #progress-bar {
            height: 2px;
            background-color: #ff0000;
            width: 0%;
            transition: width 0.3s;
        }

    </style>
</head>
<body>
   <!-- CRT OVERLAY SYSTEM -->
    <div id="crt-overlay">
        <div class="scanline"></div>
    </div>  
        
<!-- HEADER -->

    <header>
        <div id="status" class="status">INITIALIZING NEURAL LINK...</div>
    </header>
    <div id="progress-bar"></div>

    <div id="chat-container">
        <div class="message ai-msg">
            System Online. Gemma is listening.
        </div>
    </div>

    <div id="input-area">
        <textarea id="user-input" placeholder="Enter command..." disabled></textarea>
        <button id="send-btn" disabled>TRANSMIT</button>
    </div>
 <div class="orb-container">
        <svg class="glitch-orb" viewBox="0 0 100 100">
            <circle class="orb-circle" cx="50" cy="50" r="45" />
            <polygon class="orb-triangle" points="50,25 78,75 22,75" />
        </svg>
    </div>
    <!-- GOOGLE MEDIAPIPE LOGIC -->
    <script type="module">
        import { LlmInference, FilesetResolver } from 'https://cdn.jsdelivr.net/npm/@mediapipe/tasks-genai';

        const output = document.getElementById('chat-container');
        const input = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        const status = document.getElementById('status');
        const progressBar = document.getElementById('progress-bar');

        let llm = null;

        // *** CONFIGURATION ***
        // MAKE SURE THIS MATCHES YOUR R2 SETUP EXACTLY
        const modelUrl = 'https://gemma.inkrealm.info/gemma3-270m-it-q8-web.task'; 

        async function initAI() {
            try {
                // 1. Load the Engine
                const genai = await FilesetResolver.forGenAiTasks(
                    "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-genai/wasm"
                );

                // 2. Load the Model (with progress bar)
                status.innerText = "DOWNLOADING MODEL (276MB)...";
                progressBar.style.width = "50%";

                llm = await LlmInference.createFromOptions(genai, {
                    baseOptions: { modelAssetPath: modelUrl },
                    maxTokens: 1000,
                    temperature: 0.7,
                    topK: 40
                });

                // 3. Ready
                progressBar.style.width = "100%";
                setTimeout(() => { progressBar.style.display = 'none'; }, 500);
                
                status.innerText = "CONNECTED";
                status.classList.add('ready');
                input.disabled = false;
                sendBtn.disabled = false;
                input.focus();

            } catch (err) {
                console.error(err);
                status.innerText = "CONNECTION FAILED: " + err.message;
                status.classList.add('error');
                output.innerHTML += `<div class="message ai-msg" style="color:red">ERROR: Could not load model from ${modelUrl}. <br>Check your R2 CORS settings or Zero Trust login.</div>`;
            }
        }

        // Handle User Input
        async function handleChat() {
            const text = input.value.trim();
            if (!text || !llm) return;

            // Add User Message
            appendMessage(text, 'user-msg');
            input.value = '';
            input.disabled = true; // Lock input while thinking

            try {
                // Add AI Placeholder
                const aiDiv = appendMessage("Thinking...", 'ai-msg');
                
                // Stream the response
                let fullResponse = "";
                await llm.generateResponse(text, (partialResult) => {
                    fullResponse += partialResult;
                    aiDiv.innerText = fullResponse;
                    // Auto-scroll to bottom
                    output.scrollTop = output.scrollHeight;
                });
                
            } catch (err) {
                appendMessage("Error generating response.", 'ai-msg');
            }

            input.disabled = false;
            input.focus();
        }

        function appendMessage(text, className) {
            const div = document.createElement('div');
            div.className = `message ${className}`;
            div.innerText = text;
            output.appendChild(div);
            output.scrollTop = output.scrollHeight;
            return div;
        }

        // Event Listeners
        sendBtn.addEventListener('click', handleChat);
        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                handleChat();
            }
        });

        // Start
        initAI();
    </script>
    <div class="container">
    <style>
                  
       /* ----------  CRT OVERLAY (REPLACES OLD BODY::BEFORE)  ---------- */
/* ----------  CRT OVERLAY SYSTEM  ---------- */

/* 1. The Container & Vignette (Dark Corners) */
#crt-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none; /* CRITICAL: Lets you click buttons underneath */
    
    /* LAYER: 100001
       Must be higher than Splash Screen (100000) 
       so the scanlines look like they are on the physical screen glass. */
    z-index: 100001; 
    
    /* Vignette Gradient */
    background: radial-gradient(
        circle, 
        rgba(0,0,0,0) 60%, 
        rgba(0,0,0,0.4) 90%, 
        rgba(0,0,0,0.8) 100%
    );
}

/* 2. The Moving Lines */
.scanline {
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0;
    top: 0;
    
    /* The horizontal line pattern */
    background: linear-gradient(
        to bottom, 
        rgba(255,255,255,0) 50%, 
        rgba(0,0,0,0.1) 50%, 
        rgba(0,0,0,0.2) 55%
    );
    background-size: 100% 4px; /* Thickness of lines */
    
    /* Animation: Moves down (scanline) + Flashes (flicker) */
    animation: scanline 10s linear infinite, flicker 0.15s infinite;
}

/* 3. Animation Logic */
@keyframes scanline {
    0% { background-position: 0 0; }
    100% { background-position: 0 100%; }
}

@keyframes flicker {
    /* Low opacity to keep text readable */
    0% { opacity: 0.15; }
    50% { opacity: 0.25; }
    100% { opacity: 0.15; }
}



        /* --- TYPOGRAPHY & WATER EFFECT --- */
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.3rem;
            text-align: center;
            letter-spacing: 2px;
            text-transform: uppercase;
            position: relative;
            
            /* Transparent Red Tint */
            color: rgba(255, 0, 51, 0.1); 
            
            /* RED LIQUID GIF */
            background-image: url('https://github.com/ghostm68/pantheon/raw/main/inkrealmliquidhermes934.gif');
            background-size: cover;
            
            /* Clip the liquid to the text */
            -webkit-background-clip: text;
            background-clip: text;
            
            /* Flow Animation */
            animation: water-flow 30s linear infinite;
            
            /* NEON RED GLOW */
            text-shadow: 0 0 20px rgba(255, 0, 51, 0.8), 0 0 40px rgba(61, 2, 10, 0.5);
        }

        @keyframes water-flow {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }

        .subtitle {
            font-style: italic;
            color: #aaa;
            margin-bottom: 0.8rem;
            text-align: center;
            font-size: 0.85rem;
        }

        /* --- GLITCH ORB --- */
        .orb-container {
            display: inline-block;
            vertical-align: middle;
            margin-right: 15px;
            width: 50px;
            height: 50px;
            position: relative;
        }

        .glitch-orb {
            width: 100%;
            height: 100%;
            fill: none;
            stroke-width: 3;
            overflow: visible;
        }

        .orb-circle { stroke: #ff0033; }
        .orb-triangle { stroke: #ffffff; }

        .orb-container svg {
            animation: slow-spin 10s linear infinite;
            filter: drop-shadow(0 0 5px rgba(255, 0, 51, 0.4));
            transition: all 0.2s ease;
        }

        .orb-container:hover svg {
            animation: glitch-shake 0.3s cubic-bezier(.25, .46, .45, .94) both infinite;
            filter: drop-shadow(2px 2px 0px rgba(255, 255, 255, 0.5)) 
                    drop-shadow(-2px -2px 0px rgba(255, 0, 51, 0.8));
        }

        .orb-container:hover .orb-triangle {
            fill: rgba(255, 255, 255, 0.1);
        }

        @keyframes slow-spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes glitch-shake {
            0% { transform: translate(0) rotate(0deg); }
            20% { transform: translate(-2px, 2px) rotate(-5deg); }
            40% { transform: translate(-2px, -2px) rotate(5deg); }
            60% { transform: translate(2px, 2px) rotate(-5deg); }
            80% { transform: translate(2px, -2px) rotate(5deg); }
            100% { transform: translate(0) rotate(0deg); }
        }

        /* --- FOOTER --- */
        footer {
            margin-top: 2rem;
            padding: 1rem;
            border-top: 1px solid #333;
            text-align: center;
            font-size: 0.7rem;
            color: #555;
            background: #0a0a0a;
        }

        footer a {
            color: #ff0033;
            text-decoration: none;
        }

        footer a:hover {
            text-shadow: 0 0 5px #ff0033;
        }

        .api-status { 
            margin-top: 0.8rem; 
            font-size: 0.75rem; 
            color: #666; 
            text-align: center; 
        }
        
        .generating { 
            animation: pulse 1.5s infinite; 
            color: #ff0033; 
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .error-detail {
            font-size: 0.7rem;
            color: #ff6666;
            margin-top: 0.3rem;
        }

        #notepad { min-height: 280px; }
        #prompt { min-height: 120px; }
        /* --- NOVA EXPRESS MODULES --- */
.mixer-controls {
    display: grid; 
    grid-template-columns: 1fr 1fr; 
    gap: 8px; 
    margin: 10px 0;
}

.module-btn {
    background: #111;
    border: 1px solid #333;
    color: #888;
    padding: 10px;
    cursor: pointer;
    font-family: "Nova Flat", monospace; /* Matches your font */
    text-align: left;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.75rem;
    text-transform: uppercase;
}

.module-btn:hover {
    background: #ff0033; /* RED HOVER */
    border-color: #ff0033;
    color: #000; /* BLACK TEXT ON RED */
    box-shadow: 0 0 10px rgba(255, 0, 51, 0.4);
}

.module-btn:active {
    background: #fff;
    color: #000;
}

/* The Icons - strictly text based now */
.express-icon { 
    font-size: 1.2rem; 
    font-weight: bold;
    color: #ff0033; /* Start Red */
}

/* When button is hovered, icon turns black */
.module-btn:hover .express-icon {
    color: #000;
}

/* INPUTS FOR THE MACHINE */
#mixerSource {
    width: 100%;
    height: 60px; 
    font-family: 'Courier New', monospace; 
    font-size: 0.8rem; 
    background: #050505; 
    color: #666; 
    border: 1px dashed #333;
    resize: none;
    padding: 5px;
    box-sizing: border-box; /* Fixes padding issues */
}

#mixerOutput {
    width: 100%;
    height: 100px; 
    font-family: 'Courier New', monospace;
    font-size: 0.8rem;
    background: #050505;
    color: #f0f0f0; /* White Text */
    border: 1px solid #ff0033; /* Red Border */
    resize: none;
    padding: 5px;
    box-sizing: border-box;
}

#mixerOutput::placeholder { color: #ff0033; opacity: 0.5; }

/* TINY BUTTONS */
.mini-btn {
    font-size: 0.65rem; 
    padding: 4px; 
    background: #1a1a1a; 
    border: 1px solid #333; 
    color: #666;
}
.mini-btn:hover {
    color: #ff0033;
    border-color: #ff0033;
}
        /* --- QR CODE INTERACTION --- */
    /* CSS for France 24 Ticker - Add to your existing style block */
#france24-ticker-container {
    width: 100%;
    background: #111;
    border-top: 2px solid #ff0033;
    border-bottom: 2px solid #ff0033;
    margin: 1rem 0;
    padding: 0.5rem;
    font-family: 'Courier New', monospace;
    overflow: hidden;
    position: relative;
}

#france24-ticker-heading {
    color: #fff;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 0.3rem;
    text-align: center;
}

.france24-ticker-wrapper {
    width: 100%;
    overflow: hidden;
    white-space: nowrap;
    position: relative;
}

#france24-ticker {
    display: inline-block;
    white-space: nowrap;
    animation: ticker-scroll 60s linear infinite;
    padding-left: 100%;
    /* Animation will be controlled by JS */
}

#france24-ticker.paused {
    animation-play-state: paused;
}

#france24-ticker a {
    color: #aaa;
    text-decoration: none;
    margin: 0 2rem;
    font-size: 0.85rem;
    border-left: 1px solid #333;
    padding-left: 1rem;
    transition: color 0.3s;
}

#france24-ticker a:hover {
    color: #ff0033;
    text-shadow: 0 0 8px rgba(255, 0, 51, 0.7);
}

#france24-ticker a:first-child {
    border-left: none;
    padding-left: 0;
}

/* Ticker scroll animation */
@keyframes ticker-scroll {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(-100%);
    }
}  
/* CSS for ScienceDaily Ticker - Slower Red */
#sciencedaily-ticker-container {
    width: 100%;
    background: #0c0c0c;
    border-top: 1px solid #222;
    border-bottom: 1px solid #222;
    margin: 0 0 2rem 0;
    padding: 0.5rem;
    font-family: 'Courier New', monospace;
    overflow: hidden;
}

#sciencedaily-ticker-heading {
    color: #777;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 0.5rem;
    text-align: center;
    font-weight: normal;
}

.sciencedaily-ticker-wrapper {
    width: 100%;
    overflow: hidden;
    white-space: nowrap;
    position: relative;
}

#sciencedaily-ticker {
    display: inline-block;
    white-space: nowrap;
    animation: ticker-scroll-sd 288s linear infinite; 
    padding-left: 100%;
}

#sciencedaily-ticker.paused {
    animation-play-state: paused;
}

#sciencedaily-ticker a {
    color: #ff0033 !important; /* RED TEXT */
    text-decoration: none;
    margin: 0 3rem;
    font-size: 0.9rem;
    border-left: 1px solid #333;
    padding-left: 1.5rem;
    font-weight: bold;
    opacity: 0.9;
    transition: all 0.4s;
}

#sciencedaily-ticker a:hover {
    color: #fff !important;
    text-shadow: 0 0 12px rgba(255, 0, 51, 0.9); /* Red glow on hover */
    opacity: 1;
}

@keyframes ticker-scroll-sd {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-100%);
  }
}


    </style>
    <!-- COLUMN 1: WORKSPACE (Notepad + Machine) -->
    <!-- This wrapper is the 1st Grid Item -->
    <div style="display: flex; flex-direction: column; gap: 0.6rem;">
        
        <!-- Panel A: Notepad -->
        <div class="panel">
            <h2>NOTEPAD</h2>
            <textarea id="notepad" placeholder="Your workspace..."></textarea>
            <div class="controls-row">
                <button id="exportButton">SAVE</button>
                <button id="clearButton">CLEAR</button>
            </div>
        </div>

        <!-- Panel B: Nova Express Machine -->
        <div class="panel" style="border: 1px solid #ff0033; flex: 1;">
            <h2 style="color: #ff0033; border-color: #ff0033; letter-spacing: 2px;">
                <span style="font-size:1.2rem; vertical-align:middle;">✇</span> EXPRESS CUT
            </h2>
            
            <div style="display: flex; gap: 5px; margin-bottom: 8px;">
                <button id="pullFromNotepadBtn" class="mini-btn" style="flex:1;">⇩ PULL PAD</button>
                <button id="pullFromAiBtn" class="mini-btn" style="flex:1;">⇩ PULL AI</button>
            </div>

            <textarea id="mixerSource" placeholder="RAW DATA BUFFER..."></textarea>

            <div class="mixer-controls">
                <button class="module-btn" data-algo="scramble"><span class="express-icon">✃</span> SCISSOR</button>
                <button class="module-btn" data-algo="fold"><span class="express-icon">≣</span> FOLD-IN</button>
                <button class="module-btn" data-algo="chunks"><span class="express-icon">❖</span> 3RD MIND</button>
                <button class="module-btn" data-algo="reverse"><span class="express-icon">⇄</span> REVERSE</button>
            </div>

            <label style="color:#666; font-size:0.7rem; text-transform:uppercase;">Result Stream:</label>
            <textarea id="mixerOutput" placeholder="Waiting for input..."></textarea>
            
            <button id="pushToNotepadBtn" style="width: 100%; margin-top:5px; background: #3d020a; border-color: #ff0033; color: #ff0033;">
                ⇧ UPLOAD TO NOTEPAD
            </button>
        </div>
    </div> 

       <div class="api-status" id="apiStatus">
            Loading 5 lexical sources + thesaurus...
        </div>
    </div>
<!-- France 24 News Ticker -->
<div id="france24-ticker-container">
    <div id="france24-ticker-heading">
        <span style="color: #ff0033;">LIVE FEED:</span> FRANCE24 CULTURE
    </div>
    <!-- The marquee will scroll here -->
    <div class="france24-ticker-wrapper">
        <div id="france24-ticker"></div>
    </div><br>
    <!-- ScienceDaily Society & Culture Ticker (Fallback) -->
<div id="sciencedaily-ticker-container">
    <div id="sciencedaily-ticker-heading">
        <span style="color: ##808080;">DATA STREAM: <span style="color: #ff0033;">SCIENCE*DAILY</span> SOCIETY
    </div>
    <div class="sciencedaily-ticker-wrapper">
        <div id="sciencedaily-ticker"></div>
    </div>
</div>
</div>
</div>
</div> <!-- FOOTER -->
    <footer>
        <p>&copy; 2026 INKREALM-NEXUS | Amazon Nova AI • 7 Source Lexicon + Live Thesaurus</p>
        
        <!-- NEW: RED WALLET ADDRESS -->
        <p style="color: #ff0033; 
                  font-family: 'Courier New', monospace; 
                  font-size: 0.75rem; 
                  letter-spacing: 1px; 
                  word-break: break-all; 
                  margin: 15px 0; 
                  border-top: 1px dashed #333; 
                  border-bottom: 1px dashed #333; 
                  padding: 10px 0;
                  background: rgba(255, 0, 51, 0.05);">
            ton @ UQAc99MvKIcewbQFmOF_RvqpkAXZno0wiz3_BMsP87pJjSnB
        </p>

        <p><a href="https://inkrealm.info"><font color="white">BACK TO MAIN</a></font></p>
    </footer>
    

    <script>
        /* =========================
   NOVA EXPRESS CUT-UP LOGIC
========================= */

// 1. DATA FLOW
document.getElementById('pullFromNotepadBtn').addEventListener('click', () => {
    document.getElementById('mixerSource').value = document.getElementById('notepad').value;
});

document.getElementById('pullFromAiBtn').addEventListener('click', () => {
    document.getElementById('mixerSource').value = document.getElementById('output').textContent;
});

document.getElementById('pushToNotepadBtn').addEventListener('click', () => {
    const mix = document.getElementById('mixerOutput').value;
    if (!mix) return;
    const notepad = document.getElementById('notepad');
    notepad.value += (notepad.value ? '\n\n--- NOVA EXPRESS ---\n' : '') + mix;
});

// 2. ALGORITHMS
const modules = {
    // Scissor: Random word shuffle
    scramble: (text) => {
        const words = text.split(/\s+/);
        for (let i = words.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [words[i], words[j]] = [words[j], words[i]];
        }
        return words.join(' ');
    },

    // Fold-In: Interleaves lines (1, 51, 2, 52...)
    fold: (text) => {
        const lines = text.split('\n').filter(l => l.trim() !== '');
        const half = Math.floor(lines.length / 2);
        const first = lines.slice(0, half);
        const second = lines.slice(half);
        let result = [];
        for(let i=0; i < Math.max(first.length, second.length); i++) {
            if(first[i]) result.push(first[i]);
            if(second[i]) result.push(second[i]);
        }
        return result.join('\n');
    },

    // Third Mind: Chunks of 2-5 words shuffled
    chunks: (text) => {
        const words = text.split(/\s+/);
        let chunks = [];
        while(words.length > 0) {
            let size = Math.floor(Math.random() * 4) + 1;
            chunks.push(words.splice(0, size).join(' '));
        }
        for (let i = chunks.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [chunks[i], chunks[j]] = [chunks[j], chunks[i]];
        }
        return chunks.join(' ');
    },

    // Reverse
    reverse: (text) => {
        return text.split(' ').reverse().join(' ');
    }
};

// 3. EVENT LISTENERS
document.querySelectorAll('.module-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        const algo = btn.dataset.algo;
        const source = document.getElementById('mixerSource').value;
        if (!source.trim()) return; // Silent fail if empty
        document.getElementById('mixerOutput').value = modules[algo](source);
    });
});

        /* =========================
   THE WORD IS A VIRUS
========================= */
console.log(
    "%c EXPRESS CUT %c v1.0 ONLINE ", 
    "background: #ff0033; color: #000; font-weight: bold; padding: 4px;", 
    "background: #000; color: #ff0033; border: 1px solid #ff0033; padding: 3px;"
);
console.log(
    "%c'Listen to my last words any world. Listen all you boards syndicates and governments of the earth. And you powers behind what filth deals consummated in what lavatory to take what is not yours. To sell the ground from unborn feet forever...'", 
    "color: #444; font-family: monospace; font-style: italic; font-size: 10px;"
);
    </script>
    <script>
        // JavaScript for France 24 Ticker - Add to your existing script section
async function fetchFrance24Ticker() {
    const tickerElement = document.getElementById('france24-ticker');
    const feedUrl = 'https://www.france24.com/en/culture/rss';
    
    // Using a CORS proxy for development
    const proxyUrl = 'https://api.allorigins.win/raw?url=';
    
    try {
        tickerElement.innerHTML = '<span style="color: #666;">Receiving transmission...</span>';
        
        const response = await fetch(proxyUrl + encodeURIComponent(feedUrl));
        if (!response.ok) throw new Error(`Network error: ${response.status}`);
        
        const xmlText = await response.text();
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(xmlText, 'text/xml');
        const items = xmlDoc.querySelectorAll('item');
        
        if (items.length === 0) {
            tickerElement.innerHTML = '<span style="color: #666;">No headlines received.</span>';
            return;
        }
        
        let tickerHTML = '';
        items.forEach(item => {
            const title = item.querySelector('title')?.textContent || 'No title';
            const link = item.querySelector('link')?.textContent || '#';
            
            tickerHTML += `<a href="${link}" target="_blank" rel="noopener" title="${title}">${title}</a>`;
        });
        
        tickerElement.innerHTML = tickerHTML;
        
        // Pause on hover for better readability
        tickerElement.addEventListener('mouseenter', () => {
            tickerElement.classList.add('paused');
        });
        tickerElement.addEventListener('mouseleave', () => {
            tickerElement.classList.remove('paused');
        });
        
    } catch (error) {
        console.error('Ticker error:', error);
        tickerElement.innerHTML = `<span style="color: #ff0033;">[FEED OFFLINE]</span>`;
    }
}
// JavaScript for ScienceDaily Society & Culture Ticker (Robust Fallback)
async function fetchScienceDailyTicker() {
    const tickerElement = document.getElementById('sciencedaily-ticker');
    // Using the 'Society' top news feed - very reliable
    const feedUrl = 'https://www.sciencedaily.com/rss/top/society.xml';
    const proxyUrl = 'https://api.allorigins.win/raw?url=';

    try {
        tickerElement.innerHTML = '<span style="color: #666; font-style: italic;">[ Accessing Research Stream... ]</span>';
        const response = await fetch(proxyUrl + encodeURIComponent(feedUrl));
        if (!response.ok) throw new Error(`Network Error: ${response.status}`);
        const xmlText = await response.text();
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(xmlText, 'text/xml');
        const items = xmlDoc.querySelectorAll('item');
        
        if (items.length === 0) {
            tickerElement.innerHTML = '<span style="color: #ff0033;">[ Research Feed Empty ]</span>';
            return;
        }
        
        let tickerHTML = '';
        items.forEach(item => {
            const title = item.querySelector('title')?.textContent || 'Research Update';
            const link = item.querySelector('link')?.textContent || '#';
            // Clean up "ScienceDaily: " prefix if present
            const cleanTitle = title.replace(/^ScienceDaily:\s*/i, '');
            tickerHTML += `<a href="${link}" target="_blank" rel="noopener" title="${cleanTitle}">${cleanTitle}</a>`;
        });
        
        tickerElement.innerHTML = tickerHTML;
        
        // Pause on hover
        tickerElement.addEventListener('mouseenter', () => tickerElement.classList.add('paused'));
        tickerElement.addEventListener('mouseleave', () => tickerElement.classList.remove('paused'));
        
    } catch (error) {
        console.error('ScienceDaily Ticker error:', error);
        tickerElement.innerHTML = `<span style="color: #ff0033;">[ SCIENCE FEED OFFLINE ]</span>`;
    }
}

// Initialize both tickers when page loads
document.addEventListener('DOMContentLoaded', () => {
    fetchFrance24Ticker();     // Starts the France 24 Culture ticker
    fetchScienceDailyTicker(); // Starts the ScienceDaily Society & Culture ticker
});
</script>
    
<!-- INK REALM: HARDENED LOCAL CORE -->  
</body>
</html>
