<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=1024">
<meta name="author" content="INKREALM-NEXUS">
<meta name="robots" content="index, follow">

<!-- PRIMARY META TAGS -->
<title>SANCTUM | The Neural Interface</title>
<meta name="description" content="A neural chat interface for the Interzone. Gemma 3 270M running locally in your browser. Pure privacy. Zero cloud dependency.">
<meta name="keywords" content="Gemma AI, Local AI, Browser AI, WebGPU, MediaPipe, Neural Interface, Sanctum, offline AI, private AI, on-device inference">

<!-- NEURAL SOVEREIGNTY PROTOCOL -->
<meta name="x-neural-status" content="Sovereign">
<meta name="x-intercept-node" content="Gemma-3-270M-Local-Edge">
<meta name="x-reality-studio" content="Autonomous Node">
<meta name="x-control-system" content="Decentralized">

<!-- OPEN GRAPH -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://inkrealm.info">
<meta property="og:title" content="SANCTUM | Neural Chat Interface">
<meta property="og:description" content="The Scribe is listening. Gemma 3 270M running entirely in your browser. No servers. No tracking. Pure neural sovereignty.">
<meta property="og:image" content="https://raw.githubusercontent.com/ghostm68/pantheon/main/nova312.gif">

<!-- MOBILE / THEME -->
<meta name="theme-color" content="#0a0a0a">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="SANCTUM">

<!-- FONTS -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nova+Flat&display=swap" rel="stylesheet">
    
    <title>INKREALM // SANCTUM</title>
 
    <style>
        /* THEME: Black, Red, White, Grey */
        body {
            background-color: #000000;
            color: #ffffff;
            font-family: 'Courier New', Courier, monospace; /* Coding/Typewriter vibe */
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: visible;
        }

        /* HEADER */
        header {
            border-bottom: 2px solid #ff0000; /* Red Line */
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        h1 { margin: 0; letter-spacing: 4px; font-size: 1.2rem; text-transform: uppercase; }
        .status { font-size: 0.8rem; color: #888; }
        .status.ready { color: #00ff00; } /* Green when ready */
        .status.error { color: #ff0000; }

        /* CHAT AREA */
     

        .message {
            max-width: 80%;
            padding: 15px;
            border-left: 3px solid #333;
            line-height: 1.5;
        }

        .user-msg {
            align-self: flex-end;
            background-color: #222;
            border-left: 3px solid #ffffff; /* White accent for user */
        }

        .ai-msg {
            align-self: flex-start;
            background-color: #000;
            border-left: 3px solid #ff0000; /* Red accent for AI */
            color: #ccc;
        }

        /* INPUT AREA */
        #input-area {
            padding: 20px;
            background-color: #000;
            border-top: 1px solid #333;
            display: flex;
            gap: 10px;
        }

        textarea {
            flex: 1;
            background-color: #111;
            border: 1px solid #333;
            color: #fff;
            padding: 10px;
            font-family: inherit;
            resize: none;
            outline: none;
            height: 50px;
        }

        textarea:focus { border-color: #ff0000; }

        button {
            background-color: #ff0000;
            color: #000;
            border: none;
            padding: 0 20px;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            transition: background 0.2s;
        }

        button:hover { background-color: #fff; }
        button:disabled { background-color: #333; color: #555; cursor: not-allowed; }

        /* Loading Bar */
        #progress-bar {
            height: 2px;
            background-color: #ff0000;
            width: 0%;
            transition: width 0.3s;
        }
        /* --- AI CORE OVERRIDES --- */

/* 1. Force the container to float ABOVE the scanlines and background */
    /* --- 1. THE CHAT CONTAINER (Responsive & Visible) --- */
    #chat-container {
        /* Layout & Position */
        position: relative;
        z-index: 9999 !important; /* Sit on top of everything */
        display: none;            /* Hidden until JS activates it */
        
        /* Dimensions - calculated for Mobile & Desktop */
        height: 60vh !important;  
        max-height: 600px;
        min-height: 200px;
        width: 95%;
        margin: 10px auto;
        
        /* Visuals */
        overflow-y: auto !important;
        background-color: rgba(0, 0, 0, 0.95); /* Deep Black */
        border: 1px solid #333;
        padding: 15px;
        border-radius: 4px;
        box-shadow: 0 0 20px rgba(0,0,0,0.8);
    }

    /* --- 2. MESSAGE BUBBLES --- */
    .message {
        display: block !important;
        opacity: 1 !important;
        margin-bottom: 15px;
        padding: 8px;
        line-height: 1.5;
        border-bottom: 1px dashed #333; /* Separator line */
    }

    /* AI: White Text + White Glow */
    .ai-msg {
        color: #ffffff !important;
        text-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
        border-left: 3px solid #ffffff;
        padding-left: 10px;
    }

    /* USER: White Text + Right Aligned */
    .user-msg {
        color: #ffffff !important;
        text-align: right;
        opacity: 0.9 !important; /* Slightly dimmer than AI */
    }

    /* --- 3. INPUT AREA (Fixed) --- */
    #input-area {
        position: relative;
        z-index: 9999 !important;
        background: #000;
        padding: 15px;
        border-top: 1px solid #333;
        
        /* Flexbox to align Textarea + Button */
        display: none; /* JS will switch this to 'flex' */
        gap: 10px;
        align-items: center;
        width: 95%;
        margin: 0 auto;
    }

    /* Input Fields Styling */
    #user-input {
        flex-grow: 1; /* Take available space */
        background: #222;
        color: #fff;
        border: 1px solid #444;
        padding: 10px;
        border-radius: 4px;
        min-height: 40px;
    }

    #send-btn {
        width: 80px;
        height: 40px;
        background: #fff;
        color: #000;
        font-weight: bold;
        border: none;
        cursor: pointer;
    }

    /* --- 4. BUTTONS (Selection Screen) --- */
    .core-btn {
        display: block; 
        width: 100%; 
        padding: 15px; 
        margin-bottom: 10px; 
        border: none; 
        font-weight: bold; 
        cursor: pointer;
        font-family: monospace; 
        text-transform: uppercase;
        border-radius: 4px;
    }
  /* --- BUTTON GRADIENTS (Sanctum Theme) --- */

/* 1. GEMMA: Bright Laser Red (Base) */
#btn-gemma {
    background-color: #171717 !important; 
    color: #000 !important; /* Black text on bright red */
    border: 1px solid #ff0000;
}
#btn-gemma:hover {
    background-color: #ff6666 !important;
    box-shadow: 0 0 15px #ff0000;
}

/* 2. QWEN: Crimson (Darker) */
#btn-qwen {
    background-color: #a31822 !important;
    color: #fff !important; /* White text on dark red */
    border: 1px solid #ff0000;
}
#btn-qwen:hover {
    background-color: #ff6666 !important;
    box-shadow: 0 0 15px #ff0000;
}

/* 3. LLAMA: Dried Blood (Darkest) */
#btn-llama {
    background-color: #474242 !important;
    color: #ccc !important; /* Grey text on very dark red */
    border: 1px solid #800000;
}
#btn-llama:hover {
    background-color: #ff6666  !important;
    box-shadow: 0 0 15px #ff0000;
}      
    </style>
</head>
<body>
   <!-- CRT OVERLAY SYSTEM -->
    <div id="crt-overlay">
        <div class="scanline"></div>
    </div>  
        
<!-- HEADER -->

    <!-- HEADER -->
<header>
    <div id="status" class="status">SYSTEM STANDBY</div>
</header>

<!-- SELECTION SCREEN -->
<!-- SELECTION SCREEN -->
<div id="selection-screen" style="max-width: 400px; margin: 0 auto; padding: 20px;">
    <h3 style="text-align:center; color:#450707; font-family: 'Courier New'; text-transform: uppercase; letter-spacing: 2px;">
        Select/Initialize  Core
    </h3>
    
    <!-- 1. GEMMA (Brightest) -->
    <button id="btn-gemma" class="core-btn">
        LOAD GEMMA 
    </button>

    <!-- 2. QWEN (Darker) -->
    <button id="btn-qwen" class="core-btn">
        LOAD QWEN 
    </button>

    <!-- 3. LLAMA (Darkest) -->
    <button id="btn-llama" class="core-btn">
        LOAD LLAMA 
    </button>
</div>

<!-- LOADING & UI -->
<div id="progress-container" style="display:none; text-align:center;">
    <div id="status">INITIALIZING...</div>
    <div id="progress-bar" style="width:0%; height:4px; background:#fff; margin:10px auto;"></div>
    <div id="progress-text">0%</div>
</div>

<div id="chat-container"></div>

<div id="input-area" style="display:none; margin-top:10px; position:relative; z-index:9999;">
    <textarea id="user-input" placeholder="Enter command..." style="width:70%; background:#222; color:#fff; border:1px solid #444;"></textarea>
    <button id="send-btn" style="width:25%; background:#fff; color:#000; font-weight:bold;">TRANSMIT</button>
</div>
 <div class="orb-container">
        <svg class="glitch-orb" viewBox="0 0 100 100">
            <circle class="orb-circle" cx="50" cy="50" r="45" />
            <polygon class="orb-triangle" points="50,25 78,75 22,75" />
        </svg>
    </div>
    <!-- GOOGLE MEDIAPIPE LOGIC -->
<script type="module">
    import { LlmInference, FilesetResolver } from 'https://cdn.jsdelivr.net/npm/@mediapipe/tasks-genai';
    import * as webllm from "https://esm.run/@mlc-ai/web-llm";

    // --- DOM ---
    const status = document.getElementById('status');
    const chatContainer = document.getElementById('chat-container');
    const input = document.getElementById('user-input');
    const sendBtn = document.getElementById('send-btn');
    const inputArea = document.getElementById('input-area');
    const selectionScreen = document.getElementById('selection-screen');
    const progressContainer = document.getElementById('progress-container');
    const progressBar = document.getElementById('progress-bar');
    const progressText = document.getElementById('progress-text');

    // --- STATE ---
    let activeEngine = null; 
    let session = null; 
    let chatHistory = []; 
    let genaiFileset = null; // Pre-heater for Gemma

    // PRE-HEAT MEDIAPIPE (CPU)
    (async function preheat() {
        try { genaiFileset = await FilesetResolver.forGenAiTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-genai/wasm"); } 
        catch (e) { console.log(e); }
    })();

    // ============================================
    // 1. GEMMA (MediaPipe / CPU)
    // ============================================
    document.getElementById('btn-gemma').addEventListener('click', async () => {
        uiStartLoad();
        activeEngine = 'mediapipe';
        if (!genaiFileset) genaiFileset = await FilesetResolver.forGenAiTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-genai/wasm");
        
        status.innerText = "DOWNLOADING GEMMA...";
        session = await LlmInference.createFromOptions(genaiFileset, {
            baseOptions: { modelAssetPath: 'https://gemma.inkrealm.info/Gemma3-1B-IT_multi-prefill-seq_q4_ekv2048.task' },
            maxTokens: 1000, temperature: 0.4, topK: 40
        });
        uiFinishLoad("GEMMA ONLINE");
    });

    // ============================================
    // 2. QWEN (WebLLM / GPU / With History)
    // ============================================
    document.getElementById('btn-qwen').addEventListener('click', async () => {
        uiStartLoad();
        activeEngine = 'qwen';
        chatHistory = [{ role: "system", content: "You are helpful." }];
        
        session = await webllm.CreateMLCEngine("Qwen2.5-0.5B-Instruct-q4f16_1-MLC", {
            initProgressCallback: (report) => uiUpdateProgress(report)
        });
        uiFinishLoad("QWEN ONLINE");
    });

    // ============================================
    // 3. LLAMA 3.2 (WebLLM / GPU / RAW MODE)
    // ============================================
    // Uses the "Raw" logic from your app snippet (Stateless, potentially faster)
    document.getElementById('btn-llama').addEventListener('click', async () => {
        uiStartLoad();
        activeEngine = 'llama-raw';
        
        // Using Llama-3.2-1B as mentioned in your comment
        session = await webllm.CreateMLCEngine("Llama-3.2-1B-Instruct-q4f16_1-MLC", {
            initProgressCallback: (report) => uiUpdateProgress(report)
        });
        uiFinishLoad("LLAMA RAW ONLINE");
    });

    // ============================================
    // UNIFIED CHAT HANDLER
    // ============================================
    async function handleChat() {
        const text = input.value.trim();
        if (!text) return;

        appendMessage(text, 'user-msg');
        input.value = '';
        input.disabled = true;
        const aiDiv = appendMessage("Thinking...", 'ai-msg');
        let fullResponse = "";

        try {
            // --- GEMMA ---
            if (activeEngine === 'mediapipe') {
                const prompt = `<start_of_turn>user\n${text}<end_of_turn>\n<start_of_turn>model\n`;
                await session.generateResponse(prompt, (partial) => {
                    fullResponse += partial;
                    aiDiv.innerText = fullResponse;
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                });
            }
            
            // --- QWEN (With History) ---
            else if (activeEngine === 'qwen') {
                chatHistory.push({ role: "user", content: text });
                const chunks = await session.chat.completions.create({ 
                    messages: chatHistory, stream: true, temperature: 0.4 
                });
                aiDiv.innerText = "";
                for await (const chunk of chunks) {
                    fullResponse += chunk.choices[0]?.delta?.content || "";
                    aiDiv.innerText = fullResponse;
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }
                chatHistory.push({ role: "assistant", content: fullResponse });
            }

            // --- LLAMA RAW (Stateless - Like your snippet) ---
            else if (activeEngine === 'llama-raw') {
                // We do NOT save history here. Just System + User.
                // This mimics your app snippet logic.
                const messages = [
                    { role: "system", content: "You are a helpful assistant." },
                    { role: "user", content: text }
                ];
                
                const chunks = await session.chat.completions.create({ 
                    messages: messages, stream: true 
                });
                
                aiDiv.innerText = "";
                for await (const chunk of chunks) {
                    fullResponse += chunk.choices[0]?.delta?.content || "";
                    aiDiv.innerText = fullResponse;
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }
            }

        } catch (err) {
            aiDiv.innerText = "Error: " + err.message;
        }

        input.disabled = false;
        input.focus();
    }

    // --- UI HELPERS ---
    function uiStartLoad() {
        selectionScreen.style.display = 'none';
        progressContainer.style.display = 'block';
    }
    
    function uiUpdateProgress(report) {
        const p = Math.round(report.progress * 100);
        progressBar.style.width = p + '%';
        progressText.innerText = p + '%';
        status.innerText = report.text;
    }

    function uiFinishLoad(msg) {
        progressContainer.style.display = 'none';
        chatContainer.style.display = 'block';
        inputArea.style.display = 'flex';
        status.innerText = msg;
        status.style.color = "#00ff00"; // Keep status green
        
        // Force scroll/visibility check
        setTimeout(() => { chatContainer.scrollTop = chatContainer.scrollHeight; }, 100);
    }

    function appendMessage(text, className) {
        const div = document.createElement('div');
        div.className = `message ${className}`;
        div.innerText = text;
        chatContainer.appendChild(div);
        chatContainer.scrollTop = chatContainer.scrollHeight;
        return div;
    }

    sendBtn.addEventListener('click', handleChat);
    input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') handleChat();
    });
</script>
    <div class="container">
    <style>
                  
       /* ----------  CRT OVERLAY (REPLACES OLD BODY::BEFORE)  ---------- */
/* ----------  CRT OVERLAY SYSTEM  ---------- */

/* 1. The Container & Vignette (Dark Corners) */
#crt-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none; /* CRITICAL: Lets you click buttons underneath */
    
    /* LAYER: 100001
       Must be higher than Splash Screen (100000) 
       so the scanlines look like they are on the physical screen glass. */
    z-index: 100001; 
    
    /* Vignette Gradient */
    background: radial-gradient(
        circle, 
        rgba(0,0,0,0) 60%, 
        rgba(0,0,0,0.4) 90%, 
        rgba(0,0,0,0.8) 100%
    );
}

/* 2. The Moving Lines */
.scanline {
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0;
    top: 0;
    
    /* The horizontal line pattern */
    background: linear-gradient(
        to bottom, 
        rgba(255,255,255,0) 50%, 
        rgba(0,0,0,0.1) 50%, 
        rgba(0,0,0,0.2) 55%
    );
    background-size: 100% 4px; /* Thickness of lines */
    
    /* Animation: Moves down (scanline) + Flashes (flicker) */
    animation: scanline 10s linear infinite, flicker 0.15s infinite;
}

/* 3. Animation Logic */
@keyframes scanline {
    0% { background-position: 0 0; }
    100% { background-position: 0 100%; }
}

@keyframes flicker {
    /* Low opacity to keep text readable */
    0% { opacity: 0.15; }
    50% { opacity: 0.25; }
    100% { opacity: 0.15; }
}



        /* --- TYPOGRAPHY & WATER EFFECT --- */
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.3rem;
            text-align: center;
            letter-spacing: 2px;
            text-transform: uppercase;
            position: relative;
            
            /* Transparent Red Tint */
            color: rgba(255, 0, 51, 0.1); 
            
            /* RED LIQUID GIF */
            background-image: url('https://github.com/ghostm68/pantheon/raw/main/inkrealmliquidhermes934.gif');
            background-size: cover;
            
            /* Clip the liquid to the text */
            -webkit-background-clip: text;
            background-clip: text;
            
            /* Flow Animation */
            animation: water-flow 30s linear infinite;
            
            /* NEON RED GLOW */
            text-shadow: 0 0 20px rgba(255, 0, 51, 0.8), 0 0 40px rgba(61, 2, 10, 0.5);
        }

        @keyframes water-flow {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }

        .subtitle {
            font-style: italic;
            color: #aaa;
            margin-bottom: 0.8rem;
            text-align: center;
            font-size: 0.85rem;
        }

        /* --- GLITCH ORB --- */
        .orb-container {
            display: inline-block;
            vertical-align: middle;
            margin-right: 15px;
            width: 50px;
            height: 50px;
            position: relative;
        }

        .glitch-orb {
            width: 100%;
            height: 100%;
            fill: none;
            stroke-width: 3;
            overflow: visible;
        }

        .orb-circle { stroke: #ff0033; }
        .orb-triangle { stroke: #ffffff; }

        .orb-container svg {
            animation: slow-spin 10s linear infinite;
            filter: drop-shadow(0 0 5px rgba(255, 0, 51, 0.4));
            transition: all 0.2s ease;
        }

        .orb-container:hover svg {
            animation: glitch-shake 0.3s cubic-bezier(.25, .46, .45, .94) both infinite;
            filter: drop-shadow(2px 2px 0px rgba(255, 255, 255, 0.5)) 
                    drop-shadow(-2px -2px 0px rgba(255, 0, 51, 0.8));
        }

        .orb-container:hover .orb-triangle {
            fill: rgba(255, 255, 255, 0.1);
        }

        @keyframes slow-spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes glitch-shake {
            0% { transform: translate(0) rotate(0deg); }
            20% { transform: translate(-2px, 2px) rotate(-5deg); }
            40% { transform: translate(-2px, -2px) rotate(5deg); }
            60% { transform: translate(2px, 2px) rotate(-5deg); }
            80% { transform: translate(2px, -2px) rotate(5deg); }
            100% { transform: translate(0) rotate(0deg); }
        }

        /* --- FOOTER --- */
        footer {
            margin-top: 2rem;
            padding: 1rem;
            border-top: 1px solid #333;
            text-align: center;
            font-size: 0.7rem;
            color: #555;
            background: #0a0a0a;
        }

        footer a {
            color: #ff0033;
            text-decoration: none;
        }

        footer a:hover {
            text-shadow: 0 0 5px #ff0033;
        }

        .api-status { 
            margin-top: 0.8rem; 
            font-size: 0.75rem; 
            color: #666; 
            text-align: center; 
        }
        
        .generating { 
            animation: pulse 1.5s infinite; 
            color: #ff0033; 
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .error-detail {
            font-size: 0.7rem;
            color: #ff6666;
            margin-top: 0.3rem;
        }

        #notepad { min-height: 280px; }
        #prompt { min-height: 120px; }
        /* --- NOVA EXPRESS MODULES --- */
.mixer-controls {
    display: grid; 
    grid-template-columns: 1fr 1fr; 
    gap: 8px; 
    margin: 10px 0;
}

.module-btn {
    background: #111;
    border: 1px solid #333;
    color: #888;
    padding: 10px;
    cursor: pointer;
    font-family: "Nova Flat", monospace; /* Matches your font */
    text-align: left;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.75rem;
    text-transform: uppercase;
}

.module-btn:hover {
    background: #ff0033; /* RED HOVER */
    border-color: #ff0033;
    color: #000; /* BLACK TEXT ON RED */
    box-shadow: 0 0 10px rgba(255, 0, 51, 0.4);
}

.module-btn:active {
    background: #fff;
    color: #000;
}

/* The Icons - strictly text based now */
.express-icon { 
    font-size: 1.2rem; 
    font-weight: bold;
    color: #ff0033; /* Start Red */
}

/* When button is hovered, icon turns black */
.module-btn:hover .express-icon {
    color: #000;
}

/* INPUTS FOR THE MACHINE */
#mixerSource {
    width: 100%;
    height: 60px; 
    font-family: 'Courier New', monospace; 
    font-size: 0.8rem; 
    background: #050505; 
    color: #666; 
    border: 1px dashed #333;
    resize: none;
    padding: 5px;
    box-sizing: border-box; /* Fixes padding issues */
}

#mixerOutput {
    width: 100%;
    height: 100px; 
    font-family: 'Courier New', monospace;
    font-size: 0.8rem;
    background: #050505;
    color: #f0f0f0; /* White Text */
    border: 1px solid #ff0033; /* Red Border */
    resize: none;
    padding: 5px;
    box-sizing: border-box;
}

#mixerOutput::placeholder { color: #ff0033; opacity: 0.5; }

/* TINY BUTTONS */
.mini-btn {
    font-size: 0.65rem; 
    padding: 4px; 
    background: #1a1a1a; 
    border: 1px solid #333; 
    color: #666;
}
.mini-btn:hover {
    color: #ff0033;
    border-color: #ff0033;
}

    </style>
    <!-- COLUMN 1: WORKSPACE (Notepad + Machine) -->
    <!-- This wrapper is the 1st Grid Item -->
    <div style="display: flex; flex-direction: column; gap: 0.6rem;">
        
        <!-- Panel A: Notepad -->
        <div class="panel">
            <h2>NOTEPAD</h2>
            <textarea id="notepad" placeholder="Your workspace..."></textarea>
            <div class="controls-row">
                <button id="exportButton">SAVE</button>
                <button id="clearButton">CLEAR</button>
            </div>
        </div><iframe width="560" height="315" src="https://www.youtube.com/embed/videoseries?si=bKjgp6pq6HG1C257&amp;list=PLCl1k1m6Nxtlzmu38C-24mEAobKZao0eL" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

        <!-- Panel B: Nova Express Machine -->
        <div class="panel" style="border: 1px solid #ff0033; flex: 1;">
            <h2 style="color: #ff0033; border-color: #ff0033; letter-spacing: 2px;">
                <span style="font-size:1.2rem; vertical-align:middle;">✇</span> EXPRESS CUT
            </h2>
            
            <div style="display: flex; gap: 5px; margin-bottom: 8px;">
                <button id="pullFromNotepadBtn" class="mini-btn" style="flex:1;">⇩ PULL PAD</button>
                <button id="pullFromAiBtn" class="mini-btn" style="flex:1;">⇩ PULL AI</button>
            </div>

            <textarea id="mixerSource" placeholder="RAW DATA BUFFER..."></textarea>

            <div class="mixer-controls">
                <button class="module-btn" data-algo="scramble"><span class="express-icon">✃</span> SCISSOR</button>
                <button class="module-btn" data-algo="fold"><span class="express-icon">≣</span> FOLD-IN</button>
                <button class="module-btn" data-algo="chunks"><span class="express-icon">❖</span> 3RD MIND</button>
                <button class="module-btn" data-algo="reverse"><span class="express-icon">⇄</span> REVERSE</button>
            </div>

            <label style="color:#666; font-size:0.7rem; text-transform:uppercase;">Result Stream:</label>
            <textarea id="mixerOutput" placeholder="Waiting for input..."></textarea>
            
            <button id="pushToNotepadBtn" style="width: 100%; margin-top:5px; background: #3d020a; border-color: #ff0033; color: #ff0033;">
                ⇧ UPLOAD TO NOTEPAD
            </button>
        </div>
    </div> 

      
</div> <!-- FOOTER -->
    <footer>
        <p>&copy; 2026 INKREALM-NEXUS | Amazon Nova AI • 7 Source Lexicon + Live Thesaurus</p>
        
        <!-- NEW: RED WALLET ADDRESS -->
        <p style="color: #ff0033; 
                  font-family: 'Courier New', monospace; 
                  font-size: 0.75rem; 
                  letter-spacing: 1px; 
                  word-break: break-all; 
                  margin: 15px 0; 
                  border-top: 1px dashed #333; 
                  border-bottom: 1px dashed #333; 
                  padding: 10px 0;
                  background: rgba(255, 0, 51, 0.05);">
            ton @ UQAc99MvKIcewbQFmOF_RvqpkAXZno0wiz3_BMsP87pJjSnB
        </p>

        <p><a href="https://inkrealm.info"><font color="white">BACK TO MAIN</a></font></p>
    </footer>
    

    <script>
        /* =========================
   NOVA EXPRESS CUT-UP LOGIC
========================= */

// 1. DATA FLOW
document.getElementById('pullFromNotepadBtn').addEventListener('click', () => {
    document.getElementById('mixerSource').value = document.getElementById('notepad').value;
});

document.getElementById('pullFromAiBtn').addEventListener('click', () => {
    document.getElementById('mixerSource').value = document.getElementById('output').textContent;
});

document.getElementById('pushToNotepadBtn').addEventListener('click', () => {
    const mix = document.getElementById('mixerOutput').value;
    if (!mix) return;
    const notepad = document.getElementById('notepad');
    notepad.value += (notepad.value ? '\n\n--- NOVA EXPRESS ---\n' : '') + mix;
});

// 2. ALGORITHMS
const modules = {
    // Scissor: Random word shuffle
    scramble: (text) => {
        const words = text.split(/\s+/);
        for (let i = words.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [words[i], words[j]] = [words[j], words[i]];
        }
        return words.join(' ');
    },

    // Fold-In: Interleaves lines (1, 51, 2, 52...)
    fold: (text) => {
        const lines = text.split('\n').filter(l => l.trim() !== '');
        const half = Math.floor(lines.length / 2);
        const first = lines.slice(0, half);
        const second = lines.slice(half);
        let result = [];
        for(let i=0; i < Math.max(first.length, second.length); i++) {
            if(first[i]) result.push(first[i]);
            if(second[i]) result.push(second[i]);
        }
        return result.join('\n');
    },

    // Third Mind: Chunks of 2-5 words shuffled
    chunks: (text) => {
        const words = text.split(/\s+/);
        let chunks = [];
        while(words.length > 0) {
            let size = Math.floor(Math.random() * 4) + 1;
            chunks.push(words.splice(0, size).join(' '));
        }
        for (let i = chunks.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [chunks[i], chunks[j]] = [chunks[j], chunks[i]];
        }
        return chunks.join(' ');
    },

    // Reverse
    reverse: (text) => {
        return text.split(' ').reverse().join(' ');
    }
};

// 3. EVENT LISTENERS
document.querySelectorAll('.module-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        const algo = btn.dataset.algo;
        const source = document.getElementById('mixerSource').value;
        if (!source.trim()) return; // Silent fail if empty
        document.getElementById('mixerOutput').value = modules[algo](source);
    });
});

        /* =========================
   THE WORD IS A VIRUS
========================= */
console.log(
    "%c EXPRESS CUT %c v1.0 ONLINE ", 
    "background: #ff0033; color: #000; font-weight: bold; padding: 4px;", 
    "background: #000; color: #ff0033; border: 1px solid #ff0033; padding: 3px;"
);
console.log(
    "%c'Listen to my last words any world. Listen all you boards syndicates and governments of the earth. And you powers behind what filth deals consummated in what lavatory to take what is not yours. To sell the ground from unborn feet forever...'", 
    "color: #444; font-family: monospace; font-style: italic; font-size: 10px;"
);
    </script>
  
    
<!-- INK REALM: HARDENED LOCAL CORE -->  
</body>
</html>
