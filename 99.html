<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>INKREALM // V3</title>

<!-- ICONS -->
<link rel="icon" type="image/png" href="https://wordstar.nexus/svg/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="https://wordstar.nexus/svg/favicon.svg" />
<link rel="shortcut icon" href="https://wordstar.nexus/svg/favicon.ico" />

<style>
  :root { 
    --red: #ff0033; 
    --black: #050505; 
    --grey: #1a1a1a;
    --text-main: #ffffff;
    --text-dim: #666666;
    --font-sans: 'Inter', 'Helvetica Neue', Arial, sans-serif;
    --font-mono: 'Courier New', Courier, monospace;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background-color: var(--black);
    color: var(--text-main);
    font-family: var(--font-sans);
    overflow-x: hidden;
    width: 100vw;
  }

  /* --- 1. ASYMMETRICAL ANCHORS --- */
  
  /* THE LOGO (Fixed Left) */
  .logo-fixed {
    position: fixed;
    top: 20px;
    left: 20px;
    width: 280px;
    z-index: 100;
    mix-blend-mode: difference;
  }
  .inkrealm-logo path { fill: var(--text-main); transition: fill 0.3s; }
  .inkrealm-logo:hover path { fill: var(--red); }
  .ghost-trigger { fill: transparent; cursor: pointer; }

  /* THE STAR (Fixed Background Right) */
  .anchor-star {
    position: fixed;
    top: 50%; 
    left: 75%; /* Pushed to the right side */
    transform: translate(-50%, -50%);
    width: 80vh; /* Massive */
    opacity: 0.15;
    z-index: 0;
    pointer-events: none;
    will-change: transform;
  }

  /* --- 2. HEADER CONTROLS (Top Right) --- */
  .header-controls {
    position: fixed;
    top: 30px;
    right: 30px;
    z-index: 1000; /* Above everything */
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 10px;
  }

  .nav-btn {
    background: rgba(0,0,0,0.8);
    border: 1px solid var(--text-main);
    color: var(--text-main);
    padding: 8px 16px;
    font-family: var(--font-sans);
    font-weight: 700;
    text-transform: uppercase;
    font-size: 11px;
    letter-spacing: 1px;
    cursor: pointer;
    backdrop-filter: blur(5px);
  }
  .nav-btn:hover { background: var(--text-main); color: var(--black); }

  /* --- 3. SECTIONS (Content Aligned Left-Center) --- */
  main { position: relative; z-index: 2; width: 100%; }

  section {
    min-height: 100vh;
    width: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    /* We align content slightly left to avoid the Star on the right */
    padding-left: 10%; 
    padding-right: 40%; /* Leave space for the star */
    border-bottom: 1px solid rgba(255,255,255,0.05);
  }

  h1.headline {
    font-size: clamp(3rem, 8vw, 7rem);
    font-weight: 900;
    line-height: 0.9;
    letter-spacing: -0.03em;
    text-align: left;
    margin-bottom: 2rem;
  }

  p.lead {
    font-size: 1.1rem;
    color: var(--text-dim);
    line-height: 1.6;
    border-left: 2px solid var(--red);
    padding-left: 20px;
  }

  /* --- 4. NOUS POP-OUT (Your Code Integration) --- */
  #nous-interface {
    /* Anchored relative to the header controls */
    margin-top: 10px;
    font-family: var(--font-mono);
    display: flex;
    flex-direction: column;
    align-items: flex-end;
  }

  #nous-toggle {
    background: #000;
    color: var(--red);
    border: 1px solid var(--red);
    padding: 8px 12px;
    cursor: pointer;
    text-transform: uppercase;
    font-size: 10px;
    letter-spacing: 1px;
    margin-bottom: 5px;
  }
  #nous-toggle:hover { background: var(--red); color: black; }

  #nous-panel {
    display: none; /* Hidden by default */
    width: 320px;
    background: rgba(5, 5, 5, 0.95);
    border: 1px solid var(--red);
    padding: 15px;
    backdrop-filter: blur(10px);
    box-shadow: -10px 10px 30px rgba(0,0,0,1);
  }

  #nous-output {
    height: 200px;
    background: #000;
    color: #ccc;
    border: 1px solid #222;
    padding: 10px;
    font-size: 11px;
    overflow-y: auto;
    white-space: pre-wrap;
    margin-bottom: 10px;
    font-family: var(--font-mono);
  }
  #nous-output::after { content: " █"; animation: blink 1s step-end infinite; color: var(--red); }
  
  textarea.nous-input {
    width: 100%; height: 50px; background: #111; color: #fff;
    border: 1px solid #333; padding: 8px; font-size: 11px;
    font-family: var(--font-mono); resize: none; outline: none;
  }
  textarea.nous-input:focus { border-color: var(--red); }

  .nous-btn {
    width: 100%; padding: 8px; background: #000; color: #888;
    border: 1px solid #333; cursor: pointer; text-transform: uppercase;
    font-size: 10px; font-weight: bold; margin-top: 5px;
  }
  .nous-btn:hover { color: #fff; border-color: #fff; }

  .progress-track { width: 100%; height: 2px; background: #222; margin: 10px 0; display: none; }
  .progress-fill { width: 0%; height: 100%; background: var(--red); transition: width 0.2s; }   
  @keyframes blink { 50% { opacity: 0; } }

  /* --- 5. TRIANGULAR PRISMS --- */
  .prism-wrapper { margin: 40px; }
  .prism-scene { width: 100px; height: 60px; perspective: 600px; }
  .prism {
    width: 100%; height: 100%; position: relative;
    transform-style: preserve-3d;
    transform: translateZ(-28px);
    transition: transform 1s;
    animation: spinPrism 10s infinite linear;
  }
  .prism:hover { animation-play-state: paused; }
  .face {
    position: absolute; width: 100px; height: 60px;
    border: 1px solid var(--red); background: rgba(0,0,0,0.9);
    color: white; display: flex; align-items: center; justify-content: center;
    font-size: 10px; text-transform: uppercase; cursor: pointer;
  }
  .face-1 { transform: rotateY(0deg) translateZ(29px); }
  .face-2 { transform: rotateY(120deg) translateZ(29px); }
  .face-3 { transform: rotateY(240deg) translateZ(29px); }
  @keyframes spinPrism { 0% { transform: rotateY(0deg); } 100% { transform: rotateY(360deg); } }

  /* --- 6. FOOTER --- */
  footer {
    background-color: var(--grey);
    color: #888;
    padding: 60px 20px;
    text-align: center;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 1px;
    position: relative; z-index: 2;
  }
  footer a { color: #fff; text-decoration: none; border-bottom: 1px solid #555; }

  /* --- MENU OVERLAY --- */
  .menu-overlay {
    position: fixed; inset: 0; background: rgba(0,0,0,0.95);
    z-index: 200; display: none;
    flex-direction: column; align-items: center; justify-content: center;
    backdrop-filter: blur(10px);
  }
  .menu-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 2rem; max-width: 800px; }

  /* Mobile Tweaks */
  @media(max-width: 768px) {
    .logo-fixed { width: 200px; top: 10px; left: 10px; }
    .anchor-star { left: 50%; opacity: 0.1; } /* Center star on mobile */
    section { padding-right: 2rem; padding-left: 2rem; }
  }

</style>
</head>
<body>

<!-- BACKGROUND ANCHOR (Spinning Right) -->
<img src="https://wordstar.nexus/svg/favicon.svg" class="anchor-star" id="anchorStar" alt="">

<!-- LOGO (Fixed Left) -->
<div class="logo-fixed">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 666 88" class="inkrealm-logo">
        <circle class="ghost-trigger" cx="334" cy="63" r="30" onclick="glitchEffect()" />
        <g>
            <path d="M 25 25 L 32 25 L 32 68 L 25 68 Z"/>
            <circle cx="28.5" cy="18" r="3.5" fill="var(--red)"/>
            <path d="M 47 25 L 54 25 L 54 31 Q 58 25 67 25 Q 79 25 79 37 L 79 68 L 72 68 L 72 38 Q 72 30 65 30 Q 54 30 54 42 L 54 68 L 47 68 Z"/>
            <path d="M 94 18 L 101 18 L 101 42 L 115 25 L 124 25 L 109 43 L 125 68 L 116 68 L 101 45 L 101 68 L 94 68 Z"/>
            <path d="M 140 25 L 147 25 L 147 33 Q 150 25 158 25 L 160 25 L 160 31 L 156 31 Q 147 31 147 40 L 147 68 L 140 68 Z"/>
            <path d="M 175 25 Q 190 25 190 42 L 176 42 Q 176 50 176 52 Q 176 63 184 63 Q 189 63 190 58 L 197 58 Q 196 68 184 68 Q 169 68 169 46.5 Q 169 25 184 25 Z M 176 37 L 183 37 Q 183 30 184 30 Q 190 30 190 37 Z"/>
            <path d="M 212 25 Q 226 25 226 42 L 226 68 L 219 68 L 219 63 Q 215 68 207 68 Q 195 68 195 58 Q 195 48 207 48 L 219 48 L 219 42 Q 219 30 211 30 Q 204 30 203 36 L 196 36 Q 197 25 212 25 Z M 219 53 L 208 53 Q 202 53 202 58 Q 202 63 208 63 Q 219 63 219 53 Z"/>
            <path d="M 241 18 L 248 18 L 248 68 L 241 68 Z"/>
            <path d="M 263 25 L 270 25 L 270 31 Q 274 25 283 25 Q 292 25 293 34 Q 297 25 307 25 Q 319 25 319 37 L 319 68 L 312 68 L 312 38 Q 312 30 305 30 Q 296 30 296 42 L 296 68 L 289 68 L 289 38 Q 289 30 282 30 Q 270 30 270 42 L 270 68 L 263 68 Z"/>
            <path d="M 354 25 L 361 25 L 361 68 L 354 68 Z"/>
            <path d="M 376 25 L 383 25 L 383 55 L 401 25 L 408 25 L 408 68 L 401 68 L 401 38 L 383 68 L 376 68 Z"/>
            <path d="M 423 25 L 458 25 L 458 32 L 430 32 L 430 42 L 453 42 L 453 49 L 430 49 L 430 68 L 423 68 Z"/>
            <path d="M 468 23 Q 483 23 483 46.5 Q 483 70 468 70 Q 453 70 453 46.5 Q 453 23 468 23 Z M 468 30 Q 460 30 460 46.5 Q 460 63 468 63 Q 476 63 476 46.5 Q 476 30 468 30 Z"/>
        </g>
        <circle cx="334" cy="63" r="4" fill="var(--red)"/>
    </svg>
</div>

<!-- HEADER CONTROLS (Right) -->
<div class="header-controls">
    <button class="nav-btn" onclick="toggleMenu()">MENU ▼</button>
    
    <!-- NOUS AI POP-OUT -->
    <div id="nous-interface">
        <button id="nous-toggle" onclick="toggleNous()">[ ACCESS_HERMES ]</button>
        <div id="nous-panel">
            <div style="display:flex; justify-content:space-between; margin-bottom:10px; color:#666; font-size:9px;">
                <span>HERMES_3 // WEB_LLM</span>
                <span id="nous-status" style="color: #444;">OFFLINE</span>
            </div>
            <button id="loadCoreBtn" class="nous-btn">INITIALIZE CORE</button>
            <div id="dl-track" class="progress-track"><div id="dl-bar" class="progress-fill"></div></div>
            <div id="dl-text" style="text-align: right; font-size: 9px; color: #444; display:none;">SYNCING...</div>
            <div id="nous-output">SYSTEM STANDBY...</div>
            <textarea id="nous-prompt" class="nous-input" placeholder="Query..."></textarea>
            <button id="nous-transmit-btn" class="nous-btn">TRANSMIT</button>
        </div>
    </div>
</div>

<main>
    <!-- SECTION 1 -->
    <section>
        <h1 class="headline">DIGITAL<br>SILENCE</h1>
        <p class="lead">In the space between words, meaning is constructed.<br>The nexus is not a place, but a frequency.</p>
    </section>

    <!-- SECTION 2: Media -->
    <section>
        <h2 style="font-size:2rem; margin-bottom:40px; text-transform:uppercase; letter-spacing:5px;">Signal_Forge</h2>
        <div style="display:flex; flex-wrap:wrap; gap:20px; align-items:flex-start;">
            <iframe src="https://geo.dailymotion.com/player.html?video=x3mhngn" width="300" height="200" frameborder="0" allowfullscreen style="border:1px solid #333;"></iframe>
            
            <div style="width:300px; border:1px solid #333; padding:10px; background:rgba(0,0,0,0.5);">
                <canvas id="vizCanvas" width="280" height="150" style="background:#000; width:100%;"></canvas>
                <div style="font-size:9px; color:#555; margin-top:5px;">AUDIO_VIZ // PRE-ALPHA</div>
            </div>
        </div>
    </section>
</main>

<footer>
    <div style="margin-bottom:20px;">INKREALM.INFO</div>
    <div style="display:flex; justify-content:center; gap:20px;">
        <a href="https://wordstar.nexus">WORDSTAR</a>
        <a href="#">ARCHIVE</a>
        <a href="#">CONTACT</a>
    </div>
</footer>

<!-- MENU OVERLAY -->
<div class="menu-overlay" id="menuOverlay">
    <div class="menu-grid">
        <div class="prism-wrapper">
            <div style="text-align:center; font-size:10px; color:var(--red); margin-bottom:10px;">APPS</div>
            <div class="prism-scene">
                <div class="prism">
                    <a href="/tvc15" class="face face-1">TVC15</a>
                    <a href="/nous" class="face face-2">NOUS</a>
                    <a href="/atari" class="face face-3">ATARI</a>
                </div>
            </div>
        </div>
        <div class="prism-wrapper">
            <div style="text-align:center; font-size:10px; color:var(--red); margin-bottom:10px;">WRITING</div>
            <div class="prism-scene">
                <div class="prism">
                    <a href="/dreamweaver" class="face face-1">DREAM</a>
                    <a href="/glitch" class="face face-2">GLITCH</a>
                    <a href="/wip" class="face face-3">WIP</a>
                </div>
            </div>
        </div>
    </div>
    <button class="nav-btn" style="margin-top:50px;" onclick="toggleMenu()">CLOSE X</button>
</div>

<!-- AI LOGIC MODULE -->
<script type="module">
    import * as webllm from "https://esm.run/@mlc-ai/web-llm";
    const modelId = "Hermes-3-Llama-3.2-3B-q4f16_1-MLC"; 
    let engine;

    const btn = document.getElementById('loadCoreBtn');
    const output = document.getElementById('nous-output');
    const dlTrack = document.getElementById('dl-track');
    const dlBar = document.getElementById('dl-bar');
    const dlText = document.getElementById('dl-text');
    const statusLabel = document.getElementById('nous-status');
    const genBtn = document.getElementById('nous-transmit-btn'); 
    const promptInput = document.getElementById('nous-prompt'); 

    btn.onclick = async () => {
        try {
            if (!navigator.gpu) throw new Error("WebGPU not available.");
            btn.disabled = true; btn.textContent = "ESTABLISHING...";
            dlTrack.style.display = 'block'; dlText.style.display = 'block';
            output.textContent = "INITIALIZING HERMES PROTOCOL...";
            
            engine = await webllm.CreateMLCEngine(modelId, {
                initProgressCallback: (report) => {
                    const p = report.progress * 100;
                    dlBar.style.width = p + '%';
                    dlText.textContent = `SYNC: ${Math.round(p)}%`;
                    if (p === 100) {
                        output.textContent = "NOUS FIELD CONNECTED.\nAWAITING INPUT.";
                        btn.style.display = 'none';
                        dlTrack.style.display = dlText.style.display = 'none';
                        statusLabel.textContent = "ONLINE"; statusLabel.style.color = "#ff0033"; 
                        genBtn.style.color = "#fff";
                    }
                }
            });
            await engine.chat.completions.create({ messages: [{role:"user",content:"hi"}], max_tokens: 1 });
        } catch (err) {
            output.textContent = "FATAL: " + err.message;
        }
    };

    genBtn.onclick = async () => {
        if (!engine) return;
        const inputVal = promptInput.value.trim();
        if (!inputVal) return;
        genBtn.disabled = true; genBtn.textContent = "...";
        output.textContent = ""; let fullText = "";
        try {
            const chunks = await engine.chat.completions.create({ 
                messages: [{ role: "system", content: "You are NOUS." }, { role: "user", content: inputVal }],
                stream: true, temperature: 0.7, max_tokens: 512
            });
            for await (const chunk of chunks) {
                fullText += chunk.choices[0]?.delta?.content || "";
                output.textContent = fullText; 
                output.scrollTop = output.scrollHeight;
            }
        } catch (err) { output.textContent = "ERROR: " + err.message; } 
        finally { genBtn.disabled = false; genBtn.textContent = "TRANSMIT"; }
    };
</script>

<script>
    // UI SCRIPTS
    function toggleMenu() {
        const m = document.getElementById('menuOverlay');
        m.style.display = (m.style.display === 'flex') ? 'none' : 'flex';
    }
    
    function toggleNous() {
        const p = document.getElementById('nous-panel');
        p.style.display = (p.style.display === 'block') ? 'none' : 'block';
    }

    function glitchEffect() {
        document.body.style.filter = 'invert(1)';
        setTimeout(() => { document.body.style.filter = 'invert(0)'; }, 50);
    }

    // Scroll Physics
    window.addEventListener('scroll', () => {
        const star = document.getElementById('anchorStar');
        star.style.transform = `translate(-50%, -50%) rotate(${window.scrollY * 0.1}deg)`;
    });

    // Audio Viz Idle
    const canvas = document.getElementById('vizCanvas');
    const ctx = canvas.getContext('2d');
    function anim() {
        ctx.fillStyle='rgba(0,0,0,0.1)'; ctx.fillRect(0,0,280,150);
        ctx.fillStyle='#333';
        const x = Math.random()*280;
        ctx.fillRect(x, 150 - Math.random()*50, 2, 50);
        requestAnimationFrame(anim);
    }
    anim();
</script>

</body>
</html>
