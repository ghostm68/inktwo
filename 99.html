<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WORDSTAR // VERTICAL_NEXUS</title>
    
    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Almendra:wght@400;700&family=Share+Tech+Mono&family=VT323&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/dseg@0.46.0/css/dseg.min.css" rel="stylesheet">

    <style>
       :root {
    /* --- 1. DEFAULT THEME (CITADELLE RED) --- */
    --bg-color: #050505;        /* Void Black */
    --primary: #ff0000;         /* Laser Red */
    --secondary: #550000;       /* Dark Red */
    --text-main: #ffffff;
    --text-dim: #666666;
    --scanline-tint: rgba(255, 0, 0, 0.06);
    --video-blend: hard-light;  /* Harsh blending for Red */
}

/* --- 2. CLASSIC THEME (WORDSTAR BLUE) --- */
body.classic-mode {
    --bg-color: #0000AA;        /* DOS Blue */
    --primary: #FFFF00;         /* High-Vis Yellow */
    --secondary: #00FFFF;       /* Cyan (CGA Style) */
    --text-main: #FFFFFF;       /* Pure White */
    --text-dim: #00FFFF;        /* Dim is actually Cyan in this mode */
    --scanline-tint: rgba(255, 255, 255, 0.1);
    --video-blend: luminosity;  /* Grayscale/Ghostly for Blue */
}

/* APPLYING THE VARIABLES */
body {
    background-color: var(--bg-color);
    color: var(--text-main);
    transition: background-color 0.5s ease, color 0.3s ease; /* Smooth Fade */
}

/* Update Elements to use new variables */
.mega-title, h1, h2 { color: var(--primary); text-shadow: 0 0 10px var(--primary); }
.triangle-frame { background: var(--primary); }
.term-trigger, .module-link:hover { border-color: var(--primary); color: var(--primary); }
.term-trigger:hover { background: var(--primary); color: var(--bg-color); }

/* specific tweak for the blue mode links */
body.classic-mode a:hover {
    color: var(--secondary);
    text-shadow: 0 0 8px var(--secondary);
}

/* Update Scanlines to match theme */
body::after {
    background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                linear-gradient(90deg, var(--scanline-tint), rgba(0, 0, 0, 0.02), var(--scanline-tint));
}

        a { text-decoration: none; color: inherit; transition: 0.3s; }
        a:hover { color: var(--primary); text-shadow: 0 0 8px var(--primary); letter-spacing: 1px; }

        /* FIXED LEFT RAIL (The Anchor) */
        .fixed-rail {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .anchor-logo {
            width: 40px;
            height: 40px;
            filter: drop-shadow(0 0 5px var(--primary));
            animation: spin 20s linear infinite;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* FIXED RIGHT RAIL (The Terminal Trigger) */
        .term-trigger {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            border: 1px solid var(--primary);
            color: var(--primary);
            background: rgba(0,0,0,0.8);
            padding: 10px 15px;
            font-family: var(--font-tech);
            cursor: pointer;
            font-size: 0.8rem;
        }
        .term-trigger:hover { background: var(--primary); color: #000; }

        /* HIDDEN DRAWER */
        #terminal-drawer {
            position: fixed; top: 0; left: -100%; width: 100%; height: 100vh;
            background: #000; z-index: 900; border-right: 2px solid var(--primary);
            transition: 0.4s ease; padding: 60px 20px; box-sizing: border-box;
            display: flex; flex-direction: column;
        }

        /* SECTIONS - The Vertical Stack */
        section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 40px 20px; /* Mobile Padding */
            box-sizing: border-box;
            border-bottom: 1px solid #1a1a1a;
            position: relative;
        }
        
        /* Desktop Padding */
        @media(min-width: 800px) {
            section { padding: 40px 100px; }
        }

        /* SECTION 1: HERO */
        .mega-title {
            font-family: var(--font-seg);
            font-size: clamp(3rem, 10vw, 8rem);
            line-height: 0.8;
            color: var(--white);
            margin: 0;
            position: relative;
            z-index: 2;
        }
        
        .triangle-frame {
            width: 200px;
            height: 200px;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            background: var(--primary);
            padding: 2px;
            margin-bottom: 20px;
            animation: float 4s ease-in-out infinite;
        }
        .triangle-video {
            width: 100%; height: 100%;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            background: #000; overflow: hidden;
        }
        .triangle-video video {
            width: 160%; height: 160%;
            object-fit: cover;
            transform: translate(-20%, -20%);
            mix-blend-mode: hard-light;
            filter: grayscale(1) contrast(1.2);
        }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        /* SECTION 2: THE APPLIANCES */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2px;
            background: #222; /* Creates the border lines */
            border: 1px solid #222;
        }

        .grid-item {
            background: var(--black);
            padding: 30px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 150px;
        }
        
        .grid-item:hover { background: #0a0000; }
        .grid-item:hover .grid-title { color: var(--primary); }
        
        .grid-title { font-family: var(--font-seg); font-size: 1.2rem; color: #fff; margin-bottom: 10px; }
        .grid-meta { font-size: 0.7rem; color: #666; text-transform: uppercase; }

        /* SECTION 3: SIGIL HASH */
        .sigil-layout {
            display: grid;
            grid-template-columns: 1fr;
            gap: 40px;
        }
        @media(min-width: 800px) { .sigil-layout { grid-template-columns: 1fr 1fr; align-items: center; } }

        #sigilCanvas {
            width: 100%;
            max-width: 500px;
            aspect-ratio: 1/1;
            background: #000;
            border: 1px solid #333;
            box-shadow: 0 0 20px rgba(255,0,0,0.1);
        }

        .sigil-input {
            background: transparent;
            border: none;
            border-bottom: 2px solid var(--primary);
            color: var(--white);
            font-family: var(--font-seg);
            font-size: 2rem;
            width: 100%;
            margin-top: 20px;
            outline: none;
        }

        /* SECTION 4: MANIFEST */
        .manifest-list {
            list-style: none;
            padding: 0;
            font-family: var(--font-seg);
            font-size: 1.5rem;
        }
        .manifest-list li {
            border-bottom: 1px solid #222;
            padding: 15px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .manifest-tag { font-family: var(--font-tech); font-size: 0.8rem; color: #666; }
/* --- BACKGROUND ANCHOR (The Rotating Triangle) --- */
.anchor-triangle {
    position: fixed;
    top: 50%;
    left: 50%;
    width: 80vh;
    height: 80vh;
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: -1;
    opacity: 0.15;
    animation: rotateTriangle 60s linear infinite;
}

/* The SVG Triangle Styling */
.anchor-triangle path {
    fill: none;
    stroke: var(--primary); /* Uses current theme color */
    stroke-width: 2;
    vector-effect: non-scaling-stroke;
}

@keyframes rotateTriangle {
    from { transform: translate(-50%, -50%) rotate(0deg); }
    to { transform: translate(-50%, -50%) rotate(360deg); }
}

/* --- HERMES DRAWER (Slide Out) --- */
#hermes-drawer {
    position: fixed;
    top: 0;
    right: -100%; /* Hidden by default */
    width: 100%;
    max-width: 400px; /* Desktop limit */
    height: 100vh;
    background: var(--bg-color);
    border-left: 2px solid var(--primary);
    z-index: 2000;
    transition: right 0.4s cubic-bezier(0.19, 1, 0.22, 1); /* "Expo" ease */
    display: flex;
    flex-direction: column;
    box-shadow: -10px 0 30px rgba(0,0,0,0.5);
}

#hermes-drawer.open {
    right: 0;
}

/* --- TIGHTER SIGIL SECTION --- */
.sigil-console {
    max-width: 600px; /* Constrain width on desktop */
    margin: 0 auto;   /* Center it */
    border: 1px solid #333;
    background: rgba(0,0,0,0.3);
    padding: 20px;
    position: relative;
}

/* Ensure canvas doesn't overflow */
canvas#sigilCanvas {
    width: 100%;
    height: auto;
    aspect-ratio: 1 / 1;
    background: #050505;
    border: 1px solid #222;
}
    </style>
</head>
<body>

    <!-- 1. FIXED ELEMENTS -->
    <div class="fixed-rail">
        <!-- Reusing your Wordstar SVG or a placeholder -->
        <img src="https://wordstar.nexus/svg/favicon.svg" class="anchor-logo" alt="*">
        <div style="writing-mode: vertical-rl; font-size: 10px; color: #444;">SYS.ROOT // V7.0</div>
    </div>
<!-- THEME TOGGLE (Top Right, next to Terminal) -->
    <!-- Theme Toggle -->
    <button onclick="toggleTheme()" class="term-trigger" style="font-size: 0.7rem;">[COLOR]</button>
<!-- 1. BACKGROUND ANCHOR (The Wireframe Triangle) -->
<svg class="anchor-triangle" viewBox="0 0 100 100">
    <!-- A perfect equilateral triangle -->
    <path d="M50 15 L90 85 L10 85 Z" />
    <!-- An inner inverted triangle for complexity -->
    <path d="M50 85 L70 50 L30 50 Z" opacity="0.5" />
</svg>

<!-- 2. NAV TRIGGERS (Fixed Top Right) -->
<div style="position: fixed; top: 20px; right: 20px; z-index: 1000; display: flex; gap: 10px;">
    <!-- Hermes Toggle -->
    <button onclick="toggleHermes()" class="term-trigger" style="background: var(--primary); color: var(--bg-color); font-weight: bold;">[>_] HERMES</button>
</div>

<!-- 3. HERMES DRAWER (The Intelligence) -->
<div id="hermes-drawer">
    <!-- Header -->
    <div style="padding: 20px; border-bottom: 1px solid var(--primary); display: flex; justify-content: space-between; align-items: center;">
        <span style="font-family: var(--font-seg); color: var(--primary);">HERMES_NODE</span>
        <button onclick="toggleHermes()" style="background: none; border: none; color: var(--text-dim); cursor: pointer; font-family: var(--font-tech);">[X] CLOSE</button>
    </div>

    <!-- State 1: Standby (The "Initialize" Button) -->
    <div id="hermes-standby" style="padding: 40px 20px; text-align: center;">
        <div style="font-size: 3rem; margin-bottom: 20px; color: var(--text-dim);">?</div>
        <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 30px;">
            AI CORE IS OFFLINE.<br>
            INITIALIZE NEURAL LINK?
        </p>
        <button onclick="initHermes()" style="width: 100%; padding: 15px; background: var(--primary); color: var(--bg-color); border: none; font-family: var(--font-tech); cursor: pointer; font-weight: bold;">
            INITIALIZE SYSTEM
        </button>
        <div style="margin-top: 10px; font-size: 0.7rem; color: #555;">~2GB VRAM REQUIRED</div>
    </div>

    <!-- State 2: Active (Hidden until Init) -->
    <div id="hermes-active" style="display: none; flex-direction: column; flex-grow: 1;">
        <div id="chat-output" style="flex-grow: 1; padding: 20px; overflow-y: auto; font-family: 'VT323'; font-size: 1.1rem; color: #ccc;">
            <span style="color: var(--primary);">SYSTEM:</span> LINK ESTABLISHED.<br>
            <span style="color: var(--primary);">SYSTEM:</span> AWAITING INPUT...
        </div>
        <div style="padding: 20px; border-top: 1px solid #333;">
            <textarea id="chat-input" placeholder=">> ENTER QUERY..." style="width: 100%; height: 60px; background: #111; border: 1px solid #333; color: var(--primary); font-family: var(--font-tech); padding: 10px; resize: none;"></textarea>
            <button style="width: 100%; margin-top: 5px; padding: 5px; background: #222; color: #888; border: 1px solid #333; cursor: pointer;">TRANSMIT</button>
        </div>
    </div>
</div>

    <!-- 3. MAIN SCROLL -->
    <main>

        <!-- SECTION 1: HERO -->
        <section>
            <div class="triangle-frame">
                <div class="triangle-video">
                    <video autoplay muted loop playsinline>
                        <source src="https://github.com/ghostm68/666/raw/refs/heads/main/210644747.mp4" type="video/mp4">
                    </video>
                </div>
            </div>
            <h1 class="mega-title">
                WORD<br>
                <span style="color: var(--primary); text-shadow: 0 0 15px var(--primary);">STAR</span>
            </h1>
            <div style="font-size: 0.9rem; color: #666; margin-top: 20px;">
                INKREALM SYSTEM ROOT V.7.0 <span style="color:var(--primary)">//</span> SCROLL TO INITIALIZE
            </div>
        </section>

        <!-- SECTION 2: THE DECK (Appliances) -->
        <section>
            <div style="margin-bottom: 40px; border-bottom: 1px solid var(--primary); display: inline-block;">
                <h2 style="font-family: var(--font-seg); color: var(--primary); margin: 0;">MODULE_DECK</h2>
            </div>
            
            <div class="grid-container">
                <a href="/sitemap" class="grid-item">
                    <span class="grid-title">NEXUS_MAP</span>
                    <span class="grid-meta">MODERNIZED CLI [ACTIVE]</span>
                </a>
                <a href="/directory" class="grid-item">
                    <span class="grid-title">DIRECTORY</span>
                    <span class="grid-meta">NETWORK UPLINKS</span>
                </a>
                <a href="/cut+rune" class="grid-item">
                    <span class="grid-title">TEXT_SURGERY</span>
                    <span class="grid-meta">TOOL / PERMUTATOR</span>
                </a>
                <a href="/q" class="grid-item">
                    <span class="grid-title">PROJECT_Q</span>
                    <span class="grid-meta">AI NODE [GEN]</span>
                </a>
                <a href="https://inkrealm.info/minraud" class="grid-item">
                    <span class="grid-title">MINRAUD</span>
                    <span class="grid-meta">WEB_LLM [NOVA]</span>
                </a>
                <a href="#" class="grid-item" style="cursor: default;">
                    <span class="grid-title" style="color:#333;">LOCKED</span>
                    <span class="grid-meta">ACCESS DENIED</span>
                </a>
            </div>
        </section>

        <!-- SECTION 3: SIGIL HASH -->
   <section>
        <div class="sigil-console">
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span class="grid-title" style="font-size: 1rem;">SIGIL_HASH_v2</span>
                <span class="grid-meta" id="hashDisplay">IDLE</span>
            </div>
            
            <canvas id="sigilCanvas" width="500" height="500"></canvas>
            
            <input type="text" id="sigilInput" oninput="generateSigil(this.value)" placeholder="ENTER_DATA..." 
                   style="width: 100%; background: transparent; border: none; border-bottom: 2px solid var(--primary); color: var(--white); font-family: var(--font-seg); font-size: 1.5rem; margin-top: 20px; outline: none; text-transform: uppercase;">
        </div>
    </section>

        <!-- SECTION 4: MANIFEST (Footer) -->
        <section style="justify-content: flex-start; padding-top: 100px;">
            <div style="font-family: var(--font-tech); color: #666; margin-bottom: 20px;">
                PRIMARY_OUTPUT // MANIFEST
            </div>
            
            <ul class="manifest-list">
                <li>
                    <a href="/dejavuglitches">DEJAVU_GLITCHES</a>
                    <span class="manifest-tag">TXT</span>
                </li>
                <li>
                    <a href="/dreamweaver">DREAMWEAVER</a>
                    <span class="manifest-tag">TXT</span>
                </li>
                <li>
                    <a href="/90263">FILE_90263</a>
                    <span class="manifest-tag">MOV</span>
                </li>
                <li>
                    <a href="https://inkrealm.medium.com/">MEDIUM_ARCHIVE</a>
                    <span class="manifest-tag">EXT</span>
                </li>
            </ul>

            <div style="margin-top: 100px; padding-top: 20px; border-top: 1px solid #333; font-size: 0.8rem; color: #444;">
                <details>
                    <summary style="cursor: pointer; color: var(--primary);">SYSTEM_LOGS [EXPAND]</summary>
                    <p style="font-family: var(--font-magic); font-size: 1.2rem; color: #888; margin-top: 20px;">
                        "I see whole world thru bimbo eyes," Dick whispers. "Experiment serum: AI connect!" 
                        Writer's dream: owns world absolute.
                    </p>
                </details>
                <br>
                LOC: HQ // INKY Â© 2026
            </div>
        </section>

    </main>

    <!-- SCRIPT (Sigil Logic + Toggle) -->
    <script>
		function initHermes() {
    // 1. UI Switch
    document.getElementById('hermes-standby').style.display = 'none';
    document.getElementById('hermes-active').style.display = 'flex';
    

 /* --- SIGIL ENGINE: IDLE + ACTIVE STATES --- */
const canvas = document.getElementById('sigilCanvas');
const ctx = canvas.getContext('2d');
const input = document.getElementById('sigilInput');
const hashDisplay = document.getElementById('hashDisplay');

let animationFrame; // To track the spinning loop
let rotation = 0;   // Current angle of the idle triangle

// 1. THE MAIN CONTROLLER
function updateSigil() {
    const text = input.value;
    
    // Get current theme color (Red vs Yellow)
    const style = getComputedStyle(document.body);
    const primary = style.getPropertyValue('--primary').trim();

    if (!text) {
        // STATE A: IDLE (The Spinning Triangle)
        hashDisplay.innerText = "STATUS: STANDBY";
        hashDisplay.style.color = "#666";
        
        // Start the loop
        drawIdle(primary);
    } else {
        // STATE B: ACTIVE (The Sigil Generator)
        // Stop the spinning
        cancelAnimationFrame(animationFrame);
        
        // Draw the static Sigil based on text
        const seed = stringToSeed(text);
        hashDisplay.innerText = "HASH: 0x" + seed.toString(16).toUpperCase();
        hashDisplay.style.color = primary;
        
        drawActiveSigil(seed, primary);
    }
}

// 2. IDLE STATE: The Rotating Triangle (Mirrors your Video)
function drawIdle(color) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    const cx = canvas.width / 2;
    const cy = canvas.height / 2;
    const size = 100; // Size of the triangle

    ctx.save();
    ctx.translate(cx, cy);
    ctx.rotate(rotation); // Spin!
    
    ctx.strokeStyle = color;
    ctx.lineWidth = 1;
    ctx.lineJoin = 'round';
    ctx.shadowBlur = 5;
    ctx.shadowColor = color;
    
    // Draw Triangle
    ctx.beginPath();
    ctx.moveTo(0, -size);       // Top
    ctx.lineTo(size, size/2);   // Bottom Right
    ctx.lineTo(-size, size/2);  // Bottom Left
    ctx.closePath();
    ctx.stroke();
    
    // Draw Inner Inverted Triangle (Ghostly)
    ctx.globalAlpha = 0.3;
    ctx.beginPath();
    ctx.moveTo(0, size/2);      // Bottom Tip
    ctx.lineTo(size/2, -size/2); // Top Right
    ctx.lineTo(-size/2, -size/2);// Top Left
    ctx.closePath();
    ctx.stroke();
    
    ctx.restore();

    // Increment rotation and loop
    rotation += 0.01; 
    animationFrame = requestAnimationFrame(() => drawIdle(color));
}

// 3. ACTIVE STATE: The Complex Sigil (Your Original Logic)
function drawActiveSigil(seed, color) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    ctx.strokeStyle = color;
    ctx.lineWidth = 2;
    ctx.shadowBlur = 15;
    ctx.shadowColor = color;
    ctx.lineCap = 'square';

    const cx = canvas.width / 2;
    const cy = canvas.height / 2;
    const radius = 100 + (seed % 60); 
    const points = 3 + (seed % 12); 
    const step = (Math.PI * 2) / points;

    // Draw the "Circuit"
    ctx.beginPath();
    for (let i = 0; i <= points; i++) {
        const angle = i * step;
        const mod = (seed >> (i % 8)) & 1 ? 40 : 0; 
        const r = radius - mod;
        const x = cx + Math.cos(angle) * r;
        const y = cy + Math.sin(angle) * r;

        if (i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
        
        // The Web Connections
        if (i % 2 === 0) {
            ctx.lineTo(cx, cy);
            ctx.moveTo(x, y);
        }
    }
    ctx.closePath();
    ctx.stroke();

    // The Tech Ring
    ctx.beginPath();
    ctx.arc(cx, cy, radius + 20, 0, Math.PI * 2);
    ctx.strokeStyle = color;
    ctx.globalAlpha = 0.3;
    ctx.setLineDash([5, 10]);
    ctx.stroke();
    ctx.setLineDash([]);
    ctx.globalAlpha = 1.0;
}

// 4. UTILITY: String to Number
function stringToSeed(str) {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
        hash = ((hash << 5) - hash) + str.charCodeAt(i);
        hash = hash & hash;
    }
    return Math.abs(hash);
}

// INITIALIZE
updateSigil();
    </script>
	<script>
		// 1. THEME TOGGLE LOGIC
function toggleTheme() {
    const body = document.body;
    body.classList.toggle('classic-mode');
    
    // Save preference
    const isClassic = body.classList.contains('classic-mode');
    localStorage.setItem('wordstar-theme', isClassic ? 'classic' : 'default');
    
    // Update Button Text (Optional)
    const btn = document.getElementById('themeBtn');
    btn.innerHTML = isClassic ? "[SYSTEM: DOS]" : "[SYSTEM: RED]";
    
    // REDRAW SIGIL (Critical Step)
    // We need to re-run the generate function with the current text
    const currentInput = document.getElementById('sigilInput').value || "WORDSTAR";
    generateSigil(currentInput);
}

// 2. CHECK STORAGE ON LOAD
window.onload = function() {
    if(localStorage.getItem('wordstar-theme') === 'classic') {
        toggleTheme(); // Apply it immediately
    }
    // Initialize Sigil
    generateSigil("WORDSTAR");
}

// 3. UPDATE SIGIL GENERATOR COLORS
// Modify your existing generateSigil function:
function generateSigil(text) {
    // ... clear canvas ...
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // CHECK THEME STATE
    const isClassic = document.body.classList.contains('classic-mode');
    
    // DEFINE COLORS BASED ON THEME
    const mainColor = isClassic ? '#FFFF00' : '#ff0000'; // Yellow vs Red
    const glowColor = isClassic ? '#FFFF00' : '#ff0000';
    const ringColor = isClassic ? 'rgba(0, 255, 255, 0.3)' : 'rgba(255, 0, 0, 0.3)'; // Cyan vs Red

    // APPLY COLORS
    ctx.strokeStyle = mainColor;
    ctx.shadowColor = glowColor;
    
    // ... rest of your drawing logic ...
    
    // When drawing the ring:
    ctx.strokeStyle = ringColor;
}
	</script>
</body>
</html>
