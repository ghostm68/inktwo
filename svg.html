<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Inky SVG Editor</title>
<style>
  body {
    margin: 0;
    display: flex;
    height: 100vh;
    font-family: sans-serif;
    background: #1e1e1e;
    color: #e0e0e0;
  }
  .sidebar {
    width: 260px;
    background: #2a2a2a;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    box-sizing: border-box;
  }
  button, select, input {
    width: 100%;
    padding: 8px;
    background: #3b3b3b;
    color: #fff;
    border: 1px solid #555;
    border-radius: 6px;
  }
  button:hover {
    background: #4a4a4a;
    cursor: pointer;
  }
  #canvas-container {
    flex: 1;
    background: #111;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  svg {
    width: 90%;
    height: 90%;
    background: #fff;
  }
</style>
</head>
<body>

<div class="sidebar">
  <h2>Tools</h2>
  <button onclick="setTool('select')">Select</button>
  <button onclick="setTool('rect')">Rectangle</button>
  <button onclick="setTool('circle')">Circle</button>
  <button onclick="setTool('path')">Path</button>
  <button onclick="setTool('text')">Text</button>

  <h3>Colors</h3>
  <input type="color" id="fillColor" value="#000000" />
  <input type="color" id="strokeColor" value="#000000" />
  <input type="number" id="strokeWidth" min="1" max="20" value="2" />

  <h3>Font</h3>
  <select id="fontSelect">
    <option value="Arial">Arial</option>
    <option value="Verdana">Verdana</option>
    <option value="Georgia">Georgia</option>
    <option value="Courier New">Courier New</option>
  </select>

  <h3>File</h3>
  <button onclick="downloadSVG()">Download SVG</button>
</div>

<div id="canvas-container">
  <svg id="svgCanvas"></svg>
</div>

<script>
let tool = "select";
let svg = document.getElementById("svgCanvas");
let isDrawing = false;
let currentElement = null;

function setTool(t) {
  tool = t;
}

svg.addEventListener("mousedown", (e) => {
  let x = e.offsetX;
  let y = e.offsetY;

  if (tool === "rect") {
    currentElement = document.createElementNS("http://www.w3.org/2000/svg", "rect");
    currentElement.setAttribute("x", x);
    currentElement.setAttribute("y", y);
    currentElement.setAttribute("width", 0);
    currentElement.setAttribute("height", 0);
    applyStyles(currentElement);
    svg.appendChild(currentElement);
    isDrawing = true;
  }

  if (tool === "circle") {
    currentElement = document.createElementNS("http://www.w3.org/2000/svg", "circle");
    currentElement.setAttribute("cx", x);
    currentElement.setAttribute("cy", y);
    currentElement.setAttribute("r", 0);
    applyStyles(currentElement);
    svg.appendChild(currentElement);
    isDrawing = true;
  }

  if (tool === "path") {
    currentElement = document.createElementNS("http://www.w3.org/2000/svg", "path");
    currentElement.setAttribute("d", `M ${x} ${y}`);
    applyStyles(currentElement);
    svg.appendChild(currentElement);
    isDrawing = true;
  }

  if (tool === "text") {
    let text = prompt("Enter text:");
    if (!text) return;
    let tElem = document.createElementNS("http://www.w3.org/2000/svg", "text");
    tElem.setAttribute("x", x);
    tElem.setAttribute("y", y);
    tElem.setAttribute("font-family", document.getElementById("fontSelect").value);
    tElem.setAttribute("font-size", 32);
    tElem.textContent = text;
    applyStyles(tElem);
    svg.appendChild(tElem);
  }
});

svg.addEventListener("mousemove", (e) => {
  if (!isDrawing || !currentElement) return;
  let x = e.offsetX;
  let y = e.offsetY;

  if (tool === "rect") {
    currentElement.setAttribute("width", x - currentElement.getAttribute("x"));
    currentElement.setAttribute("height", y - currentElement.getAttribute("y"));
  }

  if (tool === "circle") {
    let cx = +currentElement.getAttribute("cx");
    let cy = +currentElement.getAttribute("cy");
    let r = Math.sqrt((x - cx) ** 2 + (y - cy) ** 2);
    currentElement.setAttribute("r", r);
  }

  if (tool === "path") {
    let d = currentElement.getAttribute("d");
    currentElement.setAttribute("d", d + ` L ${x} ${y}`);
  }
});

svg.addEventListener("mouseup", () => {
  isDrawing = false;
  currentElement = null;
});

function applyStyles(el) {
  el.setAttribute("fill", document.getElementById("fillColor").value);
  el.setAttribute("stroke", document.getElementById("strokeColor").value);
  el.setAttribute("stroke-width", document.getElementById("strokeWidth").value);
}

function downloadSVG() {
  let source = svg.outerHTML;
  let blob = new Blob([source], { type: "image/svg+xml" });
  let url = URL.createObjectURL(blob);
  let a = document.createElement("a");
  a.href = url;
  a.download = "drawing.svg";
  a.click();
  URL.revokeObjectURL(url);
}
</script>

</body>
</html>
